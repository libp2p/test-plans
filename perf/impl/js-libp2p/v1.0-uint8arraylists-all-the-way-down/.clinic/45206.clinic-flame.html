
  <!DOCTYPE html>
  <html lang="en" class="">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAHYgAAB2IBOHqZ2wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKGSURBVFiFzZdNSBRhGMd/zzhGRtoHHfQchLqIlIeoYwqV3TI36BB0CrxZufSBFVHYIcGrl05JuNmpEIT0EkUURth+HOwitWlZZku5u7XO22EY1J1xZ3aclX6wh/eZd5//H/7v7ryP4AMVDTUC14FjgALGgFsSjidK7SUlCu9G1A2UdAF6wWMDGEKvuCQnp74GakANtlSyK3sOuAPscdm+iOIu1bkBaf+Q27ABNdzQhmgDQMiL2VVMI+qadCYe+TKgRprqMVQ/qPYShQuZQJNuORWb8mTAJWe/mOcjLz1yJvbF0YCZc64L1E1gZ0DChfxCST/V2T7rfAiAGmkMYcgwpefslzgQlnA8IepxQx3L2lugdpPELeaoMA5o5LVIYOLNEeiMwZEHXnbXYmg9OsKhQMQBPo6C8QcW3nvbrzisAzsCM7AQMz/eqdGBKnt5L7Q+BH0bGHl4dRFS4+7tmiOw7+zKOjsPo8dhObveN6qcDfz+BMlBqKwBIwffHf9D7FgRWL/upc/FxAGqREVDaaDam0LgpN0jcGLmCby+Yq/7jMDO6gicmHvuXLdFkHKLgP8igozNgFsEFsqAN1dh5qm5LozAYnoI3vU5dchYBtbiFoGF8RfmJ1fWhRGYLiE1sV6HjKhoKAnUF1cqG0kd+Gkre43AK+tHkNYRXqI4uKbsNQJPFI3ghfU6ngTqAlArBfN1LB3JWaAN85KwWcSBVulIzmoAEo4n+LF1P3Ae+FZG4UUUl9mea7GGmM29lDoMLS7XcuMecGKD4uNocsHztdxmpMyDiebWRU4nn5V4Pqycm9zEwddwSgRFN7Cl4HEeuI9e0Rv4cOpgpBFFL8JRQCGMobjtZzz/B7bGC79/U0QUAAAAAElFTkSuQmCC">
      <title>Clinic Flame</title>
      <style>html {
  --nc-colour-text: white;
  --nc-colour-code: #E9F100;
  --nc-colour-notification-dot: #2165E5;
  --nc-colour-tray-backdrop: rgba(0, 0, 0, 0.6);
  --nc-colour-tray: #292d39;
  --nc-colour-header-background: #292d39;
  --nc-font-family-sans: Archia, sans-serif;
  --nc-font-family-sans-alt: Campton, sans-serif;
  --nc-font-family-monospace: 'Space Mono', monospace;
}

html {
  font-family: var(--nc-font-family-sans);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--nc-font-family-sans-alt);
}

pre,
code {
  font-family: var(--nc-font-family-monospace);
}

input,
button {
  font-family: inherit;
}

/* Icon */

.nc-icon {
  display: inline-block;
  position: relative;
  width: 1em;
  height: 1em;
  vertical-align: middle;
}

.nc-icon svg {
  position: absolute;
  left: -10%;
  top: -10%;
  width: 120% !important;
  height: 120% !important;
}

/* Code block */

.nc-code {
  padding: 1em;
  font-size: 18px;
  font-weight: bold;
  text-align: left;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  white-space: pre;
  tab-size: 2;
  hyphens: none;
  border-radius: 4px;
  color: var(--nc-colour-code);
  background-color: rgba(0, 0, 0, 0.1);
  line-height: 1.75;
  overflow: auto;
}

/* Help Button */

.nc-button.walkthrough-button {
  margin-left: 15px;
}

.nc-button.walkthrough-button .nc-button__inner-container {
  padding: 0px;
}

.nc-button.walkthrough-button {
  display: inline-block;
  position: relative;
  z-index: 0;
  width: auto;
  padding: 0.5em;
  font-size: 13px;
  font-family: inherit;
  font-weight: bold;
  text-decoration: none;
  text-align: center;
  white-space: nowrap;
  border: solid currentColor 1px;
  color: var(--nc-colour-text);
  border-radius: 4px;
  background-color: transparent;
  cursor: pointer;
}

.nc-button.walkthrough-button:hover:before,
.nc-button.walkthrough-button:active:before {
  opacity: 0.1;
}

.nc-button.walkthrough-button:active:before {
  background-color: black;
}

/* Tray */

.nc-tray-backdrop,
.nc-tray {
  display: none;
  position: fixed;
  z-index: 999;
  top: 0;
  right: 0;
  width: 100vw;
  height: 100vh;
  opacity: 0;
  transition-property: opacity, transform;
  transition-duration: 0.2s;
  transition-timing-function: ease-out;
}

.nc-tray-backdrop {
  background-color: var(--nc-colour-tray-backdrop);
}

.nc-tray {
  background-color: var(--nc-colour-tray);
  color: var(--nc-colour-text);
  font-size: 16px;
  transform: translateX(100%);
}

.nc-tray__inner {
  padding: 32px;
}

.nc-tray__inner a:link,
.nc-tray__inner a:visited {
  color: inherit;
}

.nc-tray__close {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  padding: 8px;
  border: 0;
  border-radius: 100%;
}

.nc-tray__close:before {
  border-radius: 100%;
}

.nc-tray__close-icon {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.is-tray-visible .nc-tray,
.is-tray-visible .nc-tray-backdrop {
  display: block;
}

.is-tray-active .nc-tray,
.is-tray-active .nc-tray-backdrop {
  opacity: 1;
  transform: none;
}

/* Header */

.nc-header {
  display: flex;
  align-items: center;
  height: 65px;
  background: var(--nc-colour-header-background);
  justify-content: space-between;
  padding: 0px 16px;
}

.nc-header__logo {
  display: flex;
  align-items: center;
  text-decoration: none;
}

.nc-header__logo-text {
  color: var(--nc-colour-text);
  font-weight: bold;
  font-size: 18px;
}

.nc-header__logo svg {
  display: block;
  height: 29px;
  width: auto;
  margin-right: 13px;
}

.nc-header__tool-version {
  color: var(--nc-colour-text);
  font-size: 12px;
  text-align: right;
}

.nc-header__elapsed-time {
  color: var(--nc-colour-text);
  font-size: 12px;
  margin-left: 12px;
  padding: 12px;
  border-left: 1px solid var(--nc-colour-tray);
}

.nc-header__sponsor {
  padding-right: 13px;
  position: relative;
  top: 8px;
}

.nc-header__sponsor svg {
  display: block;
  height: 15px;
  width: auto;
}

.nc-header__inner {
  display: flex;
  align-items: center;
}

/* Modifiers */

.nc-light-on-dark,
html.light-theme main .nc--dark-on-light  {
  /* Light text on a dark background may look blocky without this, esp. on MacOS
   * Only for use on light text on a dark background, see:
   * http://usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/
   */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.nc--dark-on-light,
html.light-theme main .nc-light-on-dark {
  -webkit-font-smoothing: auto;
  -moz-osx-font-smoothing: auto;
}

@media(min-width: 640px) {
  .nc-tray {
    width: 640px;
  }

  .nc-tray__close {
    padding: 0.5em;
  }

  .nc-header__logo-text {
    font-size: 24px;
  }

  .nc-header__logo svg {
    height: 42px;
    margin-right: 16px;
  }

  .nc-header__sponsor {
    padding-right: 16px;
    position: relative;
    top: 8px;
  }

  .nc-header__sponsor svg {
    height: 21px;
  }
}

.nc-button {
  background-color: var(--nc-button-bgColor, black);
  border          : none;
  color           : var(--nc-button-color, white);
  cursor          : pointer;
  font-size       : var(--nc-button-fontSize, 1rem);
  line-height     : 1;
  min-width       : 0;
  padding         : 0;
}

.nc-button::-moz-focus-inner {
  border:0;
}

.nc-button:hover:not(:disabled) {
  background-color: var(--nc-button-bgHover, rgb(25, 25, 25));
  outline         : 1px dotted var(--nc-button-hoverOutline, rgba(255, 255, 255, 0.5));
}

.nc-button:focus {
  outline         : 1px dotted var(--nc-button-hoverOutline, rgba(255, 255, 255, 0.5));  
}

.nc-button:disabled {
  opacity: 0.5;
  cursor : auto;
  filter : saturate(0);
}

.nc-button__inner-container {
  display         : flex;
  justify-content : center;
  align-items     : center;
  padding         : 0.3em;
}

.nc-button .icon-img {
  font-size  : 1.5em;
  margin     : 0.133em;
  flex-shrink: 0;
}

.nc-button__label {
  margin       : 0.3em;
  overflow     : hidden;
  text-overflow: ellipsis;
  white-space  : nowrap;
  min-width    : 1.3em;
}

/* secondary-btn style */

.nc-button.secondary-btn {
  background-color: transparent;
}

.nc-button.secondary-btn:hover:not(:disabled) {
  background-color: rgb(0, 0, 0, 0.15);
  outline         : transparent;
}

.nc-checkbox {
  background-color: var(--nc-checkbox-bgColor, black); 
  padding         : 0.3em;
  display         : flex;
  cursor          : pointer;
  align-items     : center;
  min-width       : 0;
}

.nc-checkbox input {
  display: none;
}

.nc-checkbox .copy-wrapper {
  margin       : 0.3em;
  overflow     : hidden;
  text-overflow: ellipsis;
  white-space  : nowrap;
  min-width    : 1.3em;
}

.nc-checkbox:hover:not(:disabled) {
  background-color: var(--nc-checkbox-hoverColor, white);
  outline: 1px dotted var(--nc-checkbox-hoverOutline); 
}

.nc-checkbox .icon-wrapper {
  align-items    : center;
  border-radius  : 3px;
  display        : flex;
  font-size      : 1.5em;
  margin         : 0.133em;
  flex-shrink    : 0;
  justify-content: center;
  color          : var(--nc-checkbox-borderColor);
}

.nc-checkbox .icon-wrapper svg {
  display: none;
}

.nc-checkbox .icon-wrapper .checkbox-unchecked-svg {
  display: initial;
}

.nc-checkbox :checked ~ .icon-wrapper .checkbox-unchecked-svg{ 
  display: none;
}

.nc-checkbox :checked ~ .icon-wrapper {
  color: var(--nc-checkbox-checkedIconColor); 
}

.nc-checkbox :checked ~ .icon-wrapper .checkbox-checked-svg {
  display: initial;
}

.nc-checkbox :indeterminate ~ .icon-wrapper {
  color: var(--nc-checkbox-indeterminateIconColor); 
}

.nc-checkbox :indeterminate ~ .icon-wrapper .checkbox-indetermined-svg {
  display: initial;
}

.nc-checkbox :indeterminate ~ .icon-wrapper .checkbox-unchecked-svg,
.nc-checkbox :indeterminate ~ .icon-wrapper .checkbox-checked-svg {
  display: none;
}

.nc-context-overlay {
  position: fixed;
  z-index: 9;
  display: none;
}

.nc-context-overlay.show {
  display: block;
}

.nc-context-overlay-inner {
  overflow: hidden;
  height: 20px;
  width: 20px;
  position: absolute;
  top: 0px;
}

.nc-context-overlay-arrow {
  position: absolute;
  border: 10px solid transparent;  
  left: -10px;
  display: none;
}

.nc-context-overlay.arrowTop .nc-context-overlay-arrow {
  border-bottom-color: white;
  top: -19px;
  display: block;
}

.nc-context-overlay.arrowBottom .nc-context-overlay-arrow {
  border-top-color: white;
  bottom: -19px;
  display: block;
}

.nc-dropdown {
  background-color: var(--nc-dropdown-borderColor, rgba(255, 255, 255, 0.7));
  padding: 1px;
  display: flex;
  position: relative;
  color: var(--nc-dropdown-color, white);
  z-index: 2;
}

.nc-dropdown .label{
  padding: 0.2em 0.5em;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;  
}

.nc-dropdown .label-wrapper {
  background-color: var(--nc-dropdown-bgColor, black);
  align-items: center;
  display: flex;
  min-width: 2.4em;    
}

.nc-dropdown .nc-button{
  margin-left: 1px;
}

.nc-dropdown .nc-button .icon-img {
  margin: 2px;
  transition: transform 0.6s cubic-bezier(0.42, 0, 0.23, 1.65);
  transform-origin: 50%;
}

.nc-dropdown.expanded .nc-button .icon-img {
  transform: rotateZ(90deg);
}

.nc-dropdown.expanded.direction-up .nc-button .icon-img {
  transform: rotateZ(-90deg);
}

.nc-dropdown .nc-dropdown-content-wrapper {
  background-color: var(--nc-dropdown-contentBg, black);
  position: absolute;
  right: 0;
  top: calc(100% + 2px);
  display: none;
  opacity: 0;
  --anim-duration: 0.2s;
  transform-origin: right top;
  border: 1px solid var(--nc-dropdown-contentBorderColor, rgba(255, 255, 255, 0.5));
  max-height: 40vh;
  overflow: auto;
}

.nc-dropdown.nc-dropdown.direction-up .nc-dropdown-content-wrapper {
  transform-origin: right bottom;
}

.nc-dropdown.contracted .nc-dropdown-content-wrapper {  
  display: block;
  animation: var(--anim-duration) dropdown-contract 0s 1 normal forwards;
}

.nc-dropdown.expanded .nc-dropdown-content-wrapper {  
  display: block;
  animation: var(--anim-duration) dropdown-expand 0.001s 1 normal forwards;
}

.nc-dropdown.direction-up .nc-dropdown-content-wrapper {
  top: auto;
  bottom: calc(100% + 2px);
}

@keyframes dropdown-expand {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes dropdown-contract {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  
  100% {
    opacity: 0;
    transform: scale(0.9);
  }
}

.wt-container {
  opacity: 0;
  transition: left 1.5s cubic-bezier(0.65, 0.05, 0.36, 1), top 1.5s cubic-bezier(0.65, 0.05, 0.36, 1);
}

.wt-container.zoom-out {
  animation: wt-zoom-out 0.3s ease-in-out forwards;
}

.wt-container.zoom-in {
  animation: wt-zoom-in 0.6s ease-in-out forwards;
}

.wt-container .nc-context-overlay-inner {
  background-color: #fff;
  border-radius   : 3px;
  box-shadow      : 0 2px 3px rgba(0, 0, 0, 0.5);
  color           : rgb(39, 39, 39);
  overflow        : hidden;
  transition      : left 0.5s ease-in-out, top 0.5s ease-in-out, height 0.5s ease-in-out, width 0.5s ease-in-out;
}

.nc-walkthrough-wrapper {
  display       : flex;
  flex-direction: column;
  min-width     : 300px;
}

.nc-walkthrough-content{
  border-top: 1px solid rgba(0, 0, 0, 0.5);
  padding   : 20px;
  flex-grow : 1;
}

.nc-walkthrough-controls {
  display        : flex;
  justify-content: space-between;
  padding        : 3px;
  flex-shrink    : 0;
}

.nc-walkthrough-controls .nc-button,
.closeBtn {
  --nc-button-bgHover: rgba(15, 15, 15, 0.2);
  --nc-button-bgColor: transparent;
  --nc-button-color  : rgba(0, 0, 0, 0.5);
  flex-shrink        : 0;
  padding            : 0;
}

.nc-walkthrough-wrapper .closeBtn {
  font-size: 10px;
  padding  : 5px;
  position : absolute;
  right    : 0;
  top      : 1px;
}

.nc-walkthrough-wrapper .doneBtn {
  display: none;
}

.nc-walkthrough-wrapper.done .doneBtn {
  --nc-button-bgHover: rgb(2, 112, 2);
  --nc-button-bgColor: green;
  --nc-button-color  : white;
  display            : initial;
  padding            : 0 0.3em;
}

.nc-walkthrough-controls .nextBtn {
  --nc-button-bgHover: var(--nc-walkthrough-theme, rgb(255, 170, 43));
  --nc-button-bgColor: var(--nc-walkthrough-theme, rgb(255, 170, 43));
  --nc-button-color  : white;
}

.nc-walkthrough-controls .nextBtn .nc-button__inner-container {
  padding-left       : 0.6em;
}

.nc-walkthrough-wrapper .nc-button {
  --nc-button-hoverOutline: rgba(0, 0, 0, 0.5);
}

.nc-walkthrough-wrapper.done .nextBtn {
  display: none;
}

.nc-walkthrough-controls-steps {
  align-items    : center;
  display        : flex;
  flex-grow      : 1;
  justify-content: center;
}

.nc-walkthrough-controls-steps .step {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius   : 10px;
  height          : 10px;
  margin          : 2px;
  width           : 10px;
}

.nc-walkthrough-controls-steps .step.current {
  background-color: var(--nc-walkthrough-theme, rgb(255, 170, 43));
}

@keyframes wt-zoom-out {
  0% {
    opacity: 1;
    transform: scale(1);    
  }  
  100% {
    opacity: 0;
    transform: scale(0.8);    
  }
}

@keyframes wt-zoom-in {
  0% {
    opacity: 0;
    transform: scale(0.8);    
  }  
  100% {
    opacity: 1;
    transform: scale(1);    
  }
}

.nc-element-highlighter {
  display   : none;
  position  : relative;
  z-index   : 5;
}

.nc-element-highlighter.show {
  display   : block;
  transition: opacity 0.6s cubic-bezier(0.455, 0.03, 0.515, 0.955);
}

.nc-element-highlighter-container{
  opacity: 0;
}

.nc-element-highlighter .nc-element-highlighter-panel {
  position        : fixed;
  top             : 0;
  left            : 0;
  width           : 100vw;
  height          : 100vh;
  transition      : transform 0.6s cubic-bezier(0.455, 0.03, 0.515, 0.955);
  background-color: #000;
}

.nc-element-highlighter-border {
  display: none;
  position: fixed;
  transition: all 0.8s cubic-bezier(0.455, 0.03, 0.515, 0.955);
}

.nc-element-highlighter.show-border .nc-element-highlighter-border{
  display: block;
}

.nc-element-highlighter-border::before,
.nc-element-highlighter-border::after {
  content   : "";
  position  : absolute;
  width     : 10px;
  height    : 10px;
  color     : var(--nc-element-highlighter-theme, rgb(255, 170, 43));
}

.nc-element-highlighter-border::before {
  border-top : 3px solid;
  border-left: 3px solid;
  top        : -2px;
  left       : -2px;
}

.nc-element-highlighter-border::after {
  border-bottom: 3px solid;
  border-right : 3px solid;
  right        : -2px;
  bottom       : -2px;
}

.nc-link {
  align-items     : center;
  background-color: var(--nc-link-bgColor, transparent);
  border          : none;
  color           : var(--nc-link-color, white);
  cursor          : pointer;
  display         : flex;
  font-size       : var(--nc-link-fontSize, 1rem);
  justify-content : center;
  line-height     : 1;
  min-width       : 0;
  padding         : 0.3em;
  text-decoration : none;
}

.nc-link:hover {
  background-color: var(--nc-link-bgHover, rgba(0, 0, 0, 0.1));
}

.nc-link .icon-img {
  font-size: 1.5em;
  margin   : 0.133em;
  flex-shrink: 0;
}

.nc-link .label {
  margin       : 0.3em;
  overflow     : hidden;
  text-overflow: ellipsis;
  white-space  : nowrap;
  min-width    : 1.3em;
  border-bottom: 1px dotted transparent;
}

.nc-link:hover .label {
  border-bottom-color: currentColor;
}

.nc-accordion {
  font-size: 1rem;
  border: 1px solid rgba(255,255,255,0.2);
}

.nc-accordion .nc-button {
  width: 100%;
  font-size: 1em;
}

.nc-accordion .nc-button__inner-container {
  justify-content: space-between;
  position: relative;
}

.nc-accordion .nc-button__inner-container .icon-img{
  position: absolute;
  right: 0.33em;
  top: 50%;
  margin: -0.5em 0 0 0;  
  transition: transform 0.6s ease-in-out;
  transform: rotateZ(0deg);  /* this is needed by MS Edge */
}

.nc-accordion.show-expand-icon .nc-button__inner-container .icon-img{
  transform: rotateZ(90deg);
}

.nc-accordion.show-expand-icon .nc-button__inner-container .vertical-line {
  transform: rotateZ(180deg);
}

.nc-collapsible-container {
  overflow: hidden;
  transition: height 0.4s ease-in-out;
  height: 0px;
}

.nc-collapsible-container__inner-content-wrapper {
  display: none;
}

.nc-collapsible-container.expanded .nc-collapsible-container__inner-content-wrapper {
  display: block;
}

.nc-animation-pulse {
  animation-name: nc-animation-pulse;
  animation-direction: alternate;
  animation-duration: 0.8s;
  animation-iteration-count: 8;
  animation-timing-function: ease-in-out;  
  transform-origin: 50%;
}

@keyframes nc-animation-pulse {
  100% {
    opacity: 0.2;
    transform: scale(0.95);
  }
}

/* setting scroll-bars style ( webkit only ) */

.scroll-container::-webkit-scrollbar {
  width: 13px;
  background-color: var(--scrollbar-bg);
}

.scroll-container::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 2px var(--scrollbar-shadow);
}

.scroll-container::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb);
  outline: 1px solid var(--scrollbar-thumb-outline);
  border-radius: 2px;
  box-shadow: 4px 1px 6px -2px var(--light-glare) inset;
}

@media (pointer: coarse) {
  .scroll-container::-webkit-scrollbar {
    width: 30px;
  }
}

.nc-walkthrough-content .scrollable {
  max-height: 200px;
  overflow: auto;
}

.nc-walkthrough-content .welcome-step {
  display: flex;
  align-items: center;
  margin-top: 0;
}

.nc-walkthrough-content .icon {
  margin: -4px 8px 0 -4px;
}

.nc-walkthrough-content ul,
.nc-walkthrough-content ol {
  padding-left: 1.5em;
}

.nc-walkthrough-content li {
  margin: 0.5em 0;
}

#toolbar {
  background-color: var(--banner-bg-color);
  z-index: 5;
  position: relative;
}

#info-box {
  margin: 8px;
}

#toolbar-top-panel {
  display: flex;
  justify-content: space-between;
  margin: 8px;
  flex-wrap: wrap;
}

#toolbar-side-panel {
  margin: 8px 8px 0px;
  flex-grow: 0;
  display: flex;
  align-items: stretch;
}

#helpBtn {
  display: flex;
  align-items: stretch;
}

@media screen and (min-width: 720px) {
  #info-box .frame-info {
    font-size: var(--small-text-size);
  }
}

/* presentation mode */

.presentation-mode #toolbar-side-panel {
  background-color: transparent;
  padding: 0px;
}

#stack-bar {
  position: relative;
  cursor: pointer;
  box-shadow: 0px -1px 0px rgba(255, 255, 255, 0.3) inset;
  overflow: hidden;
}

#stack-bar .stack-frame {
  height: 6px;
  transition: transform 0.3s cubic-bezier(0.42, 0, 0.46, 1.79);
  transform-origin: 50%;
  pointer-events: none;
}

#stack-bar .stack-frame.highlighted{
  transform: scaleY(1.8)
}

#stack-bar .stack-frame.selected{
  border-top: 1px solid var(--main-bg-color);
  border-bottom: 1px solid var(--main-bg-color);
  box-shadow: 0 0 3px 1px rgba(var(--grey-highlight-color-val), 0.7);

  /* Make shadow/glow extend around border, while border doesn't cut into box size */
  box-sizing: content-box;
}

#stack-bar .stacks-wrapper{
  display: flex;
  height: 18px;
  align-items: center;
  background: var(--main-bg-color);
  border-bottom: 1px solid var(--light-glare);
}

#stack-bar .pointer {
  border-color: transparent;
  border-bottom-color: var(--banner-bg-color);
  border-style: solid;
  border-width: 10px;
  bottom: 0px;
  left: 0px;
  margin-left: -10px;
  pointer-events: none;
  position: absolute;
  transition: transform .5s cubic-bezier(0.65, 0.05, 0.36, 1);
  filter: drop-shadow(0px -1px 0px var(--light-glare));
}

/* presentation mode */

.presentation-mode #stack-bar .stack-frame.selected{
  box-shadow: 0 0 2px 1px rgba(var(--grey-highlight-color-val), 1);
}

.presentation-mode #stack-bar .pointer {
  filter: drop-shadow(0px -1px 0px rgba(255, 255, 255, 0.9));
}

#key-panel.panel {
  display: flex;
  justify-content: flex-end;
  padding: 6px 12px;
  font-size: var(--small-text-size);
  position: relative;
}

/* Adds the key color bars. */

#key-panel .key {
  display: flex;
  align-items: center;
}

#key-panel .key::before {
  content: ' ';
  display: inline-block;
  width: 1em;
  height: 1em;
  border-radius: 50%;
  background-color: currentColor; /* use the text color as the background */
  margin-right: 6px;
  /* Vertical size and position — hopefully the ems work well even if we change font size */
  margin-bottom: 0.1em;
  flex-shrink: 0
}

/* Have some minimum distance between labels if there's not much space… */

#key-panel .key:not(:last-child),
#key-panel .key-title {
  margin-right: 16px;
}

#key-panel .key-title {
  flex-grow: 1;
  color: var(--grey-highlight);
}

#key-panel .key-title em {
  font-style: italic;
  white-space: nowrap;
}

#key-panel .key-app {
  color: var(--area-color-app);
}

#key-panel .key-deps {
  color: var(--area-color-deps);
}

#key-panel .key-core {
  color: var(--area-color-core);
}

.search-box input {
  background  : black;
  border      : none;
  color       : white;
  font-family : inherit;
  font-size   : var(--small-text-size);
  height      : 100%;
  margin      : 0px;
  padding     : 4px 8px;
  width       : 100%;
}

section#flame-main {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  flex-shrink: 1;
  overflow: hidden;
  position: relative;
}

#flame-main canvas {
  display: block;
  position: relative;
}

#flame-main .scroll-container {
  flex-grow: 1;
  flex-shrink: 1;
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

chart {
  display: block;
}

chart > div {
  height: 100%;
}

#flame-main .flamegraph-outer {
  border-top: 1px solid var(--light-glare);
}

/* node-highlighter */

.node-highlighter {
  pointer-events: none;
  position: absolute;
  transition: transform .3s cubic-bezier(0.65, 0.05, 0.36, 1), width .3s cubic-bezier(0.65, 0.05, 0.36, 1);
  top: 0px;
  left: 0px;
  display: none;
  flex-direction: column;
  align-items: center;
  z-index: 10;
}

.highlighter-box {
  display: none;
  top: 0px;
  left: 0px;
  border: 1px dashed rgba(255, 255, 255, 0.5);
  pointer-events: none;
  position: absolute;
}

.highlighter-box.show{
  display: block;
}

.node-highlighter.show {
  display: flex;
}

.node-highlighter .down-arrow {
  border-color: transparent;
  border-top-color: var(--banner-bg-color);
  border-style: solid;
  border-width: 10px;
  filter: drop-shadow(0px 1px 0px var(--light-glare));
  margin:0 0 -8px;
  flex-shrink: 0;
}

.node-highlighter .vertical-line {
  flex-grow: 1;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.node-highlighter .vertical-line::before {
  content:"";
  flex-grow: 1;
  width: 0px;
  border-left: 1px dashed rgba(255, 255, 255, 0.5);
}

.selection-box {
  position: absolute;
  pointer-events: none;
  background: rgba(var(--grey-highlight-color-val), 0.12);
  background: linear-gradient(to bottom,
    rgba(var(--grey-highlight-color-val), 0.28) 0%,
    rgba(var(--grey-highlight-color-val), 0.14) 60%,
    rgba(var(--grey-highlight-color-val), 0) 100%
  );
  border: 1px solid transparent;
  box-shadow: 0 1px 4px rgba(var(--grey-highlight-color-val), 0.14);
  z-index: 10;
}

#flame-main canvas.flame-overlay {
  pointer-events: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 3;
}

.zoom-underline {
  position: absolute;
  pointer-events: none;
  border-top: 3px solid var(--main-bg-color);
  background: linear-gradient(to bottom, rgba(var(--grey-highlight-color-val), 0.3), rgba(var(--grey-highlight-color-val), 0));
}

.fg-tooltip-actions {
  display: flex;
  background-color: rgba(var(--opposite-color-val), 0.8);
  border: 1px solid var(--primary-grey);
  color: white;
  font-size: var(--normal-text-size);
}

.fg-tooltip-actions button {
  background-color: transparent;
  align-items: center;
  border-radius: 0;
  border: none;
  color: inherit;
  cursor: pointer;
  display: flex;
  flex-basis: 50%;
  font-size: inherit;
  justify-content: center;
  line-height: 1.2em;
  padding: 2px;
  outline: none;
}

.fg-tooltip-actions .label {
  white-space: nowrap;
}

.fg-tooltip-actions button:hover {
  background-color: var(--clickable-bg-hover);
  outline: 1px solid var(--max-contrast);
}

.fg-tooltip-actions .zoom-button svg {
  display: none;
}

.fg-tooltip-actions .zoom-button.zoom-in .zoom-in-svg {
  display: initial;
}

.fg-tooltip-actions .zoom-button.zoom-out .zoom-out-svg {
  display: initial;
}

.fg-tooltip-actions span {
  padding: 0 0.15em;
}

.fg-tooltip-actions .icon {
  display: flex;
  align-items: center;
}

/* presentation-mode */

.presentation-mode .node-highlighter .vertical-line::before {
  border-left-width: 2px;
}

.presentation-mode .selection-box {
  background-color: rgba(var(--grey-highlight-color-val), 0.2);
  box-shadow: 0 1px 4px rgba(var(--grey-highlight-color-val), 0.3);
}

.presentation-mode .highlighter-box {
  border-width: 2px;
}

#message-component {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  top: 2px;
  z-index: 99;
}

#message-component .message-text {
  background-color: rgb(255, 170, 43);
  box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
  color: '#fff';
  padding: 5px;
  border-radius: 3px;
  margin: 1px 0px;
  font-size: var(--small-text-size);
  text-align: center;
  color: rgb(51, 51, 51);
}

#message-component pre {
  color: rgb(51, 51, 51);
  font-style: italic;
  margin: 1em 1em 0.5em;
  word-break: break-word;
  white-space: normal
}

.tooltip {
  position: fixed;
  z-index: 9;
}

.tooltip .tooltip-default-message{ /* Temporary style, will be replaced */
  padding: 0.2em 0.5em;
  font-size: var(--small-text-size);
  background-color: rgb(214, 214, 214);
  color: #333;  
  width: 33vw;      
  max-width: 230px;
  border-radius: 3px;
  box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
  opacity: 0.85;
  display: block;
}

.tooltip.hidden {
  visibility: hidden;
  display: block;
}

.tooltip .tooltip-inner {
  position: absolute;
  top: 0px;
}

.tooltip .tooltip-inner.top {
  top: auto;
  bottom: 0px;
}

#selection-controls {
  display: flex;
}

#selection-controls .hotness-selector {
  margin-right: 4px;
}

#selection-controls .rank-wrapper {
  margin: 0px 8px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
}

#selection-controls input.hotness-selector {
  background-color: var(--opposite-contrast);
  border: none;
  color: var(--max-contrast);
  height: 100%;
  padding: 0;
  text-align: center;
  width: 3.3em;
}

#selection-controls .hotness-selector,
#selection-controls label {
  font-size: var(--small-text-size);
}

#selection-controls label {
  color: var(--grey-highlight);
}

.visible-from-bp-1,
.visible-from-bp-2 .label {
  display: none;
}

@media screen and (min-width: 530px) {
  .visible-from-bp-1 {
    display: initial;
  }
}

@media screen and (min-width: 680px) {
  .visible-from-bp-2 .label {
    display: initial;
  }
}

/* presentation mode */

.presentation-mode #selection-controls {
  background-color: transparent;
  padding: 0px;
}

#info-box {
  display: flex;
  flex-direction: row-reverse;
  justify-content: stretch;
  position: relative;
}

#info-box .frame-info {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  align-items: center;
  font-size: var(--normal-text-size);
  line-height: 1.1;
  height: 2.9em;
  margin: 0;
  padding: 4px 8px;
  font-family: monospace, monospace;
  font-size: var(--normal-text-size);
  white-space: nowrap;
  overflow: hidden;
  background-color: rgba(var(--opposite-color-val), 0.5);
  color: var(--grey-highlight);
  /* make sure the text has enough space as dictated by `height` */
  box-sizing: content-box;
}

#info-box .frame-dropdown {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 70px;
  padding: 2px 4px;
  white-space: pre-wrap;
  font-weight: bold;
  background-color: black;
  color: white;
  border: 0;
  cursor: pointer;
}

#info-box .frame-dropdown:focus {
  outline: 0;
}

#info-box .frame-dropdown span {
  min-width: 36px;
  text-align: left;
}

#info-box .frame-info strong {
  color: var(--max-contrast);
  word-break: break-word;
}

#info-box .frame-dropdown svg {
  margin-right: -8px;
  font-size: 2em;
  transition: transform 0.6s cubic-bezier(0.42, 0, 0.23, 1.65);
}

#info-box.collapsed .frame-dropdown svg {
  transform: rotate(180deg);
}

#info-box .collapsible-content-wrapper {
  position: absolute;
  right: 0;
  top: 100%;
  min-width: 320px;
  padding: 8px;
  font-size: var(--small-text-size);
  color: white;
  background-color: var(--options-menu-bg-color);
}

#info-box .collapsible-content-wrapper h2 {
  padding: 0 8px 6px 8px;
  margin: 0 -8px;
  font-size: var(--small-text-size);
  border-bottom: 3px solid var(--main-bg-color);
}

#info-box .collapsible-content-wrapper > :first-child {
  margin-top: 0;
}

#info-box .frame-info-item {
  padding: 0 4px;
}

#info-box .collapsible-content-wrapper > :last-child {
  margin-bottom: 0;
}

#info-box .frame-info-item {
  max-height: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
}

#info-box .frame-function {
  color: var(--max-contrast);
  word-break: break-word;
}

#info-box .frame-area {
  color: var(--area-color-core);
}

#info-box .frame-line-col {
  color: var(--primary-grey);
}

#info-box .frame-line-col span {
  display: none;
}

.visible-md {
  display: none;
}

#ui-tooltip .frame-tooltip {
  width: 100vw;
  max-width: 100vw;
}

@media (min-width: 680px) {
  #info-box .frame-info {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    height: 4em;
  }

  #info-box .frame-info-item {
    line-height: 1;
    white-space: pre-wrap;
  }

  #info-box .frame-function {
    min-width: 20%;
  }

  #info-box .frame-path {
    flex-grow: 1;
    max-width: 60%;
  }

  #info-box .frame-area {
    flex-grow: 1;
    min-width: 20%;
    text-align: right;
  }
}

@media (min-width: 992px) {
  .visible-md {
    display: initial;
  }

  #info-box .frame-info-item {
    overflow: initial;
    text-overflow: initial;
  }

  #info-box .frame-info {
    align-items: center;
  }

  #info-box .frame-line-col span {
    display: inline-block;
  }

  #ui-tooltip .frame-tooltip {
    width: 33vw;
    width: max-content;
    max-width: none;
  }
}

/* presentation mode */

.presentation-mode #info-box .frame-info {
  background-color: var(--opposite-contrast);
}

.presentation-mode #info-box .frame-dropdown {
  border-left: solid var(--banner-bg-color) 1px;
}

html {
  --loading-message: "Loading file";
  --spinner-border-color: rgb(255,255,255);
  --spinner-base-border-color: rgb(121,122,124);
}

._loading_spinner_:before,
._loading_spinner_:after,
body:not(.content-ready):not(.has-no-spinner):before,
body:not(.content-ready):not(.has-no-spinner):after {
  width: 124px;
  height: 120px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  z-index: 9;
}

body:not(.content-ready):not(.has-no-spinner):before,
body:not(.content-ready):not(.has-no-spinner):after {
  top: 50vh;
  left: 50vw;
}

._loading_spinner_ {
  z-index: 999;
  position: absolute;
  background-color: rgba(0,0,0,0.6);
}

._loading_spinner_container {
  filter: blur(3px);
}

body:not(.content-ready):not(.has-no-spinner) {
  position: relative;
  z-index: 3;
}

._loading_spinner_:before,
body:not(.content-ready):not(.has-no-spinner):before{
  animation: loading 1.6s infinite linear;
  border-bottom: 4px solid var(--spinner-border-color);
  border-left: 1px solid var(--spinner-base-border-color);
  border-radius: 50%;
  border-right: 1px solid var(--spinner-base-border-color);
  border-top: 4px solid var(--spinner-border-color);
  content: "";
  display: block;
  transform: rotate(0deg);
  margin-top: -64px;
  margin-left: -62px;
}

._loading_spinner_:after,
body:not(.content-ready):not(.has-no-spinner):after{
  color: var(--max-contrast);
  content: var(--loading-message);
  display: flex;
  font-family: sans-serif;
  font-size: 12px;
  font-weight: bold;
  height: auto;
  justify-content: center;
  margin-top: 0;
  position: absolute;
  text-align: center;
  text-transform: uppercase;
}

@keyframes loading {
  100% {
    -webkit-transform: rotate(359deg);
    -moz-transform: rotate(359deg);
    -ms-transform: rotate(359deg);
    -o-transform: rotate(359deg);
    transform: rotate(359deg);
  }
}

#filters-bar {
   align-items     : center;
   background-color: var(--banner-bg-color);
   display         : flex;
   justify-content : space-between;
   padding         : 8px;
   position        : relative;
}

#filters-bar .options-menu-toggle {
  min-width: 130px;
}

#filters-bar .col-wrapper {
  display: flex;
  min-width: 0;
}

#filters-bar .col-wrapper > * {
  margin: 0 2px;
  min-width: 0;
}

.dropdown-content-wrapper {
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
}

#filters-bar .filter-option {
  padding: 1px;
}

#filters-bar .filter-option .label-wrapper {
  background-color: var(--opposite-contrast);
}

#filters-bar .filter-option.nc-dropdown > .nc-button .nc-button__inner-container {
  padding-left: 0;
  padding-right: 0;
}

#filters-bar .filter-option .nc-dropdown-content-wrapper {
  min-width: 100%;
}

#filters-bar .key-app {
  color: var(--area-color-app);
  background-color: var(--area-color-app);
}

#filters-bar .key-deps {
  color: var(--area-color-deps);
  background-color: var(--area-color-deps);
}

#filters-bar .key-core,
#filters-bar .key-wasm,
#filters-bar .key-v8,
#filters-bar .key-v8 .dropdown-content-wrapper {
  color: var(--area-color-core);
  background-color: var(--area-color-core);
}

#filters-bar .key-app .checkbox-copy-label:before,
#filters-bar .key-deps .checkbox-copy-label:before,
#filters-bar .key-core .checkbox-copy-label:before,
#filters-bar .key-wasm .checkbox-copy-label:before {
  content: '';
  width: 1em;
  height: 1em;
  border-radius: 50%;
  background-color: currentColor;
  vertical-align: text-top;
  margin-right: 0.3em;
}

@media screen and (min-width: 630px) {
  #filters-bar .key-app .checkbox-copy-label:before,
  #filters-bar .key-deps .checkbox-copy-label:before,
  #filters-bar .key-core .checkbox-copy-label:before,
  #filters-bar .key-wasm .checkbox-copy-label:before {
    display: inline-flex;
  }
}

#filters-bar .filter-option .nc-dropdown-content-wrapper .checkbox-copy-label:before {
  display: none;
}

.filters-content {
  padding: 1px;
  box-shadow: 3px 0px 4px -1px rgba(0,0,0,0.7) inset;
  color: var(--grey-highlight);
}

.filters-content .nc-accordion > .nc-button {
  position: relative; /* Appear above button hover */
  font-size: 1.4rem;
}

.filters-content .description {
  color: var(--primary-grey);
}

.filters-content .nc-accordion.nc-accordion--secondary > .nc-button {
  /* Solid colors overriding default */
  --nc-button-bgColor: var(--banner-bg-color);
  --nc-button-bgHover: var(--banner-bg-color);
}

.filters-content .nc-accordion.nc-accordion--secondary {
  margin-top: -8px;
  padding-right: 8px;
  text-align: right;
}

.filters-content .nc-accordion.nc-accordion--secondary .nc-collapsible-container {
  text-align: left;
  border-bottom: none;
  margin-left: 2px;
}

.filters-content .nc-accordion.nc-accordion--secondary.expanded .nc-collapsible-container {
  margin-bottom: 8px;
}

.filters-content .options > li {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.filters-content li>ul {
  padding-left: 24px;
}

.filters-content ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.filters-content .section {
  margin: 1px;
}

.filters-content .options {
  padding-bottom: 1em;
}

.filters-content .options label {
  align-items: flex-start;
  background-color: transparent;
  cursor: pointer;
  display: flex;
  line-height: 1.3;
  padding: 0.7em 5px;
  width: 100%;
}

.filters-content .options li.disabled {
  opacity: 0.3;
}

.filters-content .options li.disabled label {
  cursor: default;
}

.filters-content .options .app {
  color: var(--area-color-app);
}

.filters-content .options .core,
.filters-content .options .all-v8 {
  color: var(--area-color-core);
}

.filters-content .options .deps {
  color: var(--area-color-deps);
}

.filters-content .options .description .more-info{
  color: white;
  opacity: 0.7;
  text-decoration: none;
}

.filters-content .options .description .more-info:hover{
  opacity: 1;
}

.filters-content .nc-checkbox .copy-wrapper {
  flex-grow: 1;
  white-space: normal;
}

.filters-content .options #option-showoptimizationstatus.disabled {
  opacity: 0.5
}

#side-bar {
  --anim-duration : 0.3s;
  --min-width     : 300px;
  --width         : 25vw;

  --height        : 100%;
  
  background-color: rgba(var(--dark-grey-val), 0.95);
  bottom          : 0px;
  display         : none;
  left            : 0px;
  overflow        : hidden;
  position        : absolute;
  right           : 0px;
  height          : var(--height);
  z-index         : 10;
  font-size       : 1.4rem;

  border-top      : 1px solid var(--light-glare);
}

#side-bar .filters-options{
  overflow: auto;
  height: 100%;
}

#side-bar.expand{
  display: block;
  animation: var(--anim-duration) sidebar-expand;
}

#side-bar.expand>*{
  animation: var(--anim-duration) sidebar-slidein;
}

#side-bar.contract{
  display: block;
  animation: var(--anim-duration) side-bar-contract;
}

#side-bar.contract>*{
  animation: var(--anim-duration) sidebar-slideout;
}

@media screen and (min-width: 630px){
  #side-bar {
    border-top : none;
    flex-shrink: 0;
    font-size  : 1rem;
    height     : auto;
    position   : relative;
    top        : auto;
    width      : var(--width);
  }

  #side-bar.expand{
    animation: var(--anim-duration) sidebar-expand;
    min-width: var(--min-width);
  }
  
  #side-bar>*{
    width: var(--width);
    min-width: var(--min-width);
  }  
}

/* side-bar animation */

@keyframes sidebar-slidein {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes sidebar-slideout {
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
}

@media screen and (min-width: 630px){
  @keyframes sidebar-slidein {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
  
    100% {
      transform: translateX(0%);
      opacity: 1;
    }
  }
  
  @keyframes sidebar-slideout {
    0% {
      transform: translateX(0%);
      opacity: 1;
    }
  
    100% {
      transform: translateX(-100%);
      opacity: 0;
    }
  }  
}

@keyframes sidebar-expand {
  0% {
    height: 0%;
  }
  
  100% {
    height: var(--height);
  }
}

@keyframes side-bar-contract {
  0% {
    height: var(--height);
  }
  
  100% {
    height: 0%;
  }
}

@media screen and (min-width: 630px){
  @keyframes sidebar-expand {
    0% {
      width: 0%;
      min-width: 0px;
    }
    
    100% {
      width: var(--width);
      min-width: var(--min-width);
    }
  }

  @keyframes side-bar-contract {
    0% {
      width: var(--width);
      min-width: var(--min-width);
    }
    
    100% {
      width: 0%;
      min-width: 0px;
    }
  }
}

html {
  font-size: 62.5%;
}

/*
  fixing monospaced font issue
  reference : http://code.iamkate.com/html-and-css/fixing-browsers-broken-monospace-font-handling/
*/

pre,
code,
kbd,
samp,
tt {
  font-family: var(--nc-font-family-monospace);
  font-size:1em;
}

html {
  /* Define colors */

  --spinner-border-color: var(--flame-orange);

  --main-bg-color-val: 27, 30, 39;
  --max-contrast: rgb(255, 255, 255);
  --opposite-contrast: rgb(var(--opposite-color-val));
  --opposite-color-val: 0, 0, 0;
  --light-glare: rgba(255, 255, 255, 0.3);

  --main-bg-color: rgb(var(--main-bg-color-val));
  --main-bg-translucent: rgba(var(--main-bg-color-val), 0.94);

  --banner-bg-color-val: 50, 53, 61;
  --banner-bg-color: rgb(var(--banner-bg-color-val));
  --nc-colour-header-background: rgb(var(--banner-bg-color-val));

  --options-menu-bg-color: rgb(15, 18, 26);
  --footer-bg-color: rgb(15, 18, 26);
  --footer-color: rgba(255, 255, 255, 0.9);

  --clickable-bg-hover : rgb(15, 15, 15);

  --dark-grey-val: 25, 26, 30;

  --grey-blue: rgb(76, 92, 138);
  --primary-grey: rgb(121, 122, 124);
  --grey-highlight-color-val: 191, 192, 194;
  --grey-highlight: rgb(var(--grey-highlight-color-val));
  --flame-orange: rgb(255, 170, 43);



  --checkbox-border-color: rgba(var(--grey-highlight-color-val), 0.9);

  --area-color-app: var(--max-contrast);
  --area-color-deps: rgb(255, 170, 43);
  --area-color-core: rgb(230, 230, 230);

  /* scrollbars */
  --scrollbar-primary-color-val: 145, 169, 179;
  --scrollbar-primary-color: rgb(var(--scrollbar-primary-color-val));
  --scrollbar-bg: var(--light-glare);
  --scrollbar-shadow: rgba(0, 0, 0, 0.5);
  --scrollbar-thumb: rgba(var(--scrollbar-primary-color-val), 0.2);
  --scrollbar-thumb-outline: rgba(var(--scrollbar-primary-color-val), 0.849);

  /* Define text sizes */
  --main-text-size: 1.2rem;
  --small-text-size: 1rem;

  /* base component style */
  --nc-button-bgColor: var(--opposite-contrast);
  --nc-button-color: var(--max-contrast);
  --nc-button-fontSize: var(--small-text-size);
  --nc-button-bgHover: var(--clickable-bg-hover);
  --nc-button-hoverOutline: var(--light-glare);

  /* --nc-link-bgColor */
  --nc-link-color: rgb(63, 125, 198);
  --nc-link-fontSize: var(--small-text-size);
  /* --nc-link-bgHover */
  /* --nc-link-hoverOutline */
  
  --nc-checkbox-bgColor: var(--opposite-contrast);
  --nc-checkbox-hoverColor: var(--clickable-bg-hover);
  --nc-checkbox-hoverOutline: var(--light-glare);
  --nc-checkbox-borderColor: var(--checkbox-border-color);
  --nc-checkbox-checkedIconColor: var(--max-contrast);
  --nc-checkbox-indeterminateIconColor: var(--grey-highlight);
  
  --nc-dropdown-color: var(--max-contrast);
  --nc-dropdown-bgColor: var(--opposite-contrast);
  --nc-dropdown-contentBg: var(--opposite-contrast);
}

/* Overrides for light theme */

/* just a poc for now... */

html.light {
  --main-bg-color-val: 197, 224, 239;

  --max-contrast: rgb(0, 0, 0);
  --opposite-contrast: rgb(255, 255, 255);

  --banner-bg-color: rgba(0, 0, 0, 0.1);
  --options-menu-bg-color: rgba(0, 0, 0, 0.1);
  --footer-bg-color: rgba(0, 0, 0, 0.1);
  --footer-color: rgba(0, 0, 0, 0.9);
  --nc-colour-header-background: rgba(0, 0, 0, 0.1);
}

/* Overrides for Presentation mode */

/* just a poc for now... */

html.presentation-mode {
  --banner-bg-color: rgb(120, 122, 128);
  --main-bg-color: rgb(76, 78, 84);

  --grey-highlight: rgb(255, 255, 255);
  --primary-grey: rgb(var(--grey-highlight-color-val));

  --area-color-deps: rgb(255, 170, 43);
  --area-color-core: rgb(160, 155, 215);

  --clickable-bg-hover : rgb(0, 0, 0);
}

/* Main layout */

html,
body {
  border: 0;
  margin: 0;
  padding: 0;
  height: 100vh;
}

body {
  background: var(--main-bg-color);
  display: flex;
  flex-direction: column;
}

/* MS Edge doesn't like background colors on body elements when devtools open */

main {
  flex-grow: 1;
  background: var(--main-bg-color);
}

/* Global */

html * {
  box-sizing: border-box;
}

.hidden {
  /* Hides elements even if display is defined for structural reasons */
  display: none !important;
}

.collapsed .collapsible-content-wrapper {
  display: none;
}

/* breakpoints helpers */

.after-bp-1,
.after-bp-2 {
  display: none!important;
}

@media screen and (min-width: 630px) {
  .after-bp-1 {
    display: inherit!important;
  }
  .checkbox .after-bp-1{
    display: inline!important;
  }

  .before-bp-1 {
    display: none!important;
  }
}

@media screen and (min-width: 930px) {
  .after-bp-2 {
    display: inherit!important;
  }
  .checkbox .after-bp-2{
    display: inline!important;
  }

  .before-bp-2 {
    display: none!important;
  }
}

/* Header */

.nc-header {
  flex-shrink: 0;
}

.is-loading-font .nc-header {
  opacity: 0;
}

div#main-content {
  display: flex;
  flex-grow: 1;
  flex-shrink: 1;
  overflow: hidden;
  position: relative;
  z-index: 0;
}

/* Footer */

#footer {
  background-color: var(--opposite-contrast);
  color: var(--footer-color);
  flex-shrink: 0;
  padding: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.5);
}

#footer .m-search-box-wrapper {
  display: flex;
  width: 100%;
  padding: 10px;
  background-color: var(--banner-bg-color);
  border-bottom: 1px solid var(--light-glare);
  display: none;
}

#footer .m-search-box-wrapper.show {
  display: flex;
}

#footer #m-search-box input{
  font-size: 1.6rem;
}

#footer #m-search-box{
  width: 100%;
  margin-right: 10px;
}

/* Layout definition */

#one-col-layout {

  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex-grow: 1;
  min-height: 1px;  /* apparently this is needed to fix FireFox */
}

#one-col-layout > * {
  flex-shrink: 0;
}

/* SVG icons */

svg.icon-img path {
  /* Default to same fill as adjacent text */
  fill: currentColor;
}

svg.icon-img {
  /* Default to same size as adjacent text */
  width: 1em;
  height: 1em;
  display: block;
}

/* custom accordion style */

.nc-accordion.nc-accordion--secondary {
  padding: 0 5px;
  background-color: transparent;
  border: none;
  font-size: 1em;
}

.nc-accordion.nc-accordion--secondary .nc-collapsible-container {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.nc-accordion.nc-accordion--secondary.expanded .nc-collapsible-container {
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.nc-accordion.nc-accordion--secondary > .nc-button {
  --nc-button-bgColor: rgba(255, 255, 255, 0.1);
  --nc-button-bgHover: rgba(255, 255, 255, 0.08);
  width: auto;
  font-size: 0.8rem;
  padding: 0 0.5em;
}

.nc-accordion.nc-accordion--secondary > .nc-button .nc-button__inner-container {
  padding-right: 3em;
}

/* TODO: refine this then migrate it to Clinic Common */

.pulsing {
  animation: pulse 0.8s infinite linear;
}

@keyframes pulse {
  0% {
    opacity: 0.5;
  }
  80% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.5;
  }
}
</style>
      
    </head>
    <body class="">
      
  <div class="nc-header">
    <a
      class="nc-header__logo"
      href="https://clinicjs.org/flame/"
      title="Clinic Flame on Clinicjs.org"
      target="_blank"
      rel="noopener noreferrer"
    >
      <svg width="40" height="44" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1.24486 14.4062L1.24502 14.4035C1.33108 13.0069 2.26629 11.5371 3.71984 10.603C6.71173 8.76331 9.6825 6.8845 12.5664 5.06066C14.4597 3.8633 16.3155 2.68962 18.1152 1.56626L18.12 1.56323C19.3081 0.81226 20.6919 0.81226 21.88 1.56324L21.8848 1.56625C23.8055 2.76512 25.7896 4.01704 27.8145 5.29466C30.5807 7.03997 33.4228 8.83326 36.2831 10.6048C37.7269 11.5114 38.6685 13.0001 38.755 14.4035L38.7551 14.4062C39.0816 19.4836 39.0816 24.5164 38.7551 29.5938L38.755 29.5965C38.6682 31.0055 37.7436 32.4904 36.2872 33.3927C33.2929 35.2338 30.3196 37.1142 27.4334 38.9395C25.5402 40.1368 23.6844 41.3104 21.8848 42.4338L21.8848 42.4337L21.88 42.4368C20.6919 43.1877 19.3081 43.1877 18.12 42.4368L18.12 42.4368L18.1152 42.4338C16.3156 41.3104 14.4598 40.1368 12.5666 38.9395C9.68134 37.1148 6.70906 35.235 3.71566 33.3944C2.27261 32.4878 1.33147 30.9995 1.24502 29.5965L1.24485 29.5938C0.918382 24.5164 0.918382 19.4836 1.24486 14.4062Z" stroke="#FFAA2B" stroke-width="2"/>
<path d="M10.846 18.5314C11.3983 18.5314 11.846 18.0837 11.846 17.5314C11.846 16.9791 11.3983 16.5314 10.846 16.5314L10.846 18.5314ZM8.13416 16.5314C7.58187 16.5314 7.13416 16.9791 7.13416 17.5314C7.13416 18.0837 7.58187 18.5314 8.13416 18.5314L8.13416 16.5314ZM10.846 16.5314L8.13416 16.5314L8.13416 18.5314L10.846 18.5314L10.846 16.5314Z" fill="#FFAA2B"/>
<path d="M16.2697 22.6564C16.822 22.6564 17.2697 22.2087 17.2697 21.6564C17.2697 21.1041 16.822 20.6564 16.2697 20.6564L16.2697 22.6564ZM8.13416 20.6564C7.58187 20.6564 7.13416 21.1041 7.13416 21.6564C7.13416 22.2087 7.58187 22.6564 8.13416 22.6564L8.13416 20.6564ZM16.2697 20.6564L8.13416 20.6564L8.13416 22.6564L16.2697 22.6564L16.2697 20.6564Z" fill="#FFAA2B"/>
<path d="M19.6596 26.7814C20.2119 26.7814 20.6596 26.3337 20.6596 25.7814C20.6596 25.2291 20.2119 24.7814 19.6596 24.7814L19.6596 26.7814ZM8.13416 24.7814C7.58187 24.7814 7.13416 25.2291 7.13416 25.7814C7.13416 26.3337 7.58187 26.7814 8.13416 26.7814L8.13416 24.7814ZM19.6596 24.7814L8.13416 24.7814L8.13416 26.7814L19.6596 26.7814L19.6596 24.7814Z" fill="#FFAA2B"/>
<path d="M31.185 30.9064C31.7373 30.9064 32.185 30.4587 32.185 29.9064C32.185 29.3541 31.7373 28.9064 31.185 28.9064L31.185 30.9064ZM8.13416 28.9064C7.58187 28.9064 7.13416 29.3541 7.13416 29.9064C7.13416 30.4587 7.58187 30.9064 8.13416 30.9064L8.13416 28.9064ZM31.185 28.9064L8.13416 28.9064L8.13416 30.9064L31.185 30.9064L31.185 28.9064Z" fill="#FFAA2B"/>
<path d="M26.4388 14.4063C26.9911 14.4063 27.4388 13.9586 27.4388 13.4063C27.4388 12.854 26.9911 12.4063 26.4388 12.4063L26.4388 14.4063ZM25.0829 12.4063C24.5306 12.4063 24.0829 12.854 24.0829 13.4063C24.0829 13.9586 24.5306 14.4063 25.0829 14.4063L25.0829 12.4063ZM26.4388 12.4063L25.0829 12.4063L25.0829 14.4063L26.4388 14.4063L26.4388 12.4063Z" fill="#FFAA2B"/>
<path d="M29.1508 18.5313C29.7031 18.5313 30.1508 18.0836 30.1508 17.5313C30.1508 16.979 29.7031 16.5313 29.1508 16.5313L29.1508 18.5313ZM25.083 16.5313C24.5307 16.5313 24.083 16.979 24.083 17.5313C24.083 18.0836 24.5307 18.5313 25.083 18.5313L25.083 16.5313ZM29.1508 16.5313L25.083 16.5313L25.083 18.5313L29.1508 18.5313L29.1508 16.5313Z" fill="#FFAA2B"/>
<path d="M29.1506 22.6563C29.7028 22.6563 30.1506 22.2086 30.1506 21.6563C30.1506 21.104 29.7028 20.6563 29.1506 20.6563L29.1506 22.6563ZM25.0828 20.6563C24.5305 20.6563 24.0828 21.104 24.0828 21.6563C24.0828 22.2086 24.5305 22.6563 25.0828 22.6563L25.0828 20.6563ZM29.1506 20.6563L25.0828 20.6563L25.0828 22.6563L29.1506 22.6563L29.1506 20.6563Z" fill="#FFAA2B"/>
<path d="M31.1845 26.7813C31.7367 26.7813 32.1845 26.3336 32.1845 25.7813C32.1845 25.229 31.7367 24.7813 31.1845 24.7813L31.1845 26.7813ZM25.0828 24.7813C24.5305 24.7813 24.0828 25.229 24.0828 25.7813C24.0828 26.3336 24.5305 26.7813 25.0828 26.7813L25.0828 24.7813ZM31.1845 24.7813L25.0828 24.7813L25.0828 26.7813L31.1845 26.7813L31.1845 24.7813Z" fill="#FFAA2B"/>
</svg>

      <span>
        <div class="nc-header__logo-text">Flame</div>
        <div class="nc-header__tool-version">v13.0.0</div>
      </span>
      
      <span>
        <div class="nc-header__elapsed-time">
          Elapsed Time: <strong>0s</strong>
        </div>
      </span>
    
    </a>
    <div class="nc-header__inner"></div>
  </div>

      <main></main>
      
      <script>require=(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const minusIcon = require('../icons/minus')
const button = require('./button.js')
const container = require('./collapsible-container.js')
const { toHtml } = require('./helpers.js')

module.exports = ({ label, classNames = [], disabled = false, onClick, title = '', content = '', isExpanded = false }) => {
  let expanded = false

  const accordion = toHtml(`<div class="${['nc-accordion', ...classNames].join(' ')}"></div>`)

  const btn = button({
    label,
    rightIcon: minusIcon,
    onClick: () => {
      toggleAccordion()
      onClick && onClick(expanded)
    }
  })

  // injecting another minus-svg to build the animated plus symbol
  const verticalLine = toHtml(minusIcon)
  verticalLine.classList.remove('minus-svg')
  verticalLine.classList.add('vertical-line')
  btn.querySelector('.nc-button__inner-container').appendChild(verticalLine)

  accordion.appendChild(btn)

  const collapsibleContainer = container({ content })
  accordion.appendChild(collapsibleContainer)

  if (isExpanded) {
    toggleAccordion(true)
  }

  accordion.classList.toggle('show-expand-icon', !isExpanded)

  function toggleAccordion (isExpanded = !expanded) {
    expanded = isExpanded
    accordion.classList.toggle('show-expand-icon', !expanded)

    collapsibleContainer.toggle(expanded)
    accordion.classList.toggle('expanded', expanded)
  }

  accordion.toggle = toggleAccordion

  return accordion
}

},{"../icons/minus":27,"./button.js":2,"./collapsible-container.js":4,"./helpers.js":8}],2:[function(require,module,exports){
module.exports = (options = {}) => {
  const button = document.createElement('button')
  const btnOptions = options

  if (btnOptions.onClick) {
    button.addEventListener('click', btnOptions.onClick)
  }

  button.update = (options) => {
    _render(Object.assign({}, btnOptions, options))
  }

  function _render ({ label, classNames = [], leftIcon = '', rightIcon = '', disabled = false, onClick, title = '' }) {
    button.disabled = disabled
    button.title = title
    button.className = ['nc-button', ...(options.classNames || [])].join(' ')

    button.innerHTML = `
      <span class='nc-button__inner-container'>
      ${leftIcon}
      ${label ? `<span class="nc-button__label">${label}</span>` : ''}
      ${rightIcon}
      </span>
      `
  }

  button.update(options)
  return button
}

},{}],3:[function(require,module,exports){
const checkboxCheckedIcon = require('../icons/checkbox-checked')
const checkboxUncheckedIcon = require('../icons/checkbox-unchecked')
const checkboxIndeterminedIcon = require('../icons/checkbox-indetermined')

module.exports = ({ leftLabel, rightLabel, classNames = [], checked = false, disabled = false, indeterminate = false, onChange } = {}) => {
  const wrappingLabel = document.createElement('label')
  wrappingLabel.classList.add('nc-checkbox', ...classNames)
  /* eslint-disable multiline-ternary */
  wrappingLabel.innerHTML = `
        <input type="checkbox"
          ${disabled ? 'disabled' : ''}
          ${checked ? 'checked' : ''}
        >
        ${leftLabel ? `
        <span class="copy-wrapper">
          <span class="checkbox-copy-label">${leftLabel}</span>
        </span>` : ''}

        <span class="icon-wrapper">
          ${checkboxCheckedIcon}
          ${checkboxUncheckedIcon}
          ${checkboxIndeterminedIcon}
        </span>
        ${rightLabel ? `
        <span class="copy-wrapper">
          <span class="checkbox-copy-label">${rightLabel}</span>
        </span>` : ''}
    `
  /* eslint-enable multiline-ternary */
  const input = wrappingLabel.querySelector('input')
  input.indeterminate = indeterminate

  if (onChange) {
    input.addEventListener('change', onChange)
  }
  return wrappingLabel
}

},{"../icons/checkbox-checked":16,"../icons/checkbox-indetermined":17,"../icons/checkbox-unchecked":18}],4:[function(require,module,exports){
const { toHtml } = require('./helpers.js')

module.exports = ({ content = '', classNames = [], isExpanded = false }) => {
  let expanded = false

  const contentWrapper = toHtml(`<div class="${['nc-collapsible-container', ...classNames].join(' ')}"></div>`)

  const innerContentWrapper = toHtml('<div class="nc-collapsible-container__inner-content-wrapper"></div>')
  innerContentWrapper.appendChild(toHtml(content))
  contentWrapper.appendChild(innerContentWrapper)

  contentWrapper.addEventListener('transitionend', onTransitionEnd)

  function onTransitionEnd () {
    if (!expanded) {
      contentWrapper.classList.remove('expanded')
    } else {
      contentWrapper.style.cssText = 'height:auto;'
    }
  }
  function toggle (isExpanded = !expanded) {
    expanded = isExpanded

    if (expanded) {
      contentWrapper.classList.add('expanded')
      contentWrapper.style.cssText = `height:${contentWrapper.scrollHeight}px;`
    } else {
      contentWrapper.style.cssText = `height:${contentWrapper.scrollHeight}px;`
      const justToForceRedraw = contentWrapper.offsetWidth // eslint-disable-line no-unused-vars
      contentWrapper.style.cssText = 'height:0px;'
    }

    // if the element is not visible when expanded then the transitionend event doesn't get triggered
    if (contentWrapper.offsetParent === null) {
      onTransitionEnd()
    }
  }

  contentWrapper.toggle = toggle

  if (isExpanded) {
    toggle(true)
    contentWrapper.style.cssText = 'height:auto;'
  }

  return contentWrapper
}

},{"./helpers.js":8}],5:[function(require,module,exports){
const { toHtml } = require('./helpers.js')
const debounce = require('lodash.debounce')

class Overlay {
  constructor () {
    this.overlayEl = document.createElement('div')

    this.overlayInnerEl = document.createElement('div')
    this.overlayInnerEl.classList.add('nc-context-overlay-inner')

    this.overlayEl.appendChild(this.overlayInnerEl)

    this.overlayArrow = document.createElement('div')
    this.overlayArrow.classList.add('nc-context-overlay-arrow')
    this.overlayEl.appendChild(this.overlayArrow)

    this.options = null
    this.position = null
    this.isDisplayed = false

    this._debRender = debounce(this._render, 200).bind(this)
  }

  _render () {
    this.updatePosition()
    this.updateContent()
  }

  show (options) {
    if (!this.isDisplayed) {
      document.body.appendChild(this.overlayEl)
    }
    this.options = options

    this.updatePosition()
    if (options.msg) {
      this.updateContent()
    }

    if (!this.isDisplayed) {
      window.addEventListener('resize', this._debRender)
      window.addEventListener('scroll', this._debRender)
    }

    this.isDisplayed = true
  }

  hide () {
    this.isDisplayed = false
    document.body.removeChild(this.overlayEl)
    this.overlayInnerEl.innerHTML = ''
    this.overlayEl.style.cssText = ''
    this.overlayInnerEl.style.cssText = ''
    this.overlayEl.classList.remove('show')

    window.removeEventListener('resize', this._debRender)
    window.removeEventListener('scroll', this._debRender)
  }

  getPosition () { return this.position }

  updatePosition (options) {
    Object.assign(this.options, options)
    this.overlayEl.classList.toggle('showArrow', this.options.showArrow)
    this.overlayEl.className = ['nc-context-overlay', 'show', ...this.options.classNames || []].join(' ')

    const { ttLeft, ttTop } = this._getTargetPosition(this.options)
    this.overlayEl.style.cssText = `left:${ttLeft}px; top:${ttTop}px;`
  }

  updateContent (options) {
    Object.assign(this.options, options)

    this.overlayEl.classList.toggle('showArrow', this.options.showArrow)
    this.overlayEl.className = ['nc-context-overlay', 'show', ...this.options.classNames || []].join(' ')

    const { ttLeft, ttTop, target, verticalAlign } = this._getTargetPosition(this.options)

    const oldWidth = this.overlayInnerEl.style.width
    this.overlayInnerEl.style.width = 'auto'

    const msgHtmlNode = this.options.msg && toHtml(this.options.msg)

    if (msgHtmlNode) {
      this.overlayInnerEl.innerHTML = ''
      this.overlayInnerEl.appendChild(msgHtmlNode)
    }

    // calculating the actual overlay width
    const ttWidth = msgHtmlNode ? msgHtmlNode.offsetWidth : 200
    const ttHeight = msgHtmlNode ? msgHtmlNode.offsetHeight : 100

    this.overlayInnerEl.style.width = oldWidth

    const justToForceRedraw = this.overlayInnerEl.offsetWidth // eslint-disable-line no-unused-vars

    // positioning the overlay content
    // making sure that it doesn't go over the element right edge
    const alignRight = ttLeft + ttWidth - (target.x + target.width)
    let deltaX = Math.max(alignRight, ttWidth / 2)

    // then checking it doesn't overflow the element left edge
    deltaX = (ttLeft - deltaX < target.x) ? ttLeft - target.x : deltaX

    const {
      outerRect = document.body.getBoundingClientRect()
    } = this.options

    // then checking the outer element right edge
    if (outerRect) {
      deltaX = (ttLeft - deltaX + ttWidth > outerRect.right) ? alignRight : deltaX
    }

    // in the edge case where the content overflows the vieport to the left
    if (deltaX > ttLeft) {
      deltaX = ttLeft
    }

    const maxWidth = outerRect ? outerRect.width + 'px' : 'auto'
    let top = verticalAlign === 'top' ? -ttHeight : 0

    if (verticalAlign === 'center') {
      top = -ttHeight / 2
    }

    // if the content overflows the paget top then we push the content downwards
    if (ttTop + top < 0) {
      // the arrow points to a no longer valid position, let's hide it
      this.overlayEl.classList.remove('arrowBottom', 'arrowTop')
      top = 5 - ttTop
    }

    this.overlayInnerEl.style.cssText = `left:-${deltaX}px; max-width:${maxWidth}; top:${top}px; height:${ttHeight}px; width:${ttWidth}px`
  }

  _getTargetPosition (options) {
    let {
      targetElement,
      targetRect,
      offset,
      pointerCoords,
      verticalAlign = 'bottom'
    } = this.options

    let target = targetRect || (targetElement && targetElement.getBoundingClientRect())

    // if there's no target then center align the content
    if (!target) {
      verticalAlign = 'center'
      target = {
        left: 0,
        top: document.documentElement.clientHeight / 2,
        width: document.documentElement.clientWidth,
        height: 0
      }
    }

    let {
      left: x,
      top: y,
      width,
      height
    } = target

    if (verticalAlign !== 'center' && y + height > window.innerHeight / 2) {
      verticalAlign = 'top'
    }

    const arrowHeight = verticalAlign !== 'center' && this.options.showArrow ? 10 : 0

    if (offset) {
      x += offset.x || 0
      y += offset.y || 0
      width += offset.width || 0
      height += offset.height || 0
    }

    let ttLeft = x + width / 2

    // if the element is in the lower half of the screen than align the overlay to the top side
    const ttTop = y + (verticalAlign === 'bottom' ? height + arrowHeight : -arrowHeight)

    this.overlayEl.classList.toggle('arrowTop', verticalAlign === 'bottom')
    this.overlayEl.classList.toggle('arrowBottom', verticalAlign === 'top')

    if (pointerCoords) {
      // centering on the mouse pointer horizontally
      ttLeft = x + pointerCoords.x
    }

    return {
      ttLeft,
      ttTop,
      verticalAlign,
      target: {
        x,
        y,
        width,
        height
      }
    }
  }
}

module.exports = Overlay

},{"./helpers.js":8,"lodash.debounce":81}],6:[function(require,module,exports){
const caretRight = require('../icons/caret-right')
const button = require('./button.js')
const { toHtml } = require('./helpers.js')

let currentlyExpandedDropDown = null

// Closes when the user clicks outside the dropdown content.
document.body.addEventListener('click', (event) => {
  if (event.target.closest('.nc-dropdown-content-wrapper') !== currentlyExpandedDropDown) closeCurrentlyExpandedDropDown()
})

function closeCurrentlyExpandedDropDown () {
  currentlyExpandedDropDown && currentlyExpandedDropDown.closest('.nc-dropdown').close()
}

module.exports = ({ label, classNames = [], disabled = false, expandAbove = false, content } = {}) => {
  let ddContent = content
  const wrapper = document.createElement('div')
  wrapper.classList.add('nc-dropdown', ...classNames)
  wrapper.classList.toggle('direction-up', expandAbove)

  const labelWrapper = document.createElement('div')
  labelWrapper.classList.add('label-wrapper')

  wrapper.appendChild(labelWrapper)

  wrapper.appendChild(button({
    disabled,
    leftIcon: caretRight,
    onClick: e => {
      e.stopPropagation()

      if (wrapper.classList.contains('expanded')) {
        wrapper.close()
      } else {
        wrapper.open()
      }
    }
  }))

  wrapper.update = ({ label, content }) => {
    if (label) {
      const labelHtml = toHtml(label, 'label')
      labelWrapper.innerHTML = ''
      labelWrapper.appendChild(labelHtml)
    }

    if (content) {
      ddContent = content
      updateContent()
    }
  }

  wrapper.addEventListener('animationend', () => {
    wrapper.classList.toggle('contracted', false)
  })

  const contentWrapper = document.createElement('div')
  contentWrapper.classList.add('nc-dropdown-content-wrapper')
  contentWrapper.classList.add('scroll-container')

  wrapper.close = () => {
    wrapper.classList.remove('expanded')
    wrapper.classList.toggle('contracted', true)
    currentlyExpandedDropDown = null
  }
  wrapper.open = () => {
    closeCurrentlyExpandedDropDown()
    updateContent()
    wrapper.classList.remove('contracted')
    wrapper.classList.add('expanded')

    currentlyExpandedDropDown = contentWrapper
  }

  function updateContent () {
    contentWrapper.innerHTML = ''
    if (ddContent) {
      contentWrapper.appendChild(toHtml(ddContent))
    }
  }

  wrapper.appendChild(contentWrapper)
  wrapper.update({ label })
  return wrapper
}

},{"../icons/caret-right":14,"./button.js":2,"./helpers.js":8}],7:[function(require,module,exports){
const debounce = require('lodash.debounce')

const wrapper = document.createElement('div')
wrapper.classList.add('nc-element-highlighter')

wrapper.innerHTML = `
  <div class="nc-element-highlighter-container">
    <div class="nc-element-highlighter-panel nc-element-highlighter-top"></div>
    <div class="nc-element-highlighter-panel nc-element-highlighter-right"></div>
    <div class="nc-element-highlighter-panel nc-element-highlighter-bottom"></div>
    <div class="nc-element-highlighter-panel nc-element-highlighter-left"></div>
  </div>
  <div class="nc-element-highlighter-border"></div>
`
const backdropContainer = wrapper.querySelector('.nc-element-highlighter-container')
const backdropTop = wrapper.querySelector('.nc-element-highlighter-top')
const backdropRight = wrapper.querySelector('.nc-element-highlighter-right')
const backdropBottom = wrapper.querySelector('.nc-element-highlighter-bottom')
const backdropLeft = wrapper.querySelector('.nc-element-highlighter-left')
const backdropBorder = wrapper.querySelector('.nc-element-highlighter-border')

let elOptions = null

function render () {
  if (!elOptions) {
    elementHighLighter.hide()
    return
  }
  const { element, padding = 5, showBorder = true } = elOptions

  wrapper.classList.toggle('show-border', showBorder && element !== null)
  const pos = element
    ? element.getBoundingClientRect()
    : {
        top: document.documentElement.clientHeight / 2,
        left: document.documentElement.clientWidth / 2,
        width: 0,
        height: 0
      }

  backdropContainer.style.cssText = 'opacity:0.6;'
  backdropTop.style.cssText = `transform:translate3d(${pos.left - padding}px, calc(-100vh + ${pos.top - padding}px), 0)`
  backdropRight.style.cssText = `transform:translate3d(${pos.left + pos.width + padding}px, ${pos.top - padding}px, 0)`
  backdropBottom.style.cssText = `transform:translate3d(calc(-100vw + ${pos.left + pos.width + padding}px), ${pos.top + pos.height + padding}px, 0)`
  backdropLeft.style.cssText = `transform:translate3d(calc(-100vw + ${pos.left - padding}px), calc(-100vh + ${pos.top + pos.height + padding}px), 0)`

  if (showBorder) {
    backdropBorder.style.cssText = `left:${pos.left - padding}px;top:${pos.top - padding}px;width:${pos.width + padding * 2}px;height:${pos.height + padding * 2}px;`
  }
}

const debRender = debounce(render, 200)

const elementHighLighter = {
  show: options => {
    document.body.appendChild(wrapper)
    wrapper.classList.add('show')
    elOptions = options
    render()

    window.addEventListener('resize', debRender)
    window.addEventListener('scroll', debRender)
  },

  hide: () => {
    document.body.removeChild(wrapper)
    backdropContainer.style.cssText = 'opacity:0.6;'
    wrapper.classList.remove('show')

    window.removeEventListener('resize', debRender)
    window.removeEventListener('scroll', debRender)
  }
}

module.exports = elementHighLighter

},{"lodash.debounce":81}],8:[function(require,module,exports){
const helpers = {
  toHtml: (content, defaultClass) => {
    switch (typeof content) {
      case 'string':
        if (content.trim().indexOf('<') === 0) {
          const parser = new window.DOMParser()
          return parser.parseFromString(content, 'text/html').body.firstElementChild
          // returns a HTMLDocument, which also is a Document.
        } else {
          const node = document.createElement('span')
          node.className = defaultClass || ''
          node.textContent = content
          return node
        }

      case 'function':
        return helpers.toHtml(content())

      case 'object':
        if (content.nodeType === 1) {
        // it is an HTMLElement
          if (content.classList.length === 0) {
            content.className = defaultClass || ''
          }
          return content
        }
    }

    throw new TypeError('The provided content is not a String, a function or an HTMLElement ')
  }
}

module.exports = helpers

},{}],9:[function(require,module,exports){
const button = require('./button.js')
const checkbox = require('./checkbox.js')
const dropdown = require('./drop-down.js')
const helpers = require('./helpers.js')
const ContextOverlay = require('./helpers.js')
const Walkthrough = require('./walkthrough-player.js')
const link = require('./link.js')
const walkthroughButton = require('./walkthrough-button.js')
const accordion = require('./accordion.js')
const collapsibleContainer = require('./collapsible-container.js')

module.exports = {
  button,
  checkbox,
  dropdown,
  helpers,
  ContextOverlay,
  Walkthrough,
  link,
  walkthroughButton,
  accordion,
  collapsibleContainer
}

},{"./accordion.js":1,"./button.js":2,"./checkbox.js":3,"./collapsible-container.js":4,"./drop-down.js":6,"./helpers.js":8,"./link.js":10,"./walkthrough-button.js":11,"./walkthrough-player.js":12}],10:[function(require,module,exports){
module.exports = ({ label, classNames = [], leftIcon = '', rightIcon = '', href, title = '', target = '' } = {}) => {
  const link = document.createElement('a')
  link.classList.add('nc-link', ...classNames)
  link.setAttribute('href', href)
  link.setAttribute('target', target)

  if (title) link.title = title

  link.innerHTML = `
    ${leftIcon}
    ${label ? `<span class="label">${label}</span>` : ''}
    ${rightIcon}
    `
  return link
}

},{}],11:[function(require,module,exports){
const Wt = require('./walkthrough-player')
const button = require('./button.js')
const helpIcon = require('../icons/circle-question')

module.exports = ({ steps, onProgress, label = 'How does this work', title }) => {
  const wt = new Wt({
    steps,
    onProgress,
    showBackdrop: true,
    showControls: true
  })

  return {
    button: button({
      label,
      rightIcon: helpIcon,
      title,
      classNames: ['walkthrough-button'],
      onClick: () => wt.start()
    }),
    WtPlayer: wt
  }
}

},{"../icons/circle-question":23,"./button.js":2,"./walkthrough-player":12}],12:[function(require,module,exports){
const button = require('./button.js')
const helpers = require('./helpers.js')
const ContextOverlay = require('./context-overlay.js')
const elHighlighter = require('./element-highlighter.js')

const chevronRight = require('../icons/chevron-right')
const chevronLeft = require('../icons/chevron-left')
const close = require('../icons/close')

const WtOverlay = new ContextOverlay()

class WalkthroughPlayer {
  constructor ({ steps = [], showBackdrop = false, showControls = true, onProgress }) {
    this.steps = steps
    this.showBackdrop = showBackdrop
    this.onProgress = onProgress
    this.currentStepIndex = undefined

    this.visible = false

    this.distanceFromElement = 5

    this.wrapper = document.createElement('div')
    this.wrapper.classList.add('nc-walkthrough-wrapper')

    this.content = document.createElement('div')
    this.content.classList.add('nc-walkthrough-content')

    this.wrapper.appendChild(this.content)

    this.wrapper.addEventListener('keyup', (event) => {
      if (event.code === 'Escape') {
        this.end()
      }
    })

    if (showControls) {
      this.wrapper.appendChild(button({
        classNames: ['closeBtn'],
        leftIcon: close,
        onClick: () => this.end()
      }))
      this.controls = document.createElement('div')
      this.controls.classList.add('nc-walkthrough-controls')

      this.prevBtn = button({
        leftIcon: chevronLeft,
        onClick: e => this.prev()
      })
      this.controls.appendChild(this.prevBtn)

      this.stepsWrapper = document.createElement('div')
      this.stepsWrapper.classList.add('nc-walkthrough-controls-steps')

      this.steps.forEach(s => {
        this.stepsWrapper.appendChild(helpers.toHtml('<span class="step"/>'))
      })
      this.controls.appendChild(this.stepsWrapper)

      this.nextBtn = button({
        classNames: ['nextBtn'],
        rightIcon: chevronRight,
        label: 'Next',
        onClick: e => this.next()
      })
      this.controls.appendChild(this.nextBtn)

      this.doneBtn = button({
        classNames: ['doneBtn'],
        label: 'Done!',
        onClick: e => this.end()
      })
      this.controls.appendChild(this.doneBtn)

      this.wrapper.appendChild(this.controls)
    }
  }

  start () {
    this.currentStepIndex = 0
    this._render()
  }

  next () {
    this.currentStepIndex++
    this._render()
  }

  prev () {
    this.currentStepIndex--
    this._render()
  }

  skipTo (index) {
    this.currentStepIndex = index
    this._render()
  }

  end () {
    this.visible = false
    WtOverlay.hide()
    this.currentStepIndex = undefined
    this._hideBackDrop()
    this.onProgress && this.onProgress(this.currentStepIndex)
  }

  _showBackDrop () {
    const step = this.steps[this.currentStepIndex]
    elHighlighter.show({
      element: document.querySelector(step.attachTo),
      padding: this.distanceFromElement - 2
    })
  }

  _hideBackDrop () {
    elHighlighter.hide()
  }

  _render () {
    this.currentStepIndex = Math.min(this.currentStepIndex, this.steps.length - 1)
    this.currentStepIndex = Math.max(this.currentStepIndex, 0)

    if (this.currentStepIndex < 0) this.currentStepIndex = 0

    const isDone = this.currentStepIndex === this.steps.length - 1

    this.wrapper.classList.toggle('done', isDone)

    if (this.currentStepIndex === 0) {
      this.prevBtn.style.visible = 'hidden'
    }

    if (this.showControls) {
      this.prev.setAttribute('disabled', this.currentStepIndex <= 0 ? true : null)
    }

    this.onProgress && this.onProgress(this.currentStepIndex)

    const step = this.steps[this.currentStepIndex]

    WtOverlay.show({
      classNames: ['wt-container', this.visible ? 'zoom-out' : ''],
      offset: { y: -this.distanceFromElement, height: this.distanceFromElement * 2 },
      targetElement: document.querySelector(step.attachTo),
      showArrow: true
    })

    setTimeout(() => {
      this.content.innerHTML = ''
      this.content.appendChild(helpers.toHtml(step.msg))
      this.prevBtn.style.visibility = this.currentStepIndex === 0 ? 'hidden' : 'visible'

      WtOverlay.updateContent({
        msg: this.wrapper,
        classNames: ['wt-container', 'zoom-in', `wt-step-${this.currentStepIndex}`]
      })
      if (isDone) {
        this.doneBtn.focus()
      } else {
        this.nextBtn.focus()
      }
    }, 300)

    Array.from(this.stepsWrapper.children).forEach((c, i) => {
      c.classList.toggle('current', i === this.currentStepIndex)
    })

    if (this.showBackdrop) this._showBackDrop()

    this.visible = true
  }
}

module.exports = WalkthroughPlayer

},{"../icons/chevron-left":20,"../icons/chevron-right":22,"../icons/close":24,"./button.js":2,"./context-overlay.js":5,"./element-highlighter.js":7,"./helpers.js":8}],13:[function(require,module,exports){
'use strict'

const WebFont = require('webfontloader')

const styleSheetUrl = 'https://clinicjs.org/assets/css/fonts.css'
const allFonts = [
  'Archia:n4',
  'Archia:n7',
  'Campton:n7',
  'Space Mono:n4',
  'Space Mono:n7'
]

const init = (opts = {}) => {
  const {
    onLoad,
    onTimeout,
    onLoadAfterTimeout,
    timeout = 2000,
    criticalFonts = allFonts
  } = opts

  // Flag loaded state
  let isLoading = true
  // Keep track of loaded fonts
  const loadedFonts = []

  // Ensure timeout is triggered if all fonts fail to load
  const timeoutId = setTimeout(() => {
    isLoading = false

    if (onTimeout) {
      onTimeout()
    }

    maybeLoadAfterTimeout()
  }, timeout)

  // Check loaded fonts array against given critical fonts
  const maybeLoadAfterTimeout = () => {
    // If loaded already, exit
    if (isLoading) {
      return
    }

    // Create array of difference between loaded fonts and critical fonts
    const loadedCriticalFonts = loadedFonts.filter(
      item => criticalFonts.indexOf(item) > -1
    )

    // Call onLoadAfterTimeout if all critical fonts have loaded
    if (criticalFonts.length === loadedCriticalFonts.length && onLoadAfterTimeout) {
      isLoading = false

      onLoadAfterTimeout()
    }
  }

  // On all font load
  const active = () => {
    isLoading = false
    clearTimeout(timeoutId)

    if (onLoad) {
      onLoad()
    }
  }

  // On individual font load
  const fontactive = (font, variant) => {
    loadedFonts.push(`${font}:${variant}`)
    maybeLoadAfterTimeout()
  }

  // Noop
  const destroy = () => null

  const webFontOpts = Object.assign({
    custom: {
      families: allFonts,
      urls: [styleSheetUrl]
    },
    active,
    fontactive
  }, opts)

  // Kick things off
  WebFont.load(webFontOpts)

  return {
    destroy
  }
}

module.exports = init

},{"webfontloader":86}],14:[function(require,module,exports){
module.exports = '<svg class="icon-img caret-right-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 15.6221V8.37787C10 8.16918 10.1546 8 10.3453 8C10.4368 8 10.5246 8.03981 10.5894 8.11067L13.8989 11.7328C14.0337 11.8804 14.0337 12.1196 13.8989 12.2672L10.5894 15.8893C10.4546 16.0369 10.236 16.0369 10.1011 15.8893C10.0364 15.8185 10 15.7224 10 15.6221Z"/></svg>'

},{}],15:[function(require,module,exports){
module.exports = '<svg class="icon-img caret-up-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.6222 14H8.3779C8.16921 14 8.00003 13.8455 8.00003 13.6548C8.00003 13.5632 8.03984 13.4754 8.11071 13.4107L11.7328 10.1012C11.8804 9.96632 12.1197 9.96632 12.2672 10.1012L15.8894 13.4107C16.0369 13.5455 16.0369 13.7641 15.8894 13.8989C15.8185 13.9637 15.7224 14 15.6222 14Z"/></svg>'

},{}],16:[function(require,module,exports){
module.exports = '<svg class="icon-img checkbox-checked-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M6 5C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V11C19 10.4477 19.4477 10 20 10C20.5523 10 21 10.4477 21 11V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34315 4.34315 3 6 3H16C16.5523 3 17 3.44772 17 4C17 4.55228 16.5523 5 16 5H6ZM21.6897 3.77586C22.0896 4.15675 22.105 4.78972 21.7241 5.18966L11.7241 15.6897C11.5383 15.8848 11.2816 15.9966 11.0122 15.9999C10.7428 16.0032 10.4834 15.8976 10.2929 15.7071L7.79289 13.2071C7.40237 12.8166 7.40237 12.1834 7.79289 11.7929C8.18342 11.4024 8.81658 11.4024 9.20711 11.7929L10.9825 13.5683L20.2759 3.81034C20.6567 3.41041 21.2897 3.39498 21.6897 3.77586Z"/></svg>'

},{}],17:[function(require,module,exports){
module.exports = '<svg class="icon-img checkbox-indetermined-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6ZM6 5C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5H6ZM7 12C7 11.4477 7.44772 11 8 11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H8C7.44772 13 7 12.5523 7 12Z"/></svg>'

},{}],18:[function(require,module,exports){
module.exports = '<svg class="icon-img checkbox-unchecked-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 6C3 4.34315 4.34315 3 6 3H18C19.6569 3 21 4.34315 21 6V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6ZM6 5C5.44772 5 5 5.44772 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V6C19 5.44772 18.5523 5 18 5H6Z"/></svg>'

},{}],19:[function(require,module,exports){
module.exports = '<svg class="icon-img chevron-left-first-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 5C8.55228 5 9 5.44772 9 6V18C9 18.5523 8.55228 19 8 19C7.44772 19 7 18.5523 7 18V6C7 5.44772 7.44772 5 8 5ZM17.2929 5.29289C17.6834 4.90237 18.3166 4.90237 18.7071 5.29289C19.0976 5.68342 19.0976 6.31658 18.7071 6.70711L13.4142 12L18.7071 17.2929C19.0976 17.6834 19.0976 18.3166 18.7071 18.7071C18.3166 19.0976 17.6834 19.0976 17.2929 18.7071L11.2929 12.7071C11.1054 12.5196 11 12.2652 11 12C11 11.7348 11.1054 11.4804 11.2929 11.2929L17.2929 5.29289Z"/></svg>'

},{}],20:[function(require,module,exports){
module.exports = '<svg class="icon-img chevron-left-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 5.29289C15.3166 4.90237 14.6834 4.90237 14.2929 5.29289L8.29289 11.2929C8.10536 11.4804 8 11.7348 8 12C8 12.2652 8.10536 12.5196 8.29289 12.7071L14.2929 18.7071C14.6834 19.0976 15.3166 19.0976 15.7071 18.7071C16.0976 18.3166 16.0976 17.6834 15.7071 17.2929L10.4142 12L15.7071 6.70711C16.0976 6.31658 16.0976 5.68342 15.7071 5.29289Z"/></svg>'

},{}],21:[function(require,module,exports){
module.exports = '<svg class="icon-img chevron-right-last-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M6.36469 5.29289C6.75521 4.90237 7.38838 4.90237 7.7789 5.29289L13.7789 11.2929C13.9664 11.4804 14.0718 11.7348 14.0718 12C14.0718 12.2652 13.9664 12.5196 13.7789 12.7071L7.7789 18.7071C7.38838 19.0976 6.75521 19.0976 6.36469 18.7071C5.97416 18.3166 5.97416 17.6834 6.36469 17.2929L11.6576 12L6.36469 6.70711C5.97416 6.31658 5.97416 5.68342 6.36469 5.29289ZM17 19C16.4477 19 16 18.5523 16 18V6C16 5.44772 16.4477 5 17 5C17.5523 5 18 5.44772 18 6V18C18 18.5523 17.5523 19 17 19Z"/></svg>'

},{}],22:[function(require,module,exports){
module.exports = '<svg class="icon-img chevron-right-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.36467 5.29289C8.75519 4.90237 9.38836 4.90237 9.77888 5.29289L15.7789 11.2929C15.9664 11.4804 16.0718 11.7348 16.0718 12C16.0718 12.2652 15.9664 12.5196 15.7789 12.7071L9.77888 18.7071C9.38836 19.0976 8.75519 19.0976 8.36467 18.7071C7.97415 18.3166 7.97415 17.6834 8.36467 17.2929L13.6576 12L8.36467 6.70711C7.97415 6.31658 7.97415 5.68342 8.36467 5.29289Z"/></svg>'

},{}],23:[function(require,module,exports){
module.exports = '<svg class="icon-img circle-question-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.6804 8.85214C11.2608 8.92568 10.7648 9.20628 10.3944 9.94718C10.1474 10.4412 9.54674 10.6414 9.05276 10.3944C8.55878 10.1474 8.35856 9.54672 8.60555 9.05275C9.2351 7.79364 10.2392 7.07425 11.3352 6.88216C12.397 6.69607 13.4685 7.02092 14.2241 7.68763C14.9989 8.37132 15.4543 9.4344 15.1869 10.632C14.9279 11.7917 14.035 12.8902 12.5369 13.8436C12.0709 14.1402 11.4528 14.0028 11.1563 13.5369C10.8598 13.0709 10.9972 12.4528 11.4631 12.1563C12.7149 11.3597 13.1345 10.6457 13.2349 10.1961C13.3269 9.78428 13.1885 9.44111 12.9009 9.1873C12.5939 8.9165 12.1342 8.77261 11.6804 8.85214Z"/>  <path d="M13 16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16C11 15.4477 11.4477 15 12 15C12.5523 15 13 15.4477 13 16Z"/></svg>'

},{}],24:[function(require,module,exports){
module.exports = '<svg class="icon-img close-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 4.29289C4.68342 3.90237 5.31658 3.90237 5.70711 4.29289L12 10.5858L18.2929 4.29289C18.6834 3.90237 19.3166 3.90237 19.7071 4.29289C20.0976 4.68342 20.0976 5.31658 19.7071 5.70711L13.4142 12L19.7071 18.2929C20.0976 18.6834 20.0976 19.3166 19.7071 19.7071C19.3166 20.0976 18.6834 20.0976 18.2929 19.7071L12 13.4142L5.70711 19.7071C5.31658 20.0976 4.68342 20.0976 4.29289 19.7071C3.90237 19.3166 3.90237 18.6834 4.29289 18.2929L10.5858 12L4.29289 5.70711C3.90237 5.31658 3.90237 4.68342 4.29289 4.29289Z"/></svg>'

},{}],25:[function(require,module,exports){
module.exports = '<svg class="icon-img copy-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 9C9.44772 9 9 9.44772 9 10V19C9 19.5523 9.44772 20 10 20H19C19.5523 20 20 19.5523 20 19V10C20 9.44772 19.5523 9 19 9H10ZM7 10C7 8.34315 8.34315 7 10 7H19C20.6569 7 22 8.34315 22 10V19C22 20.6569 20.6569 22 19 22H10C8.34315 22 7 20.6569 7 19V10Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M5 4C4.44772 4 4 4.44772 4 5V14C4 14.5523 4.44772 15 5 15H6V17H5C3.34315 17 2 15.6569 2 14V5C2 3.34315 3.34315 2 5 2H14C15.6569 2 17 3.34315 17 5V6H15V5C15 4.44772 14.5523 4 14 4H5Z"/></svg>'

},{}],26:[function(require,module,exports){
module.exports = '<svg class="icon-img link-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.83843 19.8776C2.38724 18.4264 2.38724 16.0736 3.83843 14.6224L8.99141 9.4694C10.5229 7.93791 12.9955 7.90456 14.5677 9.39419C14.9686 9.77404 14.9857 10.407 14.6058 10.8079C14.226 11.2088 13.5931 11.2259 13.1921 10.846C12.4065 10.1017 11.1709 10.1183 10.4056 10.8836L5.25264 16.0366C4.5825 16.7067 4.5825 17.7933 5.25264 18.4634C5.93111 19.1419 7.03407 19.1322 7.70054 18.4419L9.28063 16.8054C9.66424 16.4081 10.2973 16.397 10.6946 16.7806C11.0919 17.1642 11.103 17.7973 10.7194 18.1946L9.13934 19.8311C7.69611 21.3259 5.30765 21.3468 3.83843 19.8776Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M19.8446 3.99288C21.3015 5.44979 21.3015 7.81192 19.8446 9.26884L14.7019 14.4115C13.1705 15.9429 10.6979 15.9763 9.12566 14.4867C8.72475 14.1068 8.70767 13.4739 9.08752 13.073C9.46737 12.6721 10.1003 12.655 10.5012 13.0348C11.2869 13.7792 12.5224 13.7625 13.2877 12.9972L18.4303 7.85463C19.1062 7.17876 19.1062 6.08296 18.4303 5.40709C17.7512 4.72795 16.6489 4.73172 15.9745 5.41548L14.2119 7.20229C13.8241 7.59547 13.1909 7.5998 12.7977 7.21195C12.4046 6.82411 12.4002 6.19096 12.7881 5.79777L14.5506 4.01097C16.0045 2.53703 18.3806 2.52891 19.8446 3.99288Z"/></svg>'

},{}],27:[function(require,module,exports){
module.exports = '<svg class="icon-img minus-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M3 12C3 11.4477 3.44772 11 4 11H20C20.5523 11 21 11.4477 21 12C21 12.5523 20.5523 13 20 13H4C3.44772 13 3 12.5523 3 12Z"/></svg>'

},{}],28:[function(require,module,exports){
module.exports = '<svg class="icon-img search-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0171 3.88892C6.70704 3.88892 4.00085 6.61225 4.00085 10C4.00085 13.3878 6.70704 16.1111 10.0171 16.1111C11.6155 16.1111 13.0684 15.4792 14.1483 14.4426C15.3087 13.3288 16.0334 11.7524 16.0334 10C16.0334 6.61225 13.3272 3.88892 10.0171 3.88892ZM2.00085 10C2.00085 5.53308 5.57724 1.88892 10.0171 1.88892C14.457 1.88892 18.0334 5.53308 18.0334 10C18.0334 11.9365 17.3617 13.717 16.2406 15.1128L21.6878 20.2741C22.0887 20.654 22.1058 21.2869 21.7259 21.6878C21.346 22.0887 20.7131 22.1058 20.3122 21.7259L14.804 16.5068C13.4694 17.5133 11.8122 18.1111 10.0171 18.1111C5.57724 18.1111 2.00085 14.467 2.00085 10Z"/></svg>'

},{}],29:[function(require,module,exports){
module.exports = '<svg class="icon-img sidepanel-collapse-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M5 4C4.44772 4 4 4.44772 4 5V19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5ZM2 5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M15 21L15 3H17V21H15Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.29289 8.29283C7.68342 7.90231 8.31658 7.90231 8.70711 8.29283L11.7071 11.2928C12.0976 11.6834 12.0976 12.3165 11.7071 12.707L8.70711 15.707C8.31658 16.0976 7.68342 16.0976 7.29289 15.707C6.90237 15.3165 6.90237 14.6834 7.29289 14.2928L9.58579 11.9999L7.29289 9.70705C6.90237 9.31652 6.90237 8.68336 7.29289 8.29283Z"/></svg>'

},{}],30:[function(require,module,exports){
module.exports = '<svg class="icon-img sidepanel-expand-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M5 4C4.44772 4 4 4.44772 4 5V19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5ZM2 5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5C3.34315 22 2 20.6569 2 19V5Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M15 21L15 3H17V21H15Z"/>  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7071 8.29289C12.0976 8.68342 12.0976 9.31658 11.7071 9.70711L9.41421 12L11.7071 14.2929C12.0976 14.6834 12.0976 15.3166 11.7071 15.7071C11.3166 16.0976 10.6834 16.0976 10.2929 15.7071L7.29289 12.7071C6.90237 12.3166 6.90237 11.6834 7.29289 11.2929L10.2929 8.29289C10.6834 7.90237 11.3166 7.90237 11.7071 8.29289Z"/></svg>'

},{}],31:[function(require,module,exports){
module.exports = '<svg class="icon-img zoom-in-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0171 3.88892C6.70704 3.88892 4.00085 6.61225 4.00085 10C4.00085 13.3878 6.70704 16.1111 10.0171 16.1111C11.6155 16.1111 13.0684 15.4792 14.1483 14.4426C15.3087 13.3288 16.0334 11.7524 16.0334 10C16.0334 6.61225 13.3272 3.88892 10.0171 3.88892ZM2.00085 10C2.00085 5.53308 5.57724 1.88892 10.0171 1.88892C14.457 1.88892 18.0334 5.53308 18.0334 10C18.0334 11.9365 17.3617 13.717 16.2406 15.1128L21.6878 20.2741C22.0887 20.654 22.1058 21.2869 21.7259 21.6878C21.346 22.0887 20.7131 22.1058 20.3122 21.7259L14.804 16.5068C13.4694 17.5133 11.8122 18.1111 10.0171 18.1111C5.57724 18.1111 2.00085 14.467 2.00085 10ZM10 6.00003C10.5523 6.00003 11 6.44774 11 7.00003V9.00003H13C13.5523 9.00003 14 9.44774 14 10C14 10.5523 13.5523 11 13 11H11V13C11 13.5523 10.5523 14 10 14C9.44773 14 9.00002 13.5523 9.00002 13V11H7.00002C6.44773 11 6.00002 10.5523 6.00002 10C6.00002 9.44774 6.44773 9.00003 7.00002 9.00003H9.00002V7.00003C9.00002 6.44774 9.44773 6.00003 10 6.00003Z"/></svg>'

},{}],32:[function(require,module,exports){
module.exports = '<svg class="icon-img zoom-out-svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0171 3.88892C6.70704 3.88892 4.00085 6.61225 4.00085 10C4.00085 13.3878 6.70704 16.1111 10.0171 16.1111C11.6155 16.1111 13.0684 15.4792 14.1483 14.4426C15.3087 13.3288 16.0334 11.7524 16.0334 10C16.0334 6.61225 13.3272 3.88892 10.0171 3.88892ZM2.00085 10C2.00085 5.53308 5.57724 1.88892 10.0171 1.88892C14.457 1.88892 18.0334 5.53308 18.0334 10C18.0334 11.9365 17.3617 13.717 16.2406 15.1128L21.6878 20.2741C22.0887 20.654 22.1058 21.2869 21.7259 21.6878C21.346 22.0887 20.7131 22.1058 20.3122 21.7259L14.804 16.5068C13.4694 17.5133 11.8122 18.1111 10.0171 18.1111C5.57724 18.1111 2.00085 14.467 2.00085 10ZM6.00002 10C6.00002 9.44774 6.44773 9.00003 7.00002 9.00003H13C13.5523 9.00003 14 9.44774 14 10C14 10.5523 13.5523 11 13 11H7.00002C6.44773 11 6.00002 10.5523 6.00002 10Z"/></svg>'

},{}],33:[function(require,module,exports){
if (window) {
  window.addEventListener('load', e => document.body.classList.add('content-ready'))
}

module.exports = {
  attachTo: (container = document.body) => {
    const spinner = document.createElement('div')
    let attached = false

    const updateSpinner = msg => {
      const { top, left, width, height } = container.getBoundingClientRect()

      spinner.style.cssText = `
        top:${top}px;
        left:${left}px;
        height:${height}px;
        width:${width}px;
        --loading-message: "${msg}";
      `
    }
    return {
      show: (msg = 'Loading file...') => {
        if (attached) {
          updateSpinner(msg)
          return
        }
        container.classList.add('_loading_spinner_container')
        spinner.classList.add('_loading_spinner_')

        updateSpinner(msg)
        document.body.appendChild(spinner)

        attached = true
      },
      hide: () => {
        document.body.removeChild(spinner)
        container.classList.remove('_loading_spinner_container')
        attached = false
      }
    }
  }
}

},{}],34:[function(require,module,exports){
'use strict'
/**
 * Functions shared between frontend (visualizer) and backend (analysis)
 */

function setStackTop (node, exclude = this.exclude) {
  const childCount = node.children.length
  const nodeIsExcluded = isNodeExcluded(node, exclude)
  let topTotal = node.onStackTop.base

  // Will be called many many times in browser, use vanilla for/i for speed
  for (let i = 0; i < childCount; i++) {
    // Add stack top of excluded children and chains of excluded descendents
    topTotal += setStackTop(node.children[i], exclude)
  }
  node.onStackTop.asViewed = nodeIsExcluded ? 0 : topTotal
  return nodeIsExcluded ? topTotal : 0
}

function isNodeExcluded (node, exclude = this.exclude) {
  if (node.isInit && exclude.has('is:init')) return true
  if (node.isInlinable && exclude.has('is:inlinable')) return true

  if (exclude.has(node.category)) return true

  // Namespace types by category in case someone installs a dependency named 'cpp' etc
  if (exclude.has(`${node.category}:${node.type}`)) return true

  return false
}

const defaultExclude = new Set([
  'all-v8:v8',
  'all-v8:cpp',
  'all-v8:native',
  'all-v8:regexp',
  'is:init'
])

module.exports = {
  setStackTop,
  isNodeExcluded,
  defaultExclude
}

},{}],35:[function(require,module,exports){
const selection = require('d3-selection')

const d3 = Object.assign(
  {},
  // d3.event
  // d3.select
  selection,
  // d3.mean
  require('d3-array')
)

// This property changes after importing so we fake a live binding.
Object.defineProperty(d3, 'event', {
  get () { return selection.event }
})

module.exports = d3

},{"d3-array":60,"d3-selection":72}],36:[function(require,module,exports){
'use strict'

const shared = require('../shared.js')
const flameGradient = require('flame-gradient')
const getNoDataNode = require('./no-data-node.js')
const d3 = require('./d3.js')

class DataTree {
  constructor (tree) {
    this.merged = tree.merged
    this.unmerged = tree.unmerged

    this.codeAreas = tree.codeAreas

    // Set a reasonable upper limit to displayed name; exact name matching is done in analysis
    this.appName = tree.appName.length > 30 ? tree.appName.slice(0, 30) + '…' : tree.appName
    this.pathSeparator = tree.pathSeparator

    this.mergedNodes = getFlatArray(this.merged.children)
    this.unmergedNodes = getFlatArray(this.unmerged.children)

    this.useMerged = true
    this.showOptimizationStatus = false
    this.exclude = shared.defaultExclude

    // Set and updated in .update()
    this.flatByHottest = null
    this.mean = 0
    this.highestStackTop = 0
    this.maxRootAboveMean = 0
    this.maxRootBelowMean = 0

    // Set by countTotalFrames
    this.totalFrames = null

    this.setStackTop = shared.setStackTop.bind(this)
    this.isNodeExcluded = shared.isNodeExcluded.bind(this)
  }

  update (initial) {
    if (!initial) this.setStackTop(this.activeTree())
    this.sortFramesByHottest()
    this.mean = d3.mean(this.flatByHottest, node => node.onStackTop.asViewed)
    this.highestStackTop = this.flatByHottest[0].onStackTop.asViewed
    this.calculateRoots()
    this.computeGroupedSortValues()
  }

  show (name) {
    if (this.exclude.has(name)) {
      this.exclude.delete(name)
      return true
    }
    return false
  }

  hide (name) {
    if (!this.exclude.has(name)) {
      this.exclude.add(name)
      return true
    }
    return false
  }

  sortFramesByHottest (customRootNode) {
    if (customRootNode) {
      // Flattened tree, sorted hottest first, including the root node
      const frames = getFlatArray(customRootNode.children)
      this.flatByHottest = this.getFlattenedSorted(this.getStackTopSorter(), [customRootNode].concat(frames))
    } else {
      // Flattened tree, sorted hottest first, excluding the 'all stacks' root node
      this.flatByHottest = this.getFlattenedSorted(this.getStackTopSorter(), this.activeNodes())
    }
    this.highestStackTop = this.flatByHottest[0].onStackTop.asViewed
  }

  calculateRoots (arr = this.flatByHottest) {
    // Used to give a reasonable flame gradient range above and below the mean value
    let maxRootAboveMean = 0
    let maxRootBelowMean = 0

    const count = arr.length
    for (let i = 0; i < count; i++) {
      const node = this.flatByHottest[i]

      if (node.onStackTop.asViewed > this.mean) {
        node.onStackTop.rootFromMean = Math.sqrt(node.onStackTop.asViewed - this.mean)
        if (node.onStackTop.rootFromMean > maxRootAboveMean) maxRootAboveMean = node.onStackTop.rootFromMean
      } else if (node.onStackTop.asViewed < this.mean) {
        node.onStackTop.rootFromMean = Math.sqrt(this.mean - node.onStackTop.asViewed)
        if (node.onStackTop.rootFromMean > maxRootBelowMean) maxRootBelowMean = node.onStackTop.rootFromMean
      } else { // Exactly equals mean
        node.onStackTop.rootFromMean = 0
      }
    }

    this.maxRootAboveMean = maxRootAboveMean
    this.maxRootBelowMean = maxRootBelowMean
  }

  activeTree () {
    return this.useMerged ? this.merged : this.unmerged
  }

  activeNodes () {
    return this.useMerged ? this.mergedNodes : this.unmergedNodes
  }

  setActiveTree (useMerged = false) {
    this.useMerged = useMerged === true

    // Showing optimization status doesn't make any sense on merged tree
    if (useMerged) this.showOptimizationStatus = false

    this.update()
  }

  getFlattenedSorted (sorter, arr) {
    const filtered = arr.filter(node => !this.isNodeExcluded(node))
    if (filtered.length) return filtered.sort(sorter)
    return [getNoDataNode()]
  }

  getHeatColor (node, arr = this.flatByHottest) {
    if (!node || this.isNodeExcluded(node) || this.mean === 0) return flameGradient(0)

    const pivotPoint = this.mean / (this.mean + this.maxRootAboveMean + this.maxRootBelowMean)

    if (node.onStackTop.rootFromMean === 0 || node.onStackTop.asViewed === this.mean) return flameGradient(pivotPoint)

    if (node.onStackTop.asViewed > this.mean) {
      return flameGradient(pivotPoint + (node.onStackTop.rootFromMean / this.maxRootAboveMean) * (0.95 - pivotPoint))
    } else {
      return flameGradient(pivotPoint - (node.onStackTop.rootFromMean / this.maxRootBelowMean) * pivotPoint)
    }
  }

  getFrameByRank (rank, arr = this.flatByHottest) {
    if (!arr) return null
    return arr[rank] || null
  }

  getStackTopSorter () {
    return (nodeA, nodeB) => {
      const topA = nodeA.onStackTop.asViewed
      const topB = nodeB.onStackTop.asViewed

      // Sort highest first, treating equal as equal
      return topA === topB ? 0 : topA > topB ? -1 : 1
    }
  }

  getFilteredStackSorter () {
    return (nodeA, nodeB) => {
      const groupA = this.groupedSortValues.get(nodeA)
      const groupB = this.groupedSortValues.get(nodeB)
      if (groupA > groupB) return -1
      if (groupA < groupB) return 1

      const valueA = this.getNodeValue(nodeA)
      const valueB = this.getNodeValue(nodeB)

      return valueA === valueB ? 0 : valueA > valueB ? -1 : 1
    }
  }

  computeGroupedSortValues () {
    this.groupedSortValues = new Map()

    const completeNodesArray = [this.activeTree()].concat(this.activeNodes())

    completeNodesArray.forEach(node => {
      const group = Object.create(null)
      node.childGroups = group

      if (!node.children || this.isNodeExcluded(node)) return

      const nextVisibleDescendents = this.getVisibleChildren(node)

      nextVisibleDescendents.forEach((child) => {
        const type = this.getTypeKey(child)
        const value = this.getNodeValue(child)
        if (type in group) {
          group[type] += value
        } else {
          group[type] = value
        }
      })

      nextVisibleDescendents.forEach((child) => {
        const type = this.getTypeKey(child)
        this.groupedSortValues.set(child, group[type])
      })

      node.childGroups = group
    })
  }

  isOffScreen (node) {
    // d3-fg sets `value` to 0 to hide off-screen nodes. The "real" value is stored on `.original`.
    return node.value === 0 && typeof node.original === 'number'
  }

  getNodeValue (node) {
    if (this.isNodeExcluded(node)) {
      // Value of hidden frames is the sum of their visible children
      return node.children
        ? node.children.reduce((acc, child) => {
            return acc + this.getNodeValue(child)
          }, 0)
        : 0
    }

    return this.isOffScreen(node) ? node.original : node.value
  }

  getTypeKey (node) {
    return `${node.category}:${node.type}`
  }

  getSortPosition (node, arr = this.flatByHottest) {
    return arr.indexOf(node)
  }

  countFrames (arr = this.flatByHottest) {
    return arr ? arr.length : 0
  }

  getNodeById (id) {
    const arr = this.activeNodes()
    return arr.find((node) => node.id === id)
  }

  getVisibleChildren (node = this.activeTree()) {
    // Can pass in data nodes or D3 partition nodes; gets closest visible descendents of same type

    let nextVisibleDescendents = []
    const childCount = node.children ? node.children.length : 0
    for (let i = 0; i < childCount; i++) {
      const child = node.children[i]
      if (this.isNodeExcluded(child.data || child)) {
        nextVisibleDescendents = nextVisibleDescendents.concat(this.getVisibleChildren(child))
      } else {
        nextVisibleDescendents.push(child)
      }
    }
    return nextVisibleDescendents
  }
}

function getFlatArray (children) {
  // Flatten the tree, excluding the root node itself (i.e. the 'all stacks' node)
  return [...children].concat(children.reduce((arr, child) => {
    if (child.children) {
      return arr.concat(getFlatArray(child.children))
    }
    return arr
  }, []))
}

module.exports = DataTree

},{"../shared.js":34,"./d3.js":35,"./no-data-node.js":51,"flame-gradient":79}],"/Users/alex/.nvm/versions/node/v20.8.0/lib/node_modules/clinic/node_modules/@clinic/flame/visualizer/data.json":[function(require,module,exports){
module.exports={"appName":"v1.0-uint8arraylists-all-the-way-down","pathSeparator":"/","codeAreas":[{"id":"app","children":[],"childrenVisibilityToggle":false,"excludeKey":"app"},{"id":"deps","children":[],"childrenVisibilityToggle":false,"excludeKey":"deps"},{"id":"wasm","excludeKey":"wasm"},{"id":"core","excludeKey":"core"},{"id":"all-v8","children":[{"id":"v8","excludeKey":"all-v8:v8"},{"id":"native","excludeKey":"all-v8:native"},{"id":"cpp","excludeKey":"all-v8:cpp"},{"id":"regexp","excludeKey":"all-v8:regexp"}],"childrenVisibilityToggle":true,"excludeKey":"all-v8"}],"merged":{"id":0,"name":"all stacks","fileName":null,"functionName":null,"lineNumber":null,"columnNumber":null,"target":"","type":"root","category":"none","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":59,"onStackTop":{"base":0,"asViewed":26},"children":[{"id":1,"name":"(anonymous) node:internal/main/run_main_module:1:1 [INIT]","fileName":"node:internal/main/run_main_module","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/main/run_main_module#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":50,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":2,"name":"prepareMainThreadExecution node:internal/process/pre_execution:54:36","fileName":"node:internal/process/pre_execution","functionName":"prepareMainThreadExecution","lineNumber":54,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L54","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":22,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":3,"name":"prepareExecution node:internal/process/pre_execution:70:26","fileName":"node:internal/process/pre_execution","functionName":"prepareExecution","lineNumber":70,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L70","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":21,"onStackTop":{"base":3,"asViewed":3},"children":[{"id":4,"name":"patchProcessObject node:internal/process/pre_execution:179:28","fileName":"node:internal/process/pre_execution","functionName":"patchProcessObject","lineNumber":179,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L179","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":2,"asViewed":2},"children":[{"id":5,"name":"resolve node:path:1095:10","fileName":"node:path","functionName":"resolve","lineNumber":1095,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:path#L1095","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":6,"name":"normalizeString node:path:66:25","fileName":"node:path","functionName":"normalizeString","lineNumber":66,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:path#L66","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]},{"id":7,"name":"initializeSourceMapsHandlers node:internal/process/pre_execution:681:38","fileName":"node:internal/process/pre_execution","functionName":"initializeSourceMapsHandlers","lineNumber":681,"columnNumber":38,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L681","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":8,"name":"setupUserModules node:internal/process/pre_execution:161:26","fileName":"node:internal/process/pre_execution","functionName":"setupUserModules","lineNumber":161,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L161","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":14,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":9,"name":"initializeCJSLoader node:internal/process/pre_execution:659:29","fileName":"node:internal/process/pre_execution","functionName":"initializeCJSLoader","lineNumber":659,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L659","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":10,"name":"initializeCJS node:internal/modules/cjs/loader:330:23","fileName":"node:internal/modules/cjs/loader","functionName":"initializeCJS","lineNumber":330,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L330","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]},{"id":11,"name":"initializeESMLoader node:internal/process/pre_execution:664:29","fileName":"node:internal/process/pre_execution","functionName":"initializeESMLoader","lineNumber":664,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L664","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":12,"name":"loadPreloadModules node:internal/process/pre_execution:696:28","fileName":"node:internal/process/pre_execution","functionName":"loadPreloadModules","lineNumber":696,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L696","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":13,"name":"Module._preloadModules node:internal/modules/cjs/loader:1401:34","fileName":"node:internal/modules/cjs/loader","functionName":"Module._preloadModules","lineNumber":1401,"columnNumber":34,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1401","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":14,"name":"internalRequire node:internal/modules/cjs/loader:158:25","fileName":"node:internal/modules/cjs/loader","functionName":"internalRequire","lineNumber":158,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L158","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":15,"name":"Module._load node:internal/modules/cjs/loader:867:24","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":16,"name":"Module._resolveFilename node:internal/modules/cjs/loader:964:35","fileName":"node:internal/modules/cjs/loader","functionName":"Module._resolveFilename","lineNumber":964,"columnNumber":35,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L964","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":7,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":17,"name":"Module._findPath node:internal/modules/cjs/loader:564:28","fileName":"node:internal/modules/cjs/loader","functionName":"Module._findPath","lineNumber":564,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L564","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":18,"name":"tryExtensions node:internal/modules/cjs/loader:462:23","fileName":"node:internal/modules/cjs/loader","functionName":"tryExtensions","lineNumber":462,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L462","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":19,"name":"tryFile node:internal/modules/cjs/loader:446:17","fileName":"node:internal/modules/cjs/loader","functionName":"tryFile","lineNumber":446,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L446","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":20,"name":"toRealPath node:internal/modules/cjs/loader:455:20","fileName":"node:internal/modules/cjs/loader","functionName":"toRealPath","lineNumber":455,"columnNumber":20,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L455","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":3,"asViewed":3},"children":[{"id":21,"name":"realpathSync node:fs:2553:22","fileName":"node:fs","functionName":"realpathSync","lineNumber":2553,"columnNumber":22,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:fs#L2553","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":2,"asViewed":3},"children":[{"id":22,"name":"GetNamedProperty [CODE:BytecodeHandler]","fileName":null,"functionName":"GetNamedProperty","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]},{"id":23,"name":"Module.load node:internal/modules/cjs/loader:1079:33","fileName":"node:internal/modules/cjs/loader","functionName":"Module.load","lineNumber":1079,"columnNumber":33,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1079","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":24,"name":"findLongestRegisteredExtension node:internal/modules/cjs/loader:475:40","fileName":"node:internal/modules/cjs/loader","functionName":"findLongestRegisteredExtension","lineNumber":475,"columnNumber":40,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L475","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":25,"name":"Module._extensions..js node:internal/modules/cjs/loader:1250:37","fileName":"node:internal/modules/cjs/loader","functionName":"Module._extensions..js","lineNumber":1250,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1250","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":26,"name":"readFileSync node:fs:437:22","fileName":"node:fs","functionName":"readFileSync","lineNumber":437,"columnNumber":22,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:fs#L437","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":27,"name":"getOptions node:internal/fs/utils:322:20","fileName":"node:internal/fs/utils","functionName":"getOptions","lineNumber":322,"columnNumber":20,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/fs/utils#L322","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":28,"name":"assertEncoding node:internal/fs/utils:157:24","fileName":"node:internal/fs/utils","functionName":"assertEncoding","lineNumber":157,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/fs/utils#L157","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]},{"id":29,"name":"Module._compile node:internal/modules/cjs/loader:1195:37","fileName":"node:internal/modules/cjs/loader","functionName":"Module._compile","lineNumber":1195,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1195","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":2,"asViewed":2},"children":[]}]}]}]}]}]}]}]}]}]},{"id":30,"name":"prepareMainThreadExecution node:internal/process/pre_execution:54:36 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"prepareMainThreadExecution","lineNumber":54,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L54","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":31,"name":"prepareExecution node:internal/process/pre_execution:70:26 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"prepareExecution","lineNumber":70,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L70","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":32,"name":"setupUserModules node:internal/process/pre_execution:161:26 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"setupUserModules","lineNumber":161,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L161","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":33,"name":"initializeCJSLoader node:internal/process/pre_execution:659:29 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"initializeCJSLoader","lineNumber":659,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L659","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":34,"name":"initializeCJS node:internal/modules/cjs/loader:330:23 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"initializeCJS","lineNumber":330,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L330","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":35,"name":"getCanBeRequiredByUsersWithoutSchemeList node:internal/bootstrap/realm:313:50 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getCanBeRequiredByUsersWithoutSchemeList","lineNumber":313,"columnNumber":50,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L313","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":36,"name":"ArrayFrom [CODE:Builtin]","fileName":null,"functionName":"ArrayFrom","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]},{"id":37,"name":"loadPreloadModules node:internal/process/pre_execution:696:28 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"loadPreloadModules","lineNumber":696,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L696","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":38,"name":"Module._preloadModules node:internal/modules/cjs/loader:1401:34 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._preloadModules","lineNumber":1401,"columnNumber":34,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1401","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":39,"name":"internalRequire node:internal/modules/cjs/loader:158:25 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"internalRequire","lineNumber":158,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L158","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":40,"name":"Module._load node:internal/modules/cjs/loader:867:24 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":41,"name":"Module.load node:internal/modules/cjs/loader:1079:33 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module.load","lineNumber":1079,"columnNumber":33,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1079","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":42,"name":"Module._extensions..js node:internal/modules/cjs/loader:1250:37 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._extensions..js","lineNumber":1250,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1250","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":43,"name":"Module._compile node:internal/modules/cjs/loader:1195:37 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._compile","lineNumber":1195,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1195","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":44,"name":"require node:internal/modules/helpers:128:31 [INIT]","fileName":"node:internal/modules/helpers","functionName":"require","lineNumber":128,"columnNumber":31,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/helpers#L128","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":45,"name":"Module.require node:internal/modules/cjs/loader:1107:36 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module.require","lineNumber":1107,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1107","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":46,"name":"Module._load node:internal/modules/cjs/loader:867:24 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":47,"name":"loadBuiltinModule node:internal/modules/helpers:61:27 [INIT]","fileName":"node:internal/modules/helpers","functionName":"loadBuiltinModule","lineNumber":61,"columnNumber":27,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/helpers#L61","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":48,"name":"compileForPublicLoader node:internal/bootstrap/realm:322:25 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"compileForPublicLoader","lineNumber":322,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L322","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":49,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":50,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":22,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":51,"name":"(anonymous) node:cluster:1:1 [INIT]","fileName":"node:cluster","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:cluster#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":52,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":53,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":54,"name":"(anonymous) node:internal/cluster/primary:1:1 [INIT]","fileName":"node:internal/cluster/primary","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/cluster/primary#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":55,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":56,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":57,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":58,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":59,"name":"(anonymous) node:child_process:1:1 [INIT]","fileName":"node:child_process","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:child_process#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":1,"asViewed":0},"children":[{"id":60,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":61,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":2,"asViewed":0},"children":[]}]},{"id":62,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":63,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":64,"name":"(anonymous) node:internal/child_process:1:1 [INIT]","fileName":"node:internal/child_process","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/child_process#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":65,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":66,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":67,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":68,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":69,"name":"(anonymous) node:net:1:1 [INIT]","fileName":"node:net","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":70,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":71,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":72,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":73,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":74,"name":"(anonymous) node:stream:1:1 [INIT]","fileName":"node:stream","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:stream#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":75,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":76,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":77,"name":"(anonymous) node:internal/streams/operators:1:1 [INIT]","fileName":"node:internal/streams/operators","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/operators#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":78,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":79,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":80,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":7,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":81,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":7,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":82,"name":"(anonymous) node:internal/abort_controller:1:1 [INIT]","fileName":"node:internal/abort_controller","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/abort_controller#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":83,"name":"(anonymous) node:internal/streams/end-of-stream:1:1 [INIT]","fileName":"node:internal/streams/end-of-stream","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/end-of-stream#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":84,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":85,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]},{"id":86,"name":"(anonymous) node:internal/streams/compose:1:1 [INIT]","fileName":"node:internal/streams/compose","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/compose#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":5,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":87,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":88,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":89,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":90,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":91,"name":"(anonymous) node:internal/streams/pipeline:1:1 [INIT]","fileName":"node:internal/streams/pipeline","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/pipeline#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":92,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":93,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":94,"name":"(anonymous) node:internal/streams/duplex:1:1 [INIT]","fileName":"node:internal/streams/duplex","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/duplex#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":95,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":96,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":97,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":98,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":99,"name":"(anonymous) node:internal/streams/readable:1:1 [INIT]","fileName":"node:internal/streams/readable","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/readable#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":100,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":101,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":102,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":103,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]},{"id":104,"name":"protoGetter node:net:866:21","fileName":"node:net","functionName":"protoGetter","lineNumber":866,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L866","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":105,"name":"(anonymous) node:worker_threads:1:1 [INIT]","fileName":"node:worker_threads","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:worker_threads#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":106,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":107,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":108,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":109,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":110,"name":"(anonymous) node:internal/worker:1:1 [INIT]","fileName":"node:internal/worker","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/worker#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":111,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":112,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]},{"id":113,"name":"getESMFacade node:internal/bootstrap/realm:340:15 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getESMFacade","lineNumber":340,"columnNumber":15,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L340","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":114,"name":"(anonymous) node:internal/bootstrap/realm:351:15 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"(anonymous)","lineNumber":351,"columnNumber":15,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L351","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":115,"name":"syncExports node:internal/bootstrap/realm:365:14 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"syncExports","lineNumber":365,"columnNumber":14,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L365","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":116,"name":"getOwn node:internal/bootstrap/realm:202:16 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getOwn","lineNumber":202,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L202","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":117,"name":"ReflectGet [CODE:Builtin]","fileName":null,"functionName":"ReflectGet","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":118,"name":"get BlockList node:net:2373:16","fileName":"node:net","functionName":"get BlockList","lineNumber":2373,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L2373","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":1},"children":[{"id":119,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":120,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":121,"name":"(anonymous) node:internal/util:794:18 [INIT]","fileName":"node:internal/util","functionName":"(anonymous)","lineNumber":794,"columnNumber":18,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util#L794","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":122,"name":"(anonymous) node:internal/modules/cjs/loader:118:3 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"(anonymous)","lineNumber":118,"columnNumber":3,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L118","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":123,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":124,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":125,"name":"(anonymous) node:internal/process/esm_loader:1:1 [INIT]","fileName":"node:internal/process/esm_loader","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/esm_loader#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":126,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":127,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]},{"id":128,"name":"get esmLoader node:internal/process/esm_loader:17:16","fileName":"node:internal/process/esm_loader","functionName":"get esmLoader","lineNumber":17,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/esm_loader#L17","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":129,"name":"createModuleLoader node:internal/modules/esm/loader:517:28","fileName":"node:internal/modules/esm/loader","functionName":"createModuleLoader","lineNumber":517,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L517","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":130,"name":"ModuleLoader node:internal/modules/esm/loader:120:14","fileName":"node:internal/modules/esm/loader","functionName":"ModuleLoader","lineNumber":120,"columnNumber":14,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L120","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":131,"name":"<instance_members_initializer> node:internal/modules/esm/loader:71:1","fileName":"node:internal/modules/esm/loader","functionName":"<instance_members_initializer>","lineNumber":71,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L71","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":132,"name":"getTranslators node:internal/modules/esm/loader:41:24","fileName":"node:internal/modules/esm/loader","functionName":"getTranslators","lineNumber":41,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L41","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":1},"children":[{"id":133,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":134,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":135,"name":"(anonymous) node:internal/process/execution:150:10 [INIT]","fileName":"node:internal/process/execution","functionName":"(anonymous)","lineNumber":150,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/execution#L150","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":136,"name":"afterInspector node:internal/errors:781:17 [INIT]","fileName":"node:internal/errors","functionName":"afterInspector","lineNumber":781,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L781","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":137,"name":"lazyUtilColors node:internal/errors:195:24 [INIT]","fileName":"node:internal/errors","functionName":"lazyUtilColors","lineNumber":195,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L195","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":138,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":139,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":140,"name":"(anonymous) node:internal/util/colors:1:1 [INIT]","fileName":"node:internal/util/colors","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":141,"name":"refresh node:internal/util/colors:25:10","fileName":"node:internal/util/colors","functionName":"refresh","lineNumber":25,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L25","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":142,"name":"shouldColorize node:internal/util/colors:17:17","fileName":"node:internal/util/colors","functionName":"shouldColorize","lineNumber":17,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L17","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]},{"id":143,"name":"refresh node:internal/util/colors:25:10 [INIT]","fileName":"node:internal/util/colors","functionName":"refresh","lineNumber":25,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L25","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":144,"name":"getStderr node:internal/bootstrap/switches/is_main_thread:170:19 [INIT]","fileName":"node:internal/bootstrap/switches/is_main_thread","functionName":"getStderr","lineNumber":170,"columnNumber":19,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/switches/is_main_thread#L170","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":145,"name":"createWritableStdioStream node:internal/bootstrap/switches/is_main_thread:47:35 [INIT]","fileName":"node:internal/bootstrap/switches/is_main_thread","functionName":"createWritableStdioStream","lineNumber":47,"columnNumber":35,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/switches/is_main_thread#L47","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":146,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":147,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":148,"name":"(anonymous) node:tty:1:1 [INIT]","fileName":"node:tty","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:tty#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":149,"name":"StoreIC_NoFeedback [CODE:Builtin]","fileName":null,"functionName":"StoreIC_NoFeedback","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]},{"id":150,"name":"WriteStream node:tty:84:21","fileName":"node:tty","functionName":"WriteStream","lineNumber":84,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:tty#L84","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]}]}]}]},{"id":151,"name":"afterInspector node:internal/errors:781:17","fileName":"node:internal/errors","functionName":"afterInspector","lineNumber":781,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L781","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":4,"onStackTop":{"base":2,"asViewed":2},"children":[{"id":152,"name":"inspect node:internal/util/inspect:308:17","fileName":"node:internal/util/inspect","functionName":"inspect","lineNumber":308,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L308","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":153,"name":"formatValue node:internal/util/inspect:764:21","fileName":"node:internal/util/inspect","functionName":"formatValue","lineNumber":764,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L764","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":154,"name":"formatRaw node:internal/util/inspect:842:19","fileName":"node:internal/util/inspect","functionName":"formatRaw","lineNumber":842,"columnNumber":19,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L842","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":155,"name":"formatError node:internal/util/inspect:1366:21","fileName":"node:internal/util/inspect","functionName":"formatError","lineNumber":1366,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L1366","type":"core","category":"core","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]},"unmerged":{"id":0,"name":"all stacks","fileName":null,"functionName":null,"lineNumber":null,"columnNumber":null,"target":"","type":"root","category":"none","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":59,"onStackTop":{"base":0,"asViewed":26},"children":[{"id":1,"name":"~(anonymous) node:internal/main/run_main_module:1:1 [INIT]","fileName":"node:internal/main/run_main_module","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/main/run_main_module#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":50,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":2,"name":"~prepareMainThreadExecution node:internal/process/pre_execution:54:36","fileName":"node:internal/process/pre_execution","functionName":"prepareMainThreadExecution","lineNumber":54,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L54","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":22,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":3,"name":"~prepareExecution node:internal/process/pre_execution:70:26","fileName":"node:internal/process/pre_execution","functionName":"prepareExecution","lineNumber":70,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L70","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":21,"onStackTop":{"base":3,"asViewed":3},"children":[{"id":4,"name":"~patchProcessObject node:internal/process/pre_execution:179:28","fileName":"node:internal/process/pre_execution","functionName":"patchProcessObject","lineNumber":179,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L179","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":2,"asViewed":2},"children":[{"id":5,"name":"~resolve node:path:1095:10","fileName":"node:path","functionName":"resolve","lineNumber":1095,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:path#L1095","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":6,"name":"~normalizeString node:path:66:25","fileName":"node:path","functionName":"normalizeString","lineNumber":66,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:path#L66","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]},{"id":7,"name":"~initializeSourceMapsHandlers node:internal/process/pre_execution:681:38","fileName":"node:internal/process/pre_execution","functionName":"initializeSourceMapsHandlers","lineNumber":681,"columnNumber":38,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L681","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":8,"name":"~setupUserModules node:internal/process/pre_execution:161:26","fileName":"node:internal/process/pre_execution","functionName":"setupUserModules","lineNumber":161,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L161","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":14,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":9,"name":"~initializeCJSLoader node:internal/process/pre_execution:659:29","fileName":"node:internal/process/pre_execution","functionName":"initializeCJSLoader","lineNumber":659,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L659","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":10,"name":"~initializeCJS node:internal/modules/cjs/loader:330:23","fileName":"node:internal/modules/cjs/loader","functionName":"initializeCJS","lineNumber":330,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L330","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]},{"id":11,"name":"~initializeESMLoader node:internal/process/pre_execution:664:29","fileName":"node:internal/process/pre_execution","functionName":"initializeESMLoader","lineNumber":664,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L664","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":12,"name":"~loadPreloadModules node:internal/process/pre_execution:696:28","fileName":"node:internal/process/pre_execution","functionName":"loadPreloadModules","lineNumber":696,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L696","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":13,"name":"~Module._preloadModules node:internal/modules/cjs/loader:1401:34","fileName":"node:internal/modules/cjs/loader","functionName":"Module._preloadModules","lineNumber":1401,"columnNumber":34,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1401","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":14,"name":"~internalRequire node:internal/modules/cjs/loader:158:25","fileName":"node:internal/modules/cjs/loader","functionName":"internalRequire","lineNumber":158,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L158","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":15,"name":"~Module._load node:internal/modules/cjs/loader:867:24","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":11,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":16,"name":"~Module._resolveFilename node:internal/modules/cjs/loader:964:35","fileName":"node:internal/modules/cjs/loader","functionName":"Module._resolveFilename","lineNumber":964,"columnNumber":35,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L964","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":7,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":17,"name":"~Module._findPath node:internal/modules/cjs/loader:564:28","fileName":"node:internal/modules/cjs/loader","functionName":"Module._findPath","lineNumber":564,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L564","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":18,"name":"~tryExtensions node:internal/modules/cjs/loader:462:23","fileName":"node:internal/modules/cjs/loader","functionName":"tryExtensions","lineNumber":462,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L462","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":19,"name":"~tryFile node:internal/modules/cjs/loader:446:17","fileName":"node:internal/modules/cjs/loader","functionName":"tryFile","lineNumber":446,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L446","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":20,"name":"~toRealPath node:internal/modules/cjs/loader:455:20","fileName":"node:internal/modules/cjs/loader","functionName":"toRealPath","lineNumber":455,"columnNumber":20,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L455","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":6,"onStackTop":{"base":3,"asViewed":3},"children":[{"id":21,"name":"~realpathSync node:fs:2553:22","fileName":"node:fs","functionName":"realpathSync","lineNumber":2553,"columnNumber":22,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:fs#L2553","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":2,"asViewed":3},"children":[{"id":22,"name":"GetNamedProperty [CODE:BytecodeHandler]","fileName":null,"functionName":"GetNamedProperty","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]},{"id":23,"name":"~Module.load node:internal/modules/cjs/loader:1079:33","fileName":"node:internal/modules/cjs/loader","functionName":"Module.load","lineNumber":1079,"columnNumber":33,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1079","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":24,"name":"~findLongestRegisteredExtension node:internal/modules/cjs/loader:475:40","fileName":"node:internal/modules/cjs/loader","functionName":"findLongestRegisteredExtension","lineNumber":475,"columnNumber":40,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L475","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]},{"id":25,"name":"~Module._extensions..js node:internal/modules/cjs/loader:1250:37","fileName":"node:internal/modules/cjs/loader","functionName":"Module._extensions..js","lineNumber":1250,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1250","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":26,"name":"~readFileSync node:fs:437:22","fileName":"node:fs","functionName":"readFileSync","lineNumber":437,"columnNumber":22,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:fs#L437","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":27,"name":"~getOptions node:internal/fs/utils:322:20","fileName":"node:internal/fs/utils","functionName":"getOptions","lineNumber":322,"columnNumber":20,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/fs/utils#L322","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":28,"name":"~assertEncoding node:internal/fs/utils:157:24","fileName":"node:internal/fs/utils","functionName":"assertEncoding","lineNumber":157,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/fs/utils#L157","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]},{"id":29,"name":"~Module._compile node:internal/modules/cjs/loader:1195:37","fileName":"node:internal/modules/cjs/loader","functionName":"Module._compile","lineNumber":1195,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1195","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":2,"asViewed":2},"children":[]}]}]}]}]}]}]}]}]}]},{"id":30,"name":"~prepareMainThreadExecution node:internal/process/pre_execution:54:36 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"prepareMainThreadExecution","lineNumber":54,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L54","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":31,"name":"~prepareExecution node:internal/process/pre_execution:70:26 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"prepareExecution","lineNumber":70,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L70","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":32,"name":"~setupUserModules node:internal/process/pre_execution:161:26 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"setupUserModules","lineNumber":161,"columnNumber":26,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L161","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":28,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":33,"name":"~initializeCJSLoader node:internal/process/pre_execution:659:29 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"initializeCJSLoader","lineNumber":659,"columnNumber":29,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L659","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":34,"name":"~initializeCJS node:internal/modules/cjs/loader:330:23 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"initializeCJS","lineNumber":330,"columnNumber":23,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L330","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":35,"name":"~getCanBeRequiredByUsersWithoutSchemeList node:internal/bootstrap/realm:313:50 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getCanBeRequiredByUsersWithoutSchemeList","lineNumber":313,"columnNumber":50,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L313","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":36,"name":"ArrayFrom [CODE:Builtin]","fileName":null,"functionName":"ArrayFrom","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]},{"id":37,"name":"~loadPreloadModules node:internal/process/pre_execution:696:28 [INIT]","fileName":"node:internal/process/pre_execution","functionName":"loadPreloadModules","lineNumber":696,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/pre_execution#L696","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":38,"name":"~Module._preloadModules node:internal/modules/cjs/loader:1401:34 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._preloadModules","lineNumber":1401,"columnNumber":34,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1401","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":39,"name":"~internalRequire node:internal/modules/cjs/loader:158:25 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"internalRequire","lineNumber":158,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L158","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":40,"name":"~Module._load node:internal/modules/cjs/loader:867:24 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":41,"name":"~Module.load node:internal/modules/cjs/loader:1079:33 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module.load","lineNumber":1079,"columnNumber":33,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1079","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":27,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":42,"name":"~Module._extensions..js node:internal/modules/cjs/loader:1250:37 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._extensions..js","lineNumber":1250,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1250","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":43,"name":"~Module._compile node:internal/modules/cjs/loader:1195:37 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._compile","lineNumber":1195,"columnNumber":37,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1195","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":44,"name":"~require node:internal/modules/helpers:128:31 [INIT]","fileName":"node:internal/modules/helpers","functionName":"require","lineNumber":128,"columnNumber":31,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/helpers#L128","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":45,"name":"~Module.require node:internal/modules/cjs/loader:1107:36 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module.require","lineNumber":1107,"columnNumber":36,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L1107","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":46,"name":"~Module._load node:internal/modules/cjs/loader:867:24 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"Module._load","lineNumber":867,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L867","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":47,"name":"~loadBuiltinModule node:internal/modules/helpers:61:27 [INIT]","fileName":"node:internal/modules/helpers","functionName":"loadBuiltinModule","lineNumber":61,"columnNumber":27,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/helpers#L61","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":48,"name":"~compileForPublicLoader node:internal/bootstrap/realm:322:25 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"compileForPublicLoader","lineNumber":322,"columnNumber":25,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L322","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":24,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":49,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":50,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":22,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":51,"name":"~(anonymous) node:cluster:1:1 [INIT]","fileName":"node:cluster","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:cluster#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":52,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":53,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":54,"name":"~(anonymous) node:internal/cluster/primary:1:1 [INIT]","fileName":"node:internal/cluster/primary","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/cluster/primary#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":20,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":55,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":56,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":57,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":58,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":59,"name":"~(anonymous) node:child_process:1:1 [INIT]","fileName":"node:child_process","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:child_process#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":19,"onStackTop":{"base":1,"asViewed":0},"children":[{"id":60,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":61,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":2,"asViewed":0},"children":[]}]},{"id":62,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":63,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":64,"name":"~(anonymous) node:internal/child_process:1:1 [INIT]","fileName":"node:internal/child_process","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/child_process#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":16,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":65,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":66,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":67,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":68,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":69,"name":"~(anonymous) node:net:1:1 [INIT]","fileName":"node:net","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":13,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":70,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":71,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":72,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":73,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":74,"name":"~(anonymous) node:stream:1:1 [INIT]","fileName":"node:stream","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:stream#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":9,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":75,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":76,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":77,"name":"~(anonymous) node:internal/streams/operators:1:1 [INIT]","fileName":"node:internal/streams/operators","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/operators#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":8,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":78,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":79,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":80,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":7,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":81,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":7,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":82,"name":"~(anonymous) node:internal/abort_controller:1:1 [INIT]","fileName":"node:internal/abort_controller","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/abort_controller#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":83,"name":"~(anonymous) node:internal/streams/end-of-stream:1:1 [INIT]","fileName":"node:internal/streams/end-of-stream","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/end-of-stream#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":84,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":85,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]},{"id":86,"name":"~(anonymous) node:internal/streams/compose:1:1 [INIT]","fileName":"node:internal/streams/compose","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/compose#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":5,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":87,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":88,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":89,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":90,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":91,"name":"~(anonymous) node:internal/streams/pipeline:1:1 [INIT]","fileName":"node:internal/streams/pipeline","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/pipeline#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":92,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":93,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":94,"name":"~(anonymous) node:internal/streams/duplex:1:1 [INIT]","fileName":"node:internal/streams/duplex","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/duplex#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":95,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":96,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":3,"onStackTop":{"base":3,"asViewed":0},"children":[]}]},{"id":97,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":98,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":99,"name":"~(anonymous) node:internal/streams/readable:1:1 [INIT]","fileName":"node:internal/streams/readable","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/streams/readable#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":100,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":101,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":102,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":103,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]},{"id":104,"name":"~protoGetter node:net:866:21","fileName":"node:net","functionName":"protoGetter","lineNumber":866,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L866","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":105,"name":"~(anonymous) node:worker_threads:1:1 [INIT]","fileName":"node:worker_threads","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:worker_threads#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":106,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":107,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]},{"id":108,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":109,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":110,"name":"~(anonymous) node:internal/worker:1:1 [INIT]","fileName":"node:internal/worker","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/worker#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":111,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":112,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]},{"id":113,"name":"~getESMFacade node:internal/bootstrap/realm:340:15 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getESMFacade","lineNumber":340,"columnNumber":15,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L340","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":114,"name":"~(anonymous) node:internal/bootstrap/realm:351:15 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"(anonymous)","lineNumber":351,"columnNumber":15,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L351","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":115,"name":"~syncExports node:internal/bootstrap/realm:365:14 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"syncExports","lineNumber":365,"columnNumber":14,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L365","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":116,"name":"~getOwn node:internal/bootstrap/realm:202:16 [INIT]","fileName":"node:internal/bootstrap/realm","functionName":"getOwn","lineNumber":202,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/realm#L202","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":117,"name":"ReflectGet [CODE:Builtin]","fileName":null,"functionName":"ReflectGet","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":118,"name":"~get BlockList node:net:2373:16","fileName":"node:net","functionName":"get BlockList","lineNumber":2373,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:net#L2373","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":1},"children":[{"id":119,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":120,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":121,"name":"~(anonymous) node:internal/util:794:18 [INIT]","fileName":"node:internal/util","functionName":"(anonymous)","lineNumber":794,"columnNumber":18,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util#L794","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":122,"name":"~(anonymous) node:internal/modules/cjs/loader:118:3 [INIT]","fileName":"node:internal/modules/cjs/loader","functionName":"(anonymous)","lineNumber":118,"columnNumber":3,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/cjs/loader#L118","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":3,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":123,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":124,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":125,"name":"~(anonymous) node:internal/process/esm_loader:1:1 [INIT]","fileName":"node:internal/process/esm_loader","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/esm_loader#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":126,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":127,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]},{"id":128,"name":"~get esmLoader node:internal/process/esm_loader:17:16","fileName":"node:internal/process/esm_loader","functionName":"get esmLoader","lineNumber":17,"columnNumber":16,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/esm_loader#L17","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":129,"name":"~createModuleLoader node:internal/modules/esm/loader:517:28","fileName":"node:internal/modules/esm/loader","functionName":"createModuleLoader","lineNumber":517,"columnNumber":28,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L517","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":130,"name":"~ModuleLoader node:internal/modules/esm/loader:120:14","fileName":"node:internal/modules/esm/loader","functionName":"ModuleLoader","lineNumber":120,"columnNumber":14,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L120","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":131,"name":"~<instance_members_initializer> node:internal/modules/esm/loader:71:1","fileName":"node:internal/modules/esm/loader","functionName":"<instance_members_initializer>","lineNumber":71,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L71","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":132,"name":"~getTranslators node:internal/modules/esm/loader:41:24","fileName":"node:internal/modules/esm/loader","functionName":"getTranslators","lineNumber":41,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/modules/esm/loader#L41","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":1},"children":[{"id":133,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":134,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"cpp","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"id":135,"name":"~(anonymous) node:internal/process/execution:150:10 [INIT]","fileName":"node:internal/process/execution","functionName":"(anonymous)","lineNumber":150,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/process/execution#L150","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]},{"id":136,"name":"~afterInspector node:internal/errors:781:17 [INIT]","fileName":"node:internal/errors","functionName":"afterInspector","lineNumber":781,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L781","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":137,"name":"~lazyUtilColors node:internal/errors:195:24 [INIT]","fileName":"node:internal/errors","functionName":"lazyUtilColors","lineNumber":195,"columnNumber":24,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L195","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":138,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":139,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":140,"name":"~(anonymous) node:internal/util/colors:1:1 [INIT]","fileName":"node:internal/util/colors","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":4,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":141,"name":"~refresh node:internal/util/colors:25:10","fileName":"node:internal/util/colors","functionName":"refresh","lineNumber":25,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L25","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":142,"name":"~shouldColorize node:internal/util/colors:17:17","fileName":"node:internal/util/colors","functionName":"shouldColorize","lineNumber":17,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L17","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]},{"id":143,"name":"~refresh node:internal/util/colors:25:10 [INIT]","fileName":"node:internal/util/colors","functionName":"refresh","lineNumber":25,"columnNumber":10,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/colors#L25","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":144,"name":"~getStderr node:internal/bootstrap/switches/is_main_thread:170:19 [INIT]","fileName":"node:internal/bootstrap/switches/is_main_thread","functionName":"getStderr","lineNumber":170,"columnNumber":19,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/switches/is_main_thread#L170","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":145,"name":"~createWritableStdioStream node:internal/bootstrap/switches/is_main_thread:47:35 [INIT]","fileName":"node:internal/bootstrap/switches/is_main_thread","functionName":"createWritableStdioStream","lineNumber":47,"columnNumber":35,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/bootstrap/switches/is_main_thread#L47","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":2,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":146,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":147,"name":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node [SHARED_LIB] [INIT]","fileName":"/Users/alex/.nvm/versions/node/v20.8.0/bin/node","functionName":"[SHARED_LIB]","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":148,"name":"~(anonymous) node:tty:1:1 [INIT]","fileName":"node:tty","functionName":"(anonymous)","lineNumber":1,"columnNumber":1,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:tty#L1","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":true,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":149,"name":"StoreIC_NoFeedback [CODE:Builtin]","fileName":null,"functionName":"StoreIC_NoFeedback","lineNumber":null,"columnNumber":null,"target":"","type":"v8","category":"all-v8","isOptimized":false,"isUnoptimized":false,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":0},"children":[]}]}]}]},{"id":150,"name":"~WriteStream node:tty:84:21","fileName":"node:tty","functionName":"WriteStream","lineNumber":84,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:tty#L84","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]}]}]}]},{"id":151,"name":"~afterInspector node:internal/errors:781:17","fileName":"node:internal/errors","functionName":"afterInspector","lineNumber":781,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/errors#L781","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":4,"onStackTop":{"base":2,"asViewed":2},"children":[{"id":152,"name":"~inspect node:internal/util/inspect:308:17","fileName":"node:internal/util/inspect","functionName":"inspect","lineNumber":308,"columnNumber":17,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L308","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":2,"onStackTop":{"base":1,"asViewed":1},"children":[{"id":153,"name":"~formatValue node:internal/util/inspect:764:21","fileName":"node:internal/util/inspect","functionName":"formatValue","lineNumber":764,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L764","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":154,"name":"~formatRaw node:internal/util/inspect:842:19","fileName":"node:internal/util/inspect","functionName":"formatRaw","lineNumber":842,"columnNumber":19,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L842","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":0,"asViewed":0},"children":[{"id":155,"name":"~formatError node:internal/util/inspect:1366:21","fileName":"node:internal/util/inspect","functionName":"formatError","lineNumber":1366,"columnNumber":21,"target":"https://github.com/nodejs/node/blob/v20.8.0/lib/node:internal/util/inspect#L1366","type":"core","category":"core","isOptimized":false,"isUnoptimized":true,"isInlinable":false,"isInit":false,"value":1,"onStackTop":{"base":1,"asViewed":1},"children":[]}]}]}]}]}]}}
},{}],37:[function(require,module,exports){
'use strict'
const HtmlContent = require('./html-content.js')
const sidePanelExpand = require('@clinic/clinic-common/icons/sidepanel-expand')
const sidePanelCollapse = require('@clinic/clinic-common/icons/sidepanel-collapse')
const search = require('@clinic/clinic-common/icons/search')

const { button, checkbox, dropdown } = require('@clinic/clinic-common/base')

class FiltersContainer extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)

    this.getSpinner = contentProperties.getSpinner

    // layout wrappers
    this.d3Left = this.addContent('HtmlContent', {
      classNames: 'left-col col-wrapper'
    })

    this.d3Center = this.addContent('HtmlContent', {
      classNames: 'center-col col-wrapper'
    })

    this.d3Right = this.addContent('HtmlContent', {
      classNames: 'right-col col-wrapper'
    })

    // components
    this.d3Right.addContent('SearchBox', {
      id: 'search-box',
      classNames: 'inline-panel after-bp-2'
    })

    this.showSideBar = false

    this.ui.on('sideBar', show => {
      this.showSideBar = show
      this.draw()
    })

    this.ui.on('setData', () => {
      this.draw()
    })
    this.toggleSideBar = contentProperties.toggleSideBar.bind(this.ui)
  }

  initializeElements () {
    super.initializeElements()

    // App checkbox
    this.d3AppCheckBox = this.d3Center.d3Element.append('div')
      .classed('filter-option', true)
      .classed('key-app', true)
      .append('div')
      .classed('label-wrapper', true)
      .append(() =>
        checkbox({
          leftLabel: 'app',
          onChange: e => this.setCodeAreaVisibility('app', e.target)
        })
      )

    // Dependencies combo ****
    this.depsDropDown = dropdown({
      classNames: ['filter-option', 'key-deps'],
      label: checkbox({
        leftLabel: `<span class='after-bp-1'>Dependencies</span>
          <span class='before-bp-1'>Deps</span>`,
        onChange: e => this.setCodeAreaVisibility('deps', e.target)
      }),
      content: getChildrenHtml.bind(this, 'deps'),
      expandAbove: true
    })
    this.d3DepsCombo = this.d3Center.d3Element.append(() => this.depsDropDown)

    // TODO maybe disable if there are no wasm frames?
    this.d3WasmCheckBox = this.d3Center.d3Element.append('div')
      .classed('filter-option', true)
      .classed('key-wasm', true)
      .append('div')
      .classed('label-wrapper', true)
      .append(() =>
        checkbox({
          leftLabel: `<span class='after-bp-1'>WebAssembly</span>
            <span class='before-bp-1'>WASM</span>`,
          onChange: e => this.setCodeAreaVisibility('wasm', e.target)
        })
      )

    // NodeJS checkbox ****
    this.d3NodeCheckBox = this.d3Center.d3Element.append('div')
      .classed('filter-option', true)
      .classed('key-core', true)
      .append('div')
      .classed('label-wrapper', true)
      .append(() =>
        checkbox({
          leftLabel: `<span class='after-bp-1'>Node JS</span>
            <span class='before-bp-1'>Node</span>`,
          onChange: e => this.setCodeAreaVisibility('core', e.target)
        })
      )

    // V8 combo ****
    this.d3V8Combo = this.d3Center.d3Element.append(() => dropdown({
      classNames: ['filter-option', 'key-v8'],
      label: checkbox({
        leftLabel: 'V8',
        onChange: e => {
          this.setCodeAreaVisibility('all-v8', e.target)
        }
      }),
      content: getChildrenHtml.bind(this, 'all-v8'),
      expandAbove: true
    }))

    this.d3Right.d3Element
      .append(() => button({
        leftIcon: search,
        classNames: ['before-bp-2'],
        onClick: () => this.ui.toggleMobileSearchBox()
      }))

    this.optionsBp1 = button({
      classNames: ['sidebar-toggler', 'before-bp-1'],
      rightIcon: sidePanelExpand,
      onClick: () => this.toggleSideBar()
    })

    this.d3Right.d3Element
      .append(() => this.optionsBp1)

    this.optionsBp2 = button({
      classNames: ['sidebar-toggler', 'after-bp-1'],
      label: 'Options',
      rightIcon: sidePanelExpand,
      onClick: () => this.toggleSideBar()
    })
    this.d3Right.d3Element
      .append(() => this.optionsBp2)
  }

  setCodeAreaVisibility (key, checkboxElement) {
    const parent = checkboxElement.parentElement
    const checked = checkboxElement.checked
    parent.classList.add('pulsing')

    // Need to give the browser the time to actually execute spinner.show
    setTimeout(
      () => {
        const area = this.ui.dataTree.codeAreas
          .find(
            data => data.excludeKey === key
          )
        if (area) {
          this.ui.setCodeAreaVisibility({
            codeArea: area,
            visible: checked
          })
          this.ui.updateExclusions()
          this.ui.draw()
        } else {
          console.error('Could not find code area for', key, 'in', this.ui)
        }
        parent.classList.remove('pulsing')
      }
      , 15)
  }

  draw () {
    super.draw()

    this.optionsBp1.update({
      rightIcon: this.showSideBar ? sidePanelCollapse : sidePanelExpand
    })
    this.optionsBp2.update({
      rightIcon: this.showSideBar ? sidePanelCollapse : sidePanelExpand
    })

    // app
    this.d3AppCheckBox.select('input').node()
      .checked = !this.ui.dataTree.exclude.has('app')
    this.d3AppCheckBox.select('.checkbox-copy-label')
      .html(`
        <span class='after-bp-2'>
          ${this.ui.dataTree.appName}
        </span>
        <span class='before-bp-2'>App</span>
      `)

    this.d3WasmCheckBox.select('input').node()
      .checked = !this.ui.dataTree.exclude.has('wasm')

    // node js
    this.d3NodeCheckBox.select('input').node()
      .checked = !this.ui.dataTree.exclude.has('core')

    // deps
    const d3DepsInput = this.d3DepsCombo.select('input').node()
    const deps = this.ui.dataTree.codeAreas.find(
      data => data.excludeKey === 'deps'
    )
    this.depsDropDown.update({
      content: getChildrenHtml.bind(this, 'deps')
    })
    d3DepsInput.indeterminate = (() => {
      const { children } = deps
      if (!Array.isArray(children) || children.length === 0) {
        return false
      }
      const first = this.ui.dataTree.exclude.has(children[0].excludeKey)

      return children.some((child) => this.ui.dataTree.exclude.has(child.excludeKey) !== first)
    })()
    d3DepsInput.checked = (() => {
      if (deps.children && deps.children.length) {
        return deps.children.some((child) => {
          return !this.ui.dataTree.exclude.has(child.excludeKey)
        })
      }
      return !this.ui.dataTree.exclude.has(deps.excludeKey)
    })()

    // V8
    const d3V8Input = this.d3V8Combo.select('input').node()
    const V8 = this.ui.dataTree.codeAreas.find(
      data => data.excludeKey === 'all-v8'
    )
    d3V8Input.indeterminate = (() => {
      const { children } = V8
      if (!Array.isArray(children) || children.length === 0) {
        return false
      }
      const first = this.ui.dataTree.exclude.has(children[0].excludeKey)

      return children.some((child) => this.ui.dataTree.exclude.has(child.excludeKey) !== first)
    })()
    d3V8Input.checked = (() => {
      if (V8.children && V8.children.length) {
        return V8.children.some((child) => {
          return !this.ui.dataTree.exclude.has(child.excludeKey)
        })
      }
      return !this.ui.dataTree.exclude.has(V8.excludeKey)
    })()
  }
}

function getChildrenHtml (key) {
  const area = this.ui.dataTree.codeAreas
    .find(
      data => data.excludeKey === key
    )

  if (!area.children) return ''
  const list = area.children
    .map(d => {
      const elem = checkbox({
        rightLabel: d.label,
        checked: !this.ui.dataTree.exclude.has(d.excludeKey)
      })
      elem.querySelector('input').dataset.excludeKey = d.excludeKey

      return elem
    })

  const wrapper = document.createElement('div')

  list.forEach(l => wrapper.appendChild(l))

  wrapper.addEventListener('change', e => {
    const target = e.target
    const parent = target.parentElement
    parent.classList.add('pulsing')

    const codeArea = area.children.find(d => d.excludeKey === target.dataset.excludeKey)

    setTimeout(() => {
      this.ui.setCodeAreaVisibility({
        codeArea,
        visible: target.checked
      })

      this.ui.updateExclusions()
      this.ui.draw()
      parent.classList.remove('pulsing')
    }, 15)
  })

  return wrapper
}

module.exports = FiltersContainer

},{"./html-content.js":46,"@clinic/clinic-common/base":9,"@clinic/clinic-common/icons/search":28,"@clinic/clinic-common/icons/sidepanel-collapse":29,"@clinic/clinic-common/icons/sidepanel-expand":30}],38:[function(require,module,exports){
'use strict'

const HtmlContent = require('./html-content.js')
const { checkbox, accordion, helpers } = require('@clinic/clinic-common/base')

class FiltersContent extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)

    this.sections = null
    this.currentAccordion = null
    this.expandedSubAccordions = {}

    this.getSpinner = contentProperties.getSpinner

    this.ui.on('presentationMode', mode => {
      this.presentationMode = mode
      this.update()
      this.draw()
    })

    this.ui.on('updateExclusions', () => {
      this.update()
      this.draw()
    })

    this.ui.on('setData', () => {
      this.update()
      this.draw()
    })
  }

  update () {
    // Preferences
    this.sections = {
      preferences: [
        {
          id: 'presentation_mode',
          label: 'Presentation mode',
          checked: this.ui.presentationMode === true,
          value: false,
          onChange: (datum, event) => {
            this.ui.setPresentationMode(event.target.checked)
          }
        }
      ]
    }

    const data = this.ui.dataTree

    if (data) {
      const {
        codeAreas,
        useMerged,
        showOptimizationStatus,
        exclude
      } = data

      // Code Areas
      this.sections.codeAreas = codeAreas.map(area => {
        const dataCount = this.getDataCountFromKey(area.excludeKey)

        let disabled = data.disabled === true

        if (area.excludeKey === 'deps') {
          // checking Dependencies only
          disabled = dataCount === 0 || data.disabled === true
        }

        if (area.children) {
          area.children = area.children.map(c => {
            const child = Object.assign({}, c)
            child.label = this.ui.getLabelFromKey(child.excludeKey)
            child.description = this.ui.getDescriptionFromKey(child.excludeKey)
            child.checked = (() => {
              if (child.children) {
                return child.children.some((ch) => !exclude.has(ch.excludeKey))
              }
              return !exclude.has(child.excludeKey)
            })()
            child.onChange = (datum, event) => {
              this._onVisibilityChange(datum, event.target)
            }

            return child
          })
        }

        const checked = (() => {
          if (area.children && area.children.length) {
            return area.children.some((child) => !exclude.has(child.excludeKey))
          }
          return !exclude.has(area.excludeKey)
        })()

        const indeterminate = (() => {
          const { children } = area
          if (!Array.isArray(children) || children.length === 0) {
            return false
          }

          const first = exclude.has(children[0].excludeKey)
          return children.some((child) => exclude.has(child.excludeKey) !== first)
        })()

        return Object.assign({}, area, {
          label: this.ui.getLabelFromKey(area.excludeKey),
          description: this.ui.getDescriptionFromKey(area.excludeKey),
          disabled,
          checked,
          indeterminate,
          onChange: (datum, event) => {
            this._onVisibilityChange(datum, event.target)
          }
        })
      })

      // Advanced
      this.sections.advanced = [
        {
          id: 'option-init',
          label: 'Init',
          description: 'Show initialization operations hidden by default, like module loading',
          checked: !exclude.has('is:init'),
          onChange: (datum, event) => {
            this.ui.setCodeAreaVisibility({ excludeKey: 'is:init' }, event.target.checked)
            this.ui.draw()
          }
        },
        {
          id: 'option-usemergedtree',
          label: 'Merge',
          description: 'Join optimized and unoptimized versions of frames',
          checked: useMerged,
          onChange: (datum, event) => {
            this.ui.setUseMergedTree(event.target.checked)
            // Toggle "Show optimization status" disabled class if Merged enabled/disabled
            const showOptStatusId = this.sections.advanced[this.sections.advanced.length - 1].id
            const el = this.d3Advanced.select('#' + showOptStatusId)
            el.classed('disabled', event.target.checked)
          }
        },
        {
          id: 'option-showoptimizationstatus',
          label: 'Show optimization status',
          description: 'Highlight frames that are optimized functions',
          disabled: useMerged,
          checked: showOptimizationStatus,
          onChange: (datum, event) => {
            this.ui.setShowOptimizationStatus(event.target.checked)
          }
        }

      ]

      this.exclude = exclude
    }
  }

  initializeElements () {
    super.initializeElements()
    this.d3ContentWrapper
      .classed('filters-content', true)
      .classed('scroll-container', true)

    // creating the main sections
    // Code Areas
    this.d3CodeArea = this.d3ContentWrapper.append('div')
      .classed('code-area section', true)

    const visibilityAcc = accordion({
      label: 'Visibility by code area',
      isExpanded: true,
      content: '<ul class="options"></ul>',
      classNames: ['visibility-acc'],
      onClick: () => {
        this._exclusiveAccordion(visibilityAcc)
      }
    })
    this.d3CodeArea.append(() => visibilityAcc)
    this.currentAccordion = visibilityAcc

    // Advanced
    this.d3Advanced = this.d3ContentWrapper.append('div')
      .classed('advanced section', true)

    const advancedAcc = accordion({
      label: 'Advanced',
      content: '<ul class="options"></ul>',
      classNames: ['advanced-acc'],
      onClick: () => {
        this._exclusiveAccordion(advancedAcc)
      }
    })
    this.d3Advanced.append(() => advancedAcc)

    // Preferences
    this.d3Preferences = this.d3ContentWrapper.append('div')
      .classed('preferences section', true)

    const preferencesAcc = accordion({
      label: 'Preferences',
      content: '<ul class="options"></ul>',
      classNames: ['preferences-acc'],
      onClick: () => {
        this._exclusiveAccordion(preferencesAcc)
      }
    })
    this.d3Preferences.append(() => preferencesAcc)
  }

  getDataCountFromKey (key) {
    return this.ui.dataTree ? this.ui.dataTree.activeNodes().filter(n => n.category === key).length : 0
  }

  _exclusiveAccordion (clickedAccordion) {
    // auto collapses the previously expanded accordion
    (this.currentAccordion !== clickedAccordion) && this.currentAccordion.toggle(false)
    this.currentAccordion = clickedAccordion
  }

  _onVisibilityChange (datum, targetElement, updatingChildren) {
    const checked = targetElement.checked
    const parent = targetElement.parentElement

    parent.classList.add('pulsing')

    // Need to give the browser the time to apply the class
    setTimeout(
      () => {
        this.ui.setCodeAreaVisibility({
          codeArea: datum,
          visible: checked
        })
        this.ui.draw()
        parent.classList.remove('pulsing')
      }, 15)
  }

  _createListItems (items) {
    const fragment = document.createDocumentFragment()

    items.forEach(item => {
      const li = helpers.toHtml('<li></li>')
      fragment.appendChild(li)
      li.appendChild(this._createOptionElement(item))

      if (item.children && item.children.length > 0) {
        const childrenUl = helpers.toHtml('<ul></ul>')
        childrenUl.appendChild(this._createListItems(item.children))
        li.appendChild(childrenUl)

        if (item.childrenVisibilityToggle) {
          const acc = accordion({
            isExpanded: this.expandedSubAccordions[item.excludeKey] === true,
            classNames: [`${item.excludeKey}-show-all-acc`, 'nc-accordion--secondary'],
            label: `Show more (${item.children.length})`,
            content: childrenUl,
            onClick: (expanded) => {
              this.expandedSubAccordions[item.excludeKey] = expanded
            }
          })

          li.appendChild(acc)
        }
      }
    })

    return fragment
  }

  _createOptionElement (data) {
    const div = helpers.toHtml(`<div id="${data.id ? data.id : ''}" class="${data.excludeKey ? data.excludeKey.split(':')[0] : ''}"></div>`)

    div.appendChild(checkbox({
      checked: data.checked,
      disabled: data.disabled,
      indeterminate: data.indeterminate,
      rightLabel: `
        <span class="name">${data.label}</span>
        <description class="description">${data.description ? `- ${data.description}` : ''}</description>
      `,
      onChange: (event) => {
        data.onChange && data.onChange(data, event)
      }
    }))

    return div
  }

  draw () {
    super.draw()

    if (this.sections) {
      // Code Areas
      const codeAreas = this.sections.codeAreas.map(d => {
        return Object.assign({}, d, { children: d.children && d.children.length ? d.children : undefined })
      })
      let ul = this.d3CodeArea.select('ul').node()
      ul.innerHTML = ''
      ul.appendChild(this._createListItems(codeAreas))

      // Advanced
      ul = this.d3Advanced.select('ul').node()
      ul.innerHTML = ''
      ul.appendChild(this._createListItems(this.sections.advanced))

      // "Show optimization status" disabled class by default
      const showOptStatusId = this.sections.advanced[this.sections.advanced.length - 1].id
      const el = this.d3Advanced.select('#' + showOptStatusId)
      el.classed('disabled', true)

      // Preferences
      ul = this.d3Preferences.select('ul').node()
      ul.innerHTML = ''
      ul.appendChild(this._createListItems(this.sections.preferences))
    }
  }
}

module.exports = FiltersContent

},{"./html-content.js":46,"@clinic/clinic-common/base":9}],39:[function(require,module,exports){
'use strict'

function getFrameRenderer (bindTo) {
  return renderStackFrame.bind(bindTo)
}

function renderStackFrame (globals, locals, rect) {
  const {
    colorHash,
    STATE_IDLE
  } = globals
  const {
    context,
    node,
    state
  } = locals
  const {
    x,
    y,
    width,
    height
  } = rect

  const nodeData = node.data
  const thick = 3
  const thin = 1
  const lineWidth = this.ui.presentationMode ? thick : thin
  const heatHeight = Math.ceil(rect.height / (this.ui.presentationMode ? 2.5 : 3))

  // Do nothing for frames excluded by zoom, unless we're still animating
  if (nodeData.value === 0 && !this.isAnimating) return

  // Align with pixel grid to avoid fuzzy 2px lines of inconsistent stroke color
  // Round everything towards being smaller so lines don't draw over each other

  const left = Math.floor(x) + 1.5
  const right = Math.ceil(left + width) - 1.5
  const bottom = Math.floor(y + height) + 0.5
  const top = Math.ceil(y) - 0.5

  // Don't redraw heat over previous paint on hover events, and don't draw for root node
  const doDrawHeatBar = state === STATE_IDLE && nodeData.id !== 0
  if (doDrawHeatBar) {
    renderHeatBar(context, nodeData, colorHash, {
      x: left,
      y: top,
      width: Math.ceil(width) - 1.5,
      height: heatHeight
    })
  }

  const backgroundColor = this.ui.getFrameColor(nodeData, 'background')
  const foregroundColor = this.ui.getFrameColor(nodeData, 'foreground')

  context.fillStyle = backgroundColor

  context.beginPath()
  context.rect(left, y, width, height)

  context.save()

  // Make the very narrowest frames feinter relative to how narrow they are
  if (width > lineWidth) context.globalAlpha = Math.min(1, Math.max(width - lineWidth, 0.5) / lineWidth * 3)
  // Clear before fill so that even if very narrow frames are feint, height from below doesn't show through
  context.clearRect(left, y, Math.min(width, 0.1), height)
  context.fill()

  const visibleParent = this.getVisibleParent(node)
  if (!visibleParent) {
    context.restore()
    return
  }

  // Add a light stroke to left, bottom and right indicating code area

  const visibleSiblings = this.ui.dataTree.getVisibleChildren(visibleParent)

  const indexPosition = visibleSiblings.indexOf(node)
  const previousSibling = indexPosition > 0 ? visibleSiblings[indexPosition - 1] : null
  const nextSibling = visibleSiblings[indexPosition + 1] || null

  // .getNodeRect() is not yet accessible here because this is called while the d3-fg Flamegraph is being constructed
  // but actual pixel width can be calculated using available data
  const widthRatio = width / (node.x1 - node.x0)

  // On narrow frames with no fill between the two lines, fade lines relative to width. Is 1 if width > two lineWidths
  const thinFrameReducer = Math.min(1, (width || 0.1) / (lineWidth * 2))

  // For a narrow right-hand edge of a block of frames of the same code area...
  const rightEdgeReducer = (thinFrameReducer === 1 || !previousSibling || (!!nextSibling && sameArea(nodeData, nextSibling.data)))
    ? thinFrameReducer
    // ...fade as above, but based on the width of these same-area siblings, not just this node, so that
    // something like   [ someFunc    ./file.js ][ f ./file.js ][][]|||   gets a visible right hand edge
    : Math.min(1, visibleSiblings.slice(0, indexPosition).reduce((acc, sibling) => acc + (sameArea(nodeData, sibling.data) ? (sibling.x1 - sibling.x0) * widthRatio : 0), 0) / (lineWidth * 2))

  const alphaFull = this.ui.presentationMode ? 0.8 : 0.7
  const alphaReduced = this.ui.presentationMode ? 0.25 : 0.2

  const areaChangeBelow = !sameArea(nodeData, visibleParent.data)
  const areaChangeLeft = !previousSibling || !sameArea(nodeData, previousSibling.data)
  const areaChangeRight = !nextSibling || !sameArea(nodeData, nextSibling.data)

  const leftGapRemover = !areaChangeLeft && areaChangeBelow ? 1 : 0

  context.globalAlpha = (areaChangeBelow ? alphaFull : alphaReduced) * thinFrameReducer

  context.lineWidth = lineWidth

  context.strokeStyle = foregroundColor

  context.beginPath()
  context.moveTo(left - leftGapRemover, bottom - lineWidth)
  context.lineTo(right, bottom - lineWidth)
  context.stroke()

  context.lineWidth = lineWidth

  context.globalAlpha = (areaChangeLeft ? alphaFull : alphaReduced) * thinFrameReducer
  context.beginPath()
  context.lineWidth = thin
  context.moveTo(left, top)
  context.lineTo(left, bottom - (areaChangeBelow ? lineWidth : 0))
  context.stroke()

  context.globalAlpha = (areaChangeRight ? alphaFull : alphaReduced) * rightEdgeReducer
  context.beginPath()
  context.lineWidth = thin
  context.moveTo(right, bottom - (areaChangeBelow ? lineWidth : 0))
  context.lineTo(right, top)
  context.stroke()

  if (doDrawHeatBar) {
    // Complete the outline at any visible stack top by drawing along the entire top, under any children
    context.beginPath()
    context.moveTo(right, top)
    context.lineTo(right, top - heatHeight)
    context.lineTo(left, top - heatHeight)
    context.lineTo(left, top)
    context.stroke()

    context.globalAlpha = alphaReduced * thinFrameReducer
    context.beginPath()
    context.moveTo(left, top)
    context.lineTo(right, top)
    context.stroke()
  }

  context.restore()

  if (areaChangeBelow && areaChangeRight) {
    let priorSiblingWidth = 0

    for (let i = indexPosition - 1; i >= 0; i--) {
      if (!sameArea(nodeData, visibleSiblings[i].data)) {
        break
      }
      priorSiblingWidth += (visibleSiblings[i].x1 - visibleSiblings[i].x0) * widthRatio
    }

    this.labelArea({ context: this.overlayContext, node, state }, rect, priorSiblingWidth, lineWidth, alphaFull)
  }
}

function renderHeatBar (context, nodeData, colorHash, rect) {
  // Extracted from d3-fg so we can pixel-align it to match the rest
  const heatColor = colorHash(nodeData)
  const heatStrokeColor = colorHash(nodeData, 1.1)

  context.fillStyle = heatColor
  context.strokeStyle = heatStrokeColor
  context.beginPath()
  context.rect(rect.x, rect.y - rect.height, rect.width, rect.height)
  context.fill()
  context.stroke()
}

function sameArea (nodeDataA, nodeDataB) {
  return nodeDataA.type === nodeDataB.type && nodeDataA.category === nodeDataB.category
}

module.exports = getFrameRenderer

},{}],40:[function(require,module,exports){
'use strict'

function getFrameLabeler (bindTo) {
  return renderFrameLabel.bind(bindTo)
}

function getAreaLabeler (bindTo) {
  return renderAreaLabel.bind(bindTo)
}

function renderFrameLabel (frameHeight, options) {
  const {
    context,
    node,
    x,
    y,
    width
  } = options
  const nodeData = node.data

  // Don't spend any time in frames with less than one padding width between left/right padding
  if (this.labelPadding * 3 > width) return

  // keeping the same font-size used in the App (assuming the user didn't change the browser default font-size)
  const fontSize = 10 + this.zoomFactor
  const btmOffset = (frameHeight - fontSize) / 2
  const yBottom = y + frameHeight - btmOffset - 3

  context.font = `${fontSize}px ${this.labelFont}`
  context.fillStyle = this.ui.getFrameColor(nodeData, 'foreground')

  // Reverse text and background for any current search matches
  // Use root node as a zoom out button, blank when not zoomed in
  if (nodeData.id === 0) {
    if (!this.ui.zoomedNode) return

    const availableWidth = width - this.labelPadding * 2
    const xMid = x + availableWidth / 2 + this.labelPadding
    rootNodeLabel(context, xMid, yBottom, availableWidth, this.ui.dataTree.appName)
    return
  }

  // TODO - use truncated form of fileName e.g. no /node_modules/ if it's deps
  // Must have implemented the bars for code area changes first
  let fileName = nodeData.fileName
  let functionName = nodeData.functionName

  if (nodeData.isInlinable) functionName += ' (inlinable)'

  if (this.ui.dataTree.showOptimizationStatus && (nodeData.isOptimized || nodeData.isUnoptimized)) {
    functionName += ` (${nodeData.isOptimized ? 'opt.' : 'unopt.'})`
  }

  if (fileName === null) {
    if (nodeData.type === 'v8') fileName = 'Compiled V8 C++'
    if (nodeData.type === 'cpp') fileName = 'Compiled C++'
    if (nodeData.type === 'wasm') fileName = 'Compiled WebAssembly'
  }
  if (nodeData.category === 'deps') fileName = fileName.replace(/\.\.?[\\/]node_modules[\\/]/, '')

  const funcNameWidth = context.measureText(functionName).width
  const fileNameWidth = context.measureText(fileName).width

  // Truncate if there's not enough space for |[padding][functionName][  >= padding   ][fileName][padding]|
  const fullTextWidth = this.labelPadding * 3 + funcNameWidth + fileNameWidth

  if (fullTextWidth <= width) {
    // There's enough space. See if there's even space for :line:col like some/path/file.js:123:12
    // (C++ frames don't have line numbers)
    if (nodeData.lineNumber != null) {
      const lineAndColumn = `:${nodeData.lineNumber}:${nodeData.columnNumber}`
      const extraTextWidth = fullTextWidth + context.measureText(lineAndColumn).width

      fileName = extraTextWidth < width ? fileName + lineAndColumn : fileName
    }
  } else if (this.labelPadding * 4 + funcNameWidth > width) {
    // No file name at all if there's no space for more than one padding width's worth
    fileName = ''

    // See if the functionName itself needs truncating
    if (this.labelPadding * 2 + funcNameWidth > width) {
      const availableWidth = width - this.labelPadding * 2
      functionName = truncateFunctionName(context, availableWidth, functionName, funcNameWidth)
    }
  } else {
    // There's space for the filename but not the complete functionName
    // See if we can isolate a file name from its path and show just that
    const pathSeparator = this.ui.dataTree.pathSeparator
    const availableWidth = width - this.labelPadding * 3 - funcNameWidth
    fileName = truncateFileName(context, availableWidth, fileName, pathSeparator, nodeData)
  }

  const coords = {
    leftX: x + this.labelPadding,
    rightX: x + width - this.labelPadding,
    y: yBottom
  }
  drawLabel(context, functionName, fileName, coords)
}

function renderAreaLabel (locals, rect, priorSiblingWidth, lineWidth, lineAlpha) {
  if (this.isAnimating) return

  const {
    context,
    node
  } = locals
  const {
    x,
    y,
    width,
    height
  } = rect
  const nodeData = node.data

  const areaX = Math.ceil(x - priorSiblingWidth) + lineWidth
  const areaWidth = Math.floor(priorSiblingWidth + width)
  const xCentre = areaX + areaWidth / 2

  const fontSize = 6 + this.zoomFactor
  const availableWidth = priorSiblingWidth + width - fontSize

  if (availableWidth < fontSize) return

  const areaName = (
    nodeData.category === 'core'
      ? 'node'
      : nodeData.category === 'all-v8'
        ? this.ui.getLabelFromKey(this.ui.dataTree.getTypeKey(nodeData))
        : nodeData.type
  ).toUpperCase()
  const nameWidth = context.measureText(areaName).width
  const visibleName = truncateFunctionName(context, availableWidth, areaName, nameWidth)
  const visibleNameWidth = context.measureText(visibleName).width
  const yBottom = y + height

  const labelRect = {
    x: xCentre - visibleNameWidth / 2,
    width: visibleNameWidth,
    y: yBottom - fontSize,
    height: fontSize
  }

  if (!visibleName) return

  context.textBaseline = 'bottom'

  context.clearRect(areaX, labelRect.y, areaWidth, labelRect.height + lineWidth)

  const foregroundColor = this.ui.getFrameColor(nodeData, 'foreground')

  context.fillStyle = foregroundColor
  context.font = `bold ${fontSize}px ${this.labelFont}`
  context.textAlign = 'center'
  context.fillText(visibleName, xCentre, yBottom - lineWidth / 2)

  const visibleParent = this.getVisibleParent(node)
  if (visibleParent && nodeData.category !== visibleParent.data.category) {
    context.save()

    context.lineWidth = lineWidth
    context.strokeStyle = foregroundColor
    context.beginPath()

    context.moveTo(areaX, yBottom)
    context.lineTo(areaX + areaWidth, yBottom)

    context.stroke()
    context.closePath()

    context.globalAlpha = lineAlpha
    context.strokeStyle = this.ui.getFrameColor(visibleParent.data, 'foreground')
    context.beginPath()

    context.moveTo(areaX, yBottom + lineWidth / 2)
    context.lineTo(areaX + areaWidth, yBottom + lineWidth / 2)

    context.stroke()
    context.closePath()
    context.restore()
  }
}

function truncateFunctionName (context, availableWidth, functionName, funcNameWidth) {
  if (availableWidth >= funcNameWidth) return functionName

  const avCharWidth = funcNameWidth / functionName.length

  // Ensure there's reasonable space for at least one character plus an ellipsis
  availableWidth -= context.measureText('…').width
  if (availableWidth <= avCharWidth) return ''

  // Estimate how much truncation is likely needed, to reduce iterations
  const chars = Math.ceil(availableWidth / avCharWidth) + 1
  if (chars < functionName.length) functionName = functionName.slice(0, chars)

  while (functionName && context.measureText(functionName).width > availableWidth) {
    functionName = functionName.slice(0, functionName.length - 1)
  }

  // Add the ellipsis only if there's still at least one character
  return functionName ? functionName + '…' : ''
}

function truncateFileName (context, availableWidth, fileName, pathSeparator, nodeData) {
  if (nodeData.category === 'deps') {
    const removedDep = fileName.replace(new RegExp(`^${nodeData.type}[\\\\/]`), '…')
    if (context.measureText(removedDep).width <= availableWidth) return removedDep
  }

  let fileOnly = fileName.split(pathSeparator).pop()

  if (fileOnly === fileName) return ''

  fileOnly = '…' + fileOnly
  const fileOnlyWidth = context.measureText(fileOnly).width
  return fileOnlyWidth > availableWidth ? '' : fileOnly
}

function drawLabel (context, functionName, fileName, coords) {
  context.textAlign = 'left'
  context.fillText(functionName, coords.leftX, coords.y)

  if (fileName) {
    context.save()
    context.textAlign = 'right'
    context.fillText(fileName, coords.rightX, coords.y)
    context.restore()
  }
}

function rootNodeLabel (context, xMid, y, availableWidth, appName) {
  context.textAlign = 'center'

  let label = 'Return to main view'
  const labelWidth = context.measureText(label).width

  if (labelWidth > availableWidth) label = truncateFunctionName(context, availableWidth, label, labelWidth)

  context.fillText(label, xMid, y)
  context.restore()
}

module.exports = { getFrameLabeler, getAreaLabeler }

},{}],41:[function(require,module,exports){
'use strict'
const d3 = require('./d3.js')

class FgTooltipContainer {
  constructor ({ tooltip, tooltipHtmlContent, showDelay = 700, hideDelay = 200 }) {
    this.tooltip = tooltip
    this.ui = tooltip.ui

    this.tooltipHandler = null
    this.tooltipHtmlContent = tooltipHtmlContent

    this.d3TooltipHtml = tooltipHtmlContent.getTooltipD3()

    this.d3HiddenDiv = d3.select('body').select('.tooltipHiddenDiv', ':first-child')

    this.showDelay = showDelay
    this.hideDelay = hideDelay

    this.nodeData = null
    this.frameIsZoomed = false
  }

  show ({ nodeData, rect, pointerCoords, frameIsZoomed, wrapperNode, delay = null }) {
    // handling the timeout here because these calculations need to happen only when the tooltip gets actually displayed
    clearTimeout(this.tooltipHandler)

    // Cancel any pending highlight clearing callback e.g. from recent mouseout events
    this.tooltip.onHideCallback = null

    this.nodeData = nodeData

    this.tooltipHandler = setTimeout(() => {
      this.frameIsZoomed = frameIsZoomed

      const wrapperRect = wrapperNode.getBoundingClientRect()

      const offset = {
        x: wrapperRect.x - wrapperNode.scrollLeft,
        y: wrapperRect.y - wrapperNode.scrollTop - rect.height
      }

      // moving the tooltip html into the hidden div to get its size
      this.d3HiddenDiv.append(() => {
        const node = this.d3TooltipHtml.remove().node()
        return node
      })

      this.tooltipHtmlContent.setNodeData(this.nodeData)

      const pointerPosition = {
        x: pointerCoords.x - rect.x,
        y: pointerCoords.y - rect.y
      }

      this.tooltip.show({
        msg: this.d3TooltipHtml.node(),
        targetRect: rect,
        offset,
        pointerCoords: pointerPosition,
        outerRect: wrapperRect,
        showDelay: 0,
        verticalAlign: 'bottom'
      })
    }, typeof delay === 'number' ? delay : this.showDelay)
  }

  hide (args = {}) {
    clearTimeout(this.tooltipHandler)

    this.tooltip.hide(Object.assign({
      callback: () => {
        if (this.nodeData === this.ui.highlightedNode) this.ui.highlightNode(null)
      }
    }, args))
  }
}

module.exports = FgTooltipContainer

},{"./d3.js":35}],42:[function(require,module,exports){
'use strict'
const d3 = require('./d3.js')
const Message = require('./message.js')
const copy = require('copy-to-clipboard')
const zoomInIcon = require('@clinic/clinic-common/icons/zoom-in')
const zoomOutIcon = require('@clinic/clinic-common/icons/zoom-out')
const linkIcon = require('@clinic/clinic-common/icons/link')
const copyIcon = require('@clinic/clinic-common/icons/copy')

class FgTooltipContent {
  constructor (ui) {
    this.ui = ui
    this.tooltipHandler = null

    this.onCopyPath = (path) => {
      Message.info(`
          <span>Path copied to the clipboard!</span>
          <pre>${path}</pre>
        `, 4000)
      copy(path)
    }
    this.onOpenPath = (url) => {
      window.open(url, '_blank')
    }

    this.nodeData = null

    const html = `
      <button class='zoom-button'>
        <span class='icon'>${zoomInIcon}${zoomOutIcon}</span>
        <span class='label'>Expand</span>
      </button>
      <button class='link-button'>
        <span class='icon'>${linkIcon}</span>
        <span class='label'>Open in browser</span>
      </button>
      <button class='copy-button'>
        <span class='icon'>${copyIcon}</span>
        <span class='label'>Copy path</span>
      </button>
    `

    this.d3HiddenDiv = d3.select('body').insert('div', ':first-child')
      .classed('tooltipHiddenDiv', true)
      .style('visibility', 'hidden')
      .style('position', 'absolute')

    this.d3TooltipHtml = this.d3HiddenDiv.append('div')
      .classed('fg-tooltip-actions', true)
      .html(html)

    this.d3TooltipCopyBtn = this.d3TooltipHtml.select('.copy-button')
      .on('click', () => {
        this.onCopyPath(this.nodeData.target)
      })

    this.d3TooltipLinkBtn = this.d3TooltipHtml.select('.link-button')
      .on('click', () => {
        this.onOpenPath(this.nodeData.target)
      })

    this.d3TooltipZoomBtn = this.d3TooltipHtml.select('.zoom-button')
      .on('click', () => {
        this.ui.zoomNode(this.nodeData)
      })
  }

  setNodeData (nodeData) {
    this.nodeData = nodeData
    const isLink = /^https?:\/\//.test(this.nodeData.target)
    const frameIsZoomed = nodeData === this.ui.zoomedNode
    const hideCopyButton = !nodeData.target

    this.d3TooltipCopyBtn.classed('hidden', isLink || hideCopyButton)
    this.d3TooltipLinkBtn.classed('hidden', !isLink)

    this.d3TooltipZoomBtn.select('.label').text(frameIsZoomed ? 'Contract' : 'Expand')

    this.d3TooltipZoomBtn.classed('zoom-in', !frameIsZoomed)
    this.d3TooltipZoomBtn.classed('zoom-out', frameIsZoomed)
  }

  getTooltipD3 () {
    return this.d3TooltipHtml
  }
}

module.exports = FgTooltipContent

},{"./d3.js":35,"./message.js":50,"@clinic/clinic-common/icons/copy":25,"@clinic/clinic-common/icons/link":26,"@clinic/clinic-common/icons/zoom-in":31,"@clinic/clinic-common/icons/zoom-out":32,"copy-to-clipboard":59}],43:[function(require,module,exports){
'use strict'

// d3-fg is likely a temporary dep, most layout logic will move to analysis and
// most draw / interactivity logic will be replaced here
const d3Fg = require('d3-fg')
const HtmlContent = require('./html-content.js')

const FgTooltipContainer = require('./flame-graph-tooltip-container')
const {
  getFrameLabeler,
  getAreaLabeler
} = require('./flame-graph-label.js')
const getFrameRenderer = require('./flame-graph-frame.js')

const searchHighlightColor = 'orange'

class FlameGraph extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    const defaults = {
      showOptimizationStatus: false,
      labelFont: 'Archia, sans-serif',
      labelPadding: 3
    }
    contentProperties = Object.assign({}, defaults, contentProperties)
    super(parentContent, contentProperties)

    this.zoomFactor = contentProperties.zoomFactor
    this.zoomFactorChanged = true

    this.hoveredNodeData = null
    this.isAnimating = false
    this.baseCellHeight = this.ui.presentationMode ? 26 : 24
    this.cellHeight = this.baseCellHeight + this.zoomFactor
    this.sizeChanged = false

    this.tooltip = contentProperties.customTooltip
    this.tooltipHtmlContent = contentProperties.tooltipHtmlContent
    this.showOptimizationStatus = contentProperties.showOptimizationStatus

    this.labelFont = contentProperties.labelFont
    this.labelPadding = contentProperties.labelPadding

    this.onNextAnimationEnd = null

    this.ui.on('uiFontLoaded', () => {
      this.draw(true)
    })

    this.ui.on('setData', () => {
      this.initializeFromData()
    })

    this.ui.on('zoomNode', (node, cb) => {
      if (this.flameGraph) {
        if (cb) this.onNextAnimationEnd = cb

        this.clearOverlay()

        this.isAnimating = true
        this.zoomedNodeData = node

        // Hide tooltip and highlight box / pointer until .on('animationEnd')
        this.tooltip.hide()
        this.hoveredNodeData = null
        this.highlightHoveredNodeOnGraph()
        this.markNodeAsSelected(null)
        this.markNodeAsZoomed(null)
        this.flameGraph.zoom(node || this.ui.dataTree.activeTree())
      } else {
        if (cb) cb()
      }
    })

    this.ui.on('updateExclusions', () => {
      this.sort()
    })

    this.ui.on('clearSearch', () => {
      this.flameGraph.clear(searchHighlightColor)
    })

    this.ui.on('search', (query) => {
      this.flameGraph.search(query, searchHighlightColor)
    })
  }

  initializeElements () {
    super.initializeElements()
    this.d3Chart = this.d3Element.append('chart')
      .classed('flamegraph-outer', true)
      .classed('scroll-container', true)
      .style('position', 'relative')

    this.d3CanvasOverlay = this.d3Chart.append('canvas')
      .classed('flame-overlay', true)
    this.resetOverlayContext()

    // creating the component to highlight the hovered node on the flame graph
    this.d3Highlighter = this.d3Element.append('div')
      .classed('node-highlighter', true)
    this.d3HighlighterDownArrow = this.d3Highlighter.append('div')
      .classed('down-arrow', true)
    this.d3HighlighterVerticalLine = this.d3Highlighter.append('div')
      .classed('vertical-line', true)
    this.d3HighlighterBox = this.d3Element.append('div')
      .classed('highlighter-box', true)

    this.d3SelectionMarker = this.d3Element.append('div')
      .classed('selection-box', true)

    this.d3ZoomMarker = this.d3Element.append('div')
      .classed('zoom-underline', true)
      .classed('hidden', true)

    if (this.tooltip) {
      this.tooltip = new FgTooltipContainer({
        tooltip: this.tooltip,
        tooltipHtmlContent: this.tooltipHtmlContent
      })
    }

    this.ui.on('highlightNode', node => {
      this.hoveredNodeData = node || this.ui.selectedNode
      this.highlightHoveredNodeOnGraph()
    })

    this.ui.on('selectNode', node => {
      this.hoveredNodeData = node
      this.highlightHoveredNodeOnGraph()

      this.markNodeAsSelected(node)
    })

    // hiding the tooltip on scroll and moving the box
    this.d3Chart.node().addEventListener('scroll', () => {
      this.tooltip.hide({ delay: 0 })
      this.updateMarkerBoxes()
    })
  }

  initializeFromData () {
    const { dataTree } = this.ui

    this.renderedTree = dataTree.activeTree()

    this.labelArea = getAreaLabeler(this)

    this.flameGraph = d3Fg({
      tree: dataTree.activeTree(),
      exclude: dataTree.exclude,
      isNodeExcluded: node => {
        return this.ui.dataTree.isNodeExcluded(node.data)
      },
      element: this.d3Chart.node(),
      cellHeight: this.cellHeight,
      collapseHiddenNodeWidths: true,
      minHeight: this.d3Element.node().clientHeight,
      frameColors: {
        fill: '#000',
        stroke: '#363b4c'
      },
      // We already categorized nodes during analysis
      categorizer: (node) => ({ type: node.type }),
      width: this.d3Element.node().clientWidth,
      height: undefined, // we need to improve the way the canvas height gets calculated in d3-fg
      renderTooltip: this.tooltip && null, // disabling the built-in tooltip if another tooltip is defined
      colorHash: (stackTop, { d, decimalAdjust, allSamples, tiers }) => {
        return this.ui.dataTree.getHeatColor(d)
      },
      clickHandler: null,
      renderLabel: getFrameLabeler(this),
      renderStackFrameBox: getFrameRenderer(this)
    })

    this.sort()

    const wrapperNode = this.d3Chart.node()
    this.flameGraph.on('dblClick', (nodeData) => {
      this.ui.zoomNode(nodeData)
    })

    this.flameGraph.on('click', (nodeData, rect, pointerCoords) => {
      if (nodeData) {
        // Treat root node as a zoom out button
        if (nodeData.id === 0) {
          if (this.ui.zoomedNode) this.ui.zoomNode(null)
          return
        }

        // Show (and hide) tooltip instantly on click, no waiting for timeouts
        if (this.tooltip) {
          this.tooltip.show({
            nodeData,
            rect,
            pointerCoords,
            frameIsZoomed: this.zoomedNodeData === nodeData,
            wrapperNode,
            delay: 0
          })
        }

        this.ui.selectNode(nodeData)
      } else {
        if (this.tooltip) this.tooltip.hide({ delay: 0 })

        this.ui.zoomNode(null)
      }
    })

    this.flameGraph.on('hoverin', (nodeData, rect, pointerCoords) => {
      if (nodeData.id === 0) return

      this.hoveredNodeData = nodeData
      this.ui.highlightNode(nodeData)

      if (this.tooltip) {
        this.tooltip.show({
          nodeData,
          rect,
          pointerCoords,
          frameIsZoomed: this.zoomedNodeData === nodeData,
          wrapperNode
        })
      }
    })

    this.flameGraph.on('hoverout', (node) => {
      if (this.tooltip) {
        this.tooltip.hide()
      }
    })

    this.flameGraph.on('animationEnd', () => {
      // Update selection marker with new node position and size
      this.markNodeAsSelected(this.ui.selectedNode)
      this.isAnimating = false

      // Show tooltip and highlight box for zoomed node after zoom completes
      if (this.ui.zoomedNode && this.ui.zoomedNode.id !== 0) {
        if (this.tooltip) {
          const rect = this.getNodeRect(this.ui.zoomedNode)
          this.tooltip.show({
            nodeData: this.ui.zoomedNode,
            rect,
            frameIsZoomed: true,
            wrapperNode: this.d3Chart.node(),
            pointerCoords: {
              x: rect.x + rect.width / 2,
              y: rect.y + rect.height
            },
            delay: 100
          })
        }
        this.ui.highlightNode(this.ui.zoomedNode)
        this.markNodeAsZoomed(this.ui.zoomedNode)
      } else {
        this.hoveredNodeData = this.ui.highlightedNode || this.ui.selectedNode
        this.highlightHoveredNodeOnGraph()
      }

      if (this.onNextAnimationEnd) {
        this.onNextAnimationEnd()
        this.onNextAnimationEnd = null
      }

      this.flameGraph.update()
    })

    // triggering the resize after the canvas rendered to take possible scrollbars into account
    this.resize(this.zoomFactor)
  }

  getNodeRect (node) {
    // Get an override for non-standard nodes e.g. from no-data-node.js
    if (node.getNodeRect) return node.getNodeRect()

    // Get a { x, y, width, height } object from d3-fg for regular nodes
    return this.flameGraph.getNodeRect(node)
  }

  getVisibleParent (d3Node) {
    if (!d3Node.parent) return null
    return d3Node.parent.data.hide ? this.getVisibleParent(d3Node.parent) : d3Node.parent
  }

  highlightHoveredNodeOnGraph () {
    if (this.hoveredNodeData === null) {
      this.d3Highlighter.classed('show', false)
      this.d3HighlighterBox.classed('show', false)
      return
    }

    const rect = this.getNodeRect(this.hoveredNodeData)
    if (rect) {
      this.d3Highlighter.classed('show', true)
      this.applyRectToDiv(this.d3Highlighter, rect, true)

      this.d3HighlighterBox.classed('show', true)
      this.applyRectToDiv(this.d3HighlighterBox, {
        // Align border inside frame so it's visible against borders, heat etc
        x: rect.x + Math.min(rect.width - 3, 2),
        y: rect.y,
        width: Math.max(rect.width - 2, 3),
        height: rect.height - 2
      })
    } else {
      this.d3Highlighter.classed('show', false)
      this.d3HighlighterBox.classed('show', false)
    }
  }

  markNodeAsSelected (node = null) {
    this.d3SelectionMarker.classed('hidden', !node)

    if (node) {
      const rect = this.getNodeRect(node)

      this.applyRectToDiv(this.d3SelectionMarker, Object.assign({}, {
        // Ensure marker is visible on tiny frames
        width: rect.width < 2 ? 2 : rect.width
      }, rect))
    }
  }

  markNodeAsZoomed (node = null) {
    this.d3ZoomMarker.classed('hidden', !node)

    if (node) {
      const rect = this.getNodeRect(node)
      this.applyRectToDiv(this.d3ZoomMarker, {
        x: rect.x,
        y: rect.y + rect.height * 4,
        width: rect.width,
        height: rect.height * 4
      })
    }
  }

  applyRectToDiv (d3Div, rect, aboveRect = false) {
    const scrollTop = this.d3Chart.node().scrollTop

    // If aboveRect flag is true, draws this div extending up from the top of the rectangle
    const translate = aboveRect ? `translateX(${rect.x}px)` : `translate3d(${rect.x}px, ${rect.y - scrollTop - rect.height}px, 0)`
    const height = aboveRect ? rect.y - scrollTop - rect.height : rect.height

    d3Div
      .style('width', rect.width + 'px')
      .style('height', (height < 0 ? 0 : height) + 'px')
      .style('transform', translate)
  }

  updateMarkerBoxes () {
    this.highlightHoveredNodeOnGraph()
    this.markNodeAsSelected(this.ui.selectedNode)
    if (this.ui.zoomedNode) this.markNodeAsZoomed(this.ui.zoomedNode)
  }

  resetOverlayContext () {
    // Scales the context; and any change to <canvas> width/height attr resets the context content and properties
    const height = this.flameGraph ? this.flameGraph.height() : this.d3Chart.node().getBoundingClientRect().height
    const devicePixelRatio = window.devicePixelRatio

    this.d3CanvasOverlay.style('height', height + 'px')
    this.d3CanvasOverlay.style('width', this.width + 'px')

    this.d3CanvasOverlay.attr('height', height * devicePixelRatio)
    this.d3CanvasOverlay.attr('width', this.width * devicePixelRatio)

    const context = this.d3CanvasOverlay.node().getContext('2d')
    context.scale(window.devicePixelRatio, window.devicePixelRatio)
    this.overlayContext = context
  }

  clearOverlay () {
    // Simply clear without rescaling or resetting other properties
    const overlay = this.d3CanvasOverlay.node()
    const devicePixelRatio = window.devicePixelRatio

    this.overlayContext.clearRect(0, 0, overlay.width * devicePixelRatio, overlay.height * devicePixelRatio)
  }

  resize (zoomFactor = 0) {
    this.zoomFactorChanged = this.zoomFactor !== zoomFactor
    this.zoomFactor = zoomFactor

    this.baseCellHeight = this.ui.presentationMode ? 26 : 24
    const width = this.d3Chart.node().clientWidth

    const cellHeight = this.baseCellHeight + zoomFactor
    const minHeight = this.d3Element.node().clientHeight
    this.sizeChanged = this.width !== width || this.cellHeight !== cellHeight || this.minHeight !== minHeight
    this.width = width
    this.cellHeight = cellHeight
    this.minHeight = minHeight

    this.draw()
    this.updateMarkerBoxes()
  }

  sort () {
    const sorter = this.ui.dataTree.getFilteredStackSorter()
    if (this.flameGraph) {
      this.flameGraph.sort((a, b) => {
        return sorter(a.data, b.data)
      })
    }
  }

  draw (forceRedraw = false) {
    super.draw()

    const { dataTree } = this.ui

    if (this.sizeChanged) {
      this.flameGraph.cellHeight(this.cellHeight)
      this.flameGraph.minHeight(this.minHeight)
      this.resetOverlayContext()
      // Order matters: setting overlay's width/height attrs wipes canvas, flameGraph.width() redraws it
      this.flameGraph.width(this.width)

      this.sizeChanged = false
    }

    let redrawGraph = forceRedraw

    if (this.renderedTree !== dataTree.activeTree()) {
      this.renderedTree = dataTree.activeTree()
      redrawGraph = true
    }

    if (this.showOptimizationStatus !== dataTree.showOptimizationStatus) {
      this.showOptimizationStatus = dataTree.showOptimizationStatus
      redrawGraph = true
    }

    const { toHide, toShow } = this.ui.changedExclusions
    let isChanged = false

    if (this.zoomFactorChanged) {
      redrawGraph = true
      this.zoomFactorChanged = false
    }

    if (toHide.size > 0 || toShow.size > 0) isChanged = true
    if (isChanged || redrawGraph) this.clearOverlay()

    // Must re-render tree before applying exclusions, else error if tree and exclusions change at same time
    if (redrawGraph) this.flameGraph.renderTree(this.renderedTree)

    toHide.forEach((name) => {
      this.flameGraph.typeHide(name)
    })
    toShow.forEach((name) => {
      this.flameGraph.typeShow(name)
    })

    if (isChanged || redrawGraph) this.updateMarkerBoxes()
  }
}

module.exports = FlameGraph

},{"./flame-graph-frame.js":39,"./flame-graph-label.js":40,"./flame-graph-tooltip-container":41,"./html-content.js":46,"d3-fg":65}],44:[function(require,module,exports){
const EventEmitter = require('events')
const qs = require('querystringify')

class History extends EventEmitter {
  constructor () {
    super()

    this.availableExclusions = []

    /* istanbul ignore next: not available in node.js tests */
    if (typeof window !== 'undefined') {
      // Using `hashchange` rather than `popstate` so manually
      // fiddling with the hash works
      window.addEventListener('hashchange', (event) => {
        const hash = event.newURL.replace(/^.*?#/, '')
        if (hash) {
          this.emit('change', this.deserialize(hash))
        }
      })
    }
  }

  /* istanbul ignore next: no test for this yet */
  setData (dataTree) {
    const { codeAreas } = dataTree
    // Manually populate special quasi-categories
    this.availableExclusions = [
      'is:init',
      'is:inlinable'
    ]

    codeAreas.forEach((group) => {
      this.availableExclusions.push(group.excludeKey)
      if (Array.isArray(group.children)) {
        group.children.forEach((area) => {
          this.availableExclusions.push(area.excludeKey)
        })
      }
    })

    /* istanbul ignore next: browser only */
    if (window.location.hash) {
      this.emit('change', this.deserialize(window.location.hash.replace(/^#/, '')))
    }
  }

  /* istanbul ignore next: browser only */
  push (params, opts) {
    const hash = this.serialize(params)
    const path = `${window.location.pathname}#${hash}`
    if (opts.replace) {
      window.history.replaceState({ hash }, null, path)
    } else {
      window.history.pushState({ hash }, null, path)
    }
  }

  serializeExcludes (exclude) {
    if (!(exclude instanceof Set)) throw new TypeError('`exclude` argument must be a Set')

    const bits = this.availableExclusions
      .map((name) => exclude.has(name) ? '1' : '0')
      .join('')

    // serialize in groups of 16 bits (4 hex characters)
    // this way we can have more groups than there are (reliable) bits in a JS number.
    const groups = []
    const groupSize = Math.pow(2, 4)
    for (let i = 0; i < bits.length; i += groupSize) {
      // If there are less than 16 bits left, we add some dummy 0s at the end which
      // are ignored by deserializeExcludes().
      const word = bits.slice(i, i + groupSize)
        .padEnd(groupSize, '0')
      groups.push(parseInt(word, 2).toString(16))
    }
    return groups.join('-')
  }

  deserializeExcludes (string) {
    const bits = []
    const groupSize = Math.pow(2, 4)
    const groups = string.split('-')
    groups.forEach((group, i) => {
      const groupBits = parseInt(group, 16).toString(2)
        // The leading 0s were dropped in the parseInt(2).toString(16) serialization dance
        // in serializeExcludes(), add them back.
        .padStart(groupSize, '0')
        .split('')
        .map((n) => n === '1')
      bits.push(...groupBits)
    })

    const exclude = new Set()
    this.availableExclusions.forEach((name, i) => {
      if (bits[i]) {
        exclude.add(name)
      }
    })
    return exclude
  }

  /* istanbul ignore next: no test for this yet */
  deserialize (query) {
    const params = qs.parse(query)
    const exclude = this.deserializeExcludes(params.exclude)
    const useMerged = params.merged === 'true'
    const showOptimizationStatus = params.showOptimizationStatus === 'true'
    const selectedNodeId = parseInt(params.selectedNode, 10)
    const zoomedNodeId = parseInt(params.zoomedNode, 10)
    const search = params.search || null
    const walkthroughIndex = params.walkthroughIndex ? parseInt(params.walkthroughIndex) : undefined
    return {
      exclude,
      useMerged,
      showOptimizationStatus,
      selectedNodeId,
      zoomedNodeId,
      search,
      walkthroughIndex
    }
  }

  /* istanbul ignore next: no test for this yet */
  serialize ({
    exclude,
    useMerged,
    showOptimizationStatus,
    selectedNodeId,
    zoomedNodeId,
    search,
    walkthroughIndex
  }) {
    const params = {
      selectedNode: selectedNodeId,
      zoomedNode: zoomedNodeId,
      exclude: this.serializeExcludes(exclude)
    }

    // Only add the below params if they contain information, to avoid cluttering
    // the hash with empty strings and falses.
    if (search != null && search !== '') {
      params.search = search
    }

    if (walkthroughIndex !== undefined) {
      params.walkthroughIndex = walkthroughIndex
    }
    if (useMerged) {
      params.merged = true
    }
    if (showOptimizationStatus) {
      params.showOptimizationStatus = true
    }

    return qs.stringify(params)
  }
}

module.exports = History

},{"events":78,"querystringify":83}],45:[function(require,module,exports){
'use strict'

// This lookup object of HTML content types is necessary to prevent circular dependencies
// e.g. if an A contains a B which contains an A
module.exports = {
  // Parent class, for generic HTML content with optional collapse, load indicator, etc
  HtmlContent: require('./html-content.js'),

  // Sub classes which extend HtmlContent
  Key: require('./key.js'),
  FlameGraph: require('./flame-graph.js'),
  Tooltip: require('./tooltip.js'),
  SearchBox: require('./search-box.js'),
  StackBar: require('./stack-bar.js'),
  SelectionControls: require('./selection-controls.js'),
  InfoBox: require('./info-box.js'),
  FiltersContainer: require('./filters-bar.js'),
  FiltersContent: require('./filters-content.js'),
  SideBar: require('./side-bar.js')

  // TODO: add these ↴
  // FrameInfo: require('./frame-info.js'),
  // HoverBox: require('./hover-box.js'),
  // IndicatorArrow: require('./indicator-arrow.js'),
  // TimeFilter: require('./time-filter.js'),
}

},{"./filters-bar.js":37,"./filters-content.js":38,"./flame-graph.js":43,"./html-content.js":46,"./info-box.js":47,"./key.js":48,"./search-box.js":52,"./selection-controls.js":53,"./side-bar.js":54,"./stack-bar.js":55,"./tooltip.js":56}],46:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')

// TODO: This could be migrated to https://github.com/clinicjs/node-clinic-common/ when stable
// and shared with Bubbleprof and also, later, with Doctor

// Base class for HTML content, extended by specific types of UI item
// Only initializeElement() and draw() modify the DOM

let counter = 0

class HtmlContent {
  constructor (parentContent = null, contentProperties = {}, ui = parentContent.ui, wrapperSelector = 'body') {
    this.ui = ui
    this.parentContent = parentContent

    this.wrapperSelector = wrapperSelector

    const defaultProperties = {
      id: null,
      name: null,
      hidden: false,
      htmlElementType: 'div',
      htmlContent: '',
      classNames: '',
      title: '',
      eventHandler: null
    }
    this.contentProperties = Object.assign(defaultProperties, contentProperties)
    this.isHidden = this.contentProperties.hidden

    this.collapseControl = null
    this.loadingAnimation = null

    this.content = new Map()
    this.contentIds = []
  }

  addContent (className = 'HtmlContent', contentProperties = {}, prepend = false) {
    const ContentClass = this.ui.getContentClass(className)
    const item = new ContentClass(this, contentProperties)

    if (contentProperties.id && this.content.has(contentProperties.id)) {
      throw new Error(`Duplicate ID ${contentProperties.id} on content ${this.id}`)
    }

    const identifier = contentProperties.id || className + (counter++)

    this.content.set(identifier, item)
    this.contentIds[prepend ? 'unshift' : 'push'](identifier)
    return item
  }

  addCollapseControl (collapsedByDefault = false, contentProperties = {}) {
    this.collapseControl = new CollapseControl(this, contentProperties, collapsedByDefault)
    return this.collapseControl
  }

  collapseOpen () {
    this.collapseChange(false)
  }

  collapseClose () {
    this.collapseChange(true)
  }

  collapseToggle () {
    this.collapseChange()
  }

  collapseChange (closeBool) {
    if (!this.collapseControl) return
    if (typeof closeBool === 'undefined') closeBool = !this.collapseControl.isCollapsed

    // If this is opening and has a collapseEvent, close everything else with same event
    const collapseEvent = this.collapseControl.collapseEvent
    if (!closeBool && collapseEvent) this.ui.collapseEvent(collapseEvent)

    this.collapseControl.isCollapsed = closeBool
    this.draw()
  }

  addLoadingAnimation (contentProperties = {}) {
    this.loadingAnimation = new LoadingAnimation(this, contentProperties)
    return this.loadingAnimation
  }

  // Initial creation of elements independent of data and layout, before .setData() is called
  initializeElements (skipContent = false) {
    const {
      htmlContent,
      htmlElementType,
      element,
      id,
      classNames,
      title,
      eventHandler
    } = this.contentProperties

    const d3ParentElement = this.parentContent ? this.parentContent.d3ContentWrapper : d3.select(this.wrapperSelector)

    this.d3Element = element ? d3.select(element) : d3ParentElement.append(htmlElementType)

    this.d3ContentWrapper = this.d3Element

    if (this.collapseControl) {
      this.collapseControl.initializeElements()
      this.d3ContentWrapper = this.d3Element.append('div')
        .classed('collapsible-content-wrapper', true)

      if (id) this.d3ContentWrapper.attr('id', `${id}-inner`)

      if (this.collapseControl.closeIcon) {
        this.d3ContentWrapper.insert('span', ':first-child')
          .html(this.collapseControl.closeIcon)
          .classed('close', true)
          .classed('portrait-only', this.collapseControl.portraitOnly)
          .on('click', () => this.collapseClose())
      }
    }

    if (this.loadingAnimation) this.loadingAnimation.initializeElements()

    if (id) this.d3Element.attr('id', id)
    if (title) this.d3Element.attr('title', title)
    if (classNames) this.d3Element.classed(classNames, true)
    if (htmlContent && !skipContent) this.d3ContentWrapper.html(htmlContent)

    if (eventHandler) {
      this.d3Element.on(eventHandler.name, () => {
        eventHandler.func()
      })
    }

    for (const id of this.contentIds) {
      this.content.get(id).initializeElements()
    }
  }

  draw () {
    this.d3Element.classed('hidden', this.isHidden)

    if (this.collapseControl) this.collapseControl.draw()
    if (this.loadingAnimation) this.loadingAnimation.draw()

    if (!this.isHidden) {
      for (const item of this.content.values()) {
        item.draw()
      }
    }
  }
}

class CollapseControl extends HtmlContent {
  constructor (parentContent, contentProperties, collapsedByDefault) {
    super(parentContent, contentProperties)

    this.collapsedByDefault = collapsedByDefault
    this.isCollapsed = collapsedByDefault

    this.closeIcon = contentProperties.closeIcon || null
    this.collapseEvent = contentProperties.collapseEvent || null

    this.portraitOnly = contentProperties.portraitOnly || false
    this.collapseClassName = this.portraitOnly ? 'portrait-collapsed' : 'collapsed'
  }

  initializeElements () {
    super.initializeElements()

    this.d3Element.classed('collapse-control', true)
    this.parentContent.d3Element.classed(this.collapseClassName, this.isCollapsed)

    if (this.portraitOnly) this.d3Element.classed('portrait-only', true)

    if (this.collapseEvent) {
      this.ui.on(`collapse-${this.collapseEvent}`, (closeBool) => {
        this.parentContent.collapseClose()
      })
    }

    this.d3Element.on('click', () => {
      this.parentContent.collapseToggle()
    })
  }

  draw () {
    super.draw()
    this.parentContent.d3Element.classed(this.collapseClassName, this.isCollapsed)
  }
}

class LoadingAnimation extends HtmlContent {
  initializeElements () {
    super.initializeElements()
    this.d3Element.classed('loading-indicator', true)

    this.ui.on('complete', () => {
      this.isHidden = true
      this.draw()
    })
  }
}

module.exports = HtmlContent

},{"./d3.js":35}],47:[function(require,module,exports){
'use strict'
const d3 = require('./d3.js')
const HtmlContent = require('./html-content.js')
const getNoDataNode = require('./no-data-node.js')
const caretUpIcon = require('@clinic/clinic-common/icons/caret-up')

const stripTags = html => html.replace(/(<([^>]+)>)/ig, '')

const addResponsiveSpan = str => `<span class="visible-md">${str}</span>`

const wrapTooltipText = text =>
  d3.create('span')
    .classed('tooltip-default-message frame-tooltip', true)
    .text(text)
    .node()

class InfoBox extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)
    this.tooltip = contentProperties.customTooltip

    const {
      functionName,
      fileName
    } = getNoDataNode()

    this.functionText = functionName
    this.pathHtml = fileName
    this.areaHtml = 'Processing data...'
    this.stackPercentages = {
      top: 0,
      overall: 0
    }

    this.addCollapseControl(true, {
      classNames: 'frame-dropdown',
      htmlElementType: 'button',
      htmlContent: `<span>0%</span> ${caretUpIcon}`
    })
  }

  initializeElements () {
    super.initializeElements()

    // Initialize frame info
    this.d3FrameInfo = this.d3Element.append('div')
      .classed('frame-info', true)
      .classed('panel', true)

    this.d3FrameFunction = this.d3FrameInfo.append('strong')
      .classed('frame-info-item', true)
      .classed('frame-function', true)
    this.tooltip.attach({
      msg: () => wrapTooltipText(this.functionText),
      d3TargetElement: this.d3FrameFunction
    })

    this.d3FramePath = this.d3FrameInfo.append('span')
      .classed('frame-info-item', true)
      .classed('frame-path', true)
    this.tooltip.attach({
      msg: () => wrapTooltipText(stripTags(this.pathHtml)),
      d3TargetElement: this.d3FramePath
    })

    this.d3FrameArea = this.d3FrameInfo.append('span')
      .classed('frame-info-item', true)
      .classed('frame-area', true)
    this.tooltip.attach({
      msg: () => wrapTooltipText(stripTags(this.areaHtml)),
      d3TargetElement: this.d3FrameArea
    })

    this.d3StackInfoTitle = this.d3ContentWrapper
      .append('h2')
      .text('Stack info')

    this.d3StackPercentageTop = this.d3ContentWrapper
      .append('p')
      .classed('frame-percentage', true)
      .classed('frame-percentage-top', true)
      .text('0%')

    this.d3StackPercentageOverall = this.d3ContentWrapper
      .append('p')
      .classed('frame-percentage', true)
      .classed('frame-percentage-overall', true)
      .text('0%')

    this.d3CollapseButton = this.collapseControl.d3Element
      .attr('title', 'Show stack info')

    // Close when the user clicks outside the options menu.
    document.body.addEventListener('click', (event) => {
      if (!this.collapseClose.isCollapsed &&
          !this.d3CollapseButton.node().contains(event.target) &&
          !this.d3ContentWrapper.node().contains(event.target)) {
        this.collapseClose()
      }
    },
    true)
  }

  contentFromNode (node) {
    if (!node) {
      console.error('`node` argument cannot be undefined/null')
      return
    }

    // Todo: Use visibleRootValue when ready
    const totalValue = this.ui.dataTree.activeTree().value

    this.stackPercentages = {
      top: Math.round(100 * (node.onStackTop.asViewed / totalValue) * 10) / 10,
      overall: Math.round(100 * (node.value / totalValue) * 10) / 10
    }

    this.functionText = node.functionName
    this.pathHtml = ''

    if (node.fileName) {
      const fileNameParts = (node.fileName || '').split('/')
      const baseName = fileNameParts.pop()
      const prefix = fileNameParts.join('/')

      this.pathHtml = `${addResponsiveSpan(`${prefix}/`)}${baseName}`
    }

    if (node.lineNumber && node.columnNumber) {
      // Two spaces (in <pre> tag) so this is visually linked to but distinct from main path, including when wrapped
      this.pathHtml += `<span class="frame-line-col">${addResponsiveSpan('  line')}:${node.lineNumber}${addResponsiveSpan(' column')}:${node.columnNumber}</span>`
    }

    this.rankNumber = this.ui.dataTree.getSortPosition(node)

    const typeLabel = node.category === 'core' ? '' : ` (${this.ui.getLabelFromKey(`${node.category}:${node.type}`, true)})`
    const categoryLabel = this.ui.getLabelFromKey(node.category, true)

    this.areaHtmlColour = this.ui.getFrameColor(
      {
        category: node.category
      },
      'foreground',
      false
    )

    // e.g. The no-data-node has an .areaText containing a custom message
    this.areaHtml = node.areaText || `${addResponsiveSpan(`In ${categoryLabel} `)}${typeLabel}`

    if (node.isInit) this.areaHtml += '. In initialization process'
    if (node.isInlinable) this.areaHtml += '. Inlinable'
    if (node.isUnoptimized) this.areaHtml += '. Unoptimized'
    if (node.isOptimized) this.areaHtml += '. Optimized'

    this.areaHtml += addResponsiveSpan('.')

    this.draw()
  }

  showNodeInfo (node) {
    this.contentFromNode(node)
  }

  draw () {
    super.draw()

    this.d3FrameFunction
      .text(this.functionText)

    this.d3FramePath
      .html(this.pathHtml)

    this.d3FrameArea
      .html(this.areaHtml)
      .style('color', this.areaHtmlColour)

    this.d3CollapseButton
      .select('span')
      .text(`${this.stackPercentages.top}%`)

    this.d3StackPercentageTop
      .text(`Top of stack: ${this.stackPercentages.top}%`)

    this.d3StackPercentageOverall
      .text(`On stack: ${this.stackPercentages.overall}%`)
  }
}

module.exports = InfoBox

},{"./d3.js":35,"./html-content.js":46,"./no-data-node.js":51,"@clinic/clinic-common/icons/caret-up":15}],48:[function(require,module,exports){
'use strict'

const HtmlContent = require('./html-content.js')

class Key extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)

    this.app = 'Profiled app'
    this.deps = 'Dependencies'
    this.core = 'Node Core'
  }

  initializeElements () {
    super.initializeElements()

    this.d3Title = this.d3Element.append('div')
      .classed('key-title', true)

    this.d3Key1 = this.d3Element.append('div')
      .classed('key', true)
      .text(this.app)
    this.d3Key2 = this.d3Element.append('div')
      .classed('key', true)
      .text(this.deps)
    this.d3Key3 = this.d3Element.append('div')
      .classed('key', true)
      .text(this.core)

    this.ui.on('setData', () => {
      this.setData()
    })

    this.ui.on('presentationMode', () => { this.draw() })
  }

  setData () {
    const {
      appName = 'app'
    } = this.ui.dataTree
    this.appName = appName

    this.draw()
  }

  draw () {
    super.draw()

    const showOpt = this.ui.dataTree.showOptimizationStatus

    this.d3Key1
      .text(showOpt ? 'Unoptimized' : this.appName)
      .style('color', this.ui.getFrameColor({
        category: 'app',
        isUnoptimized: true
      }, 'foreground', false))

    this.d3Key2
      .text(showOpt ? 'Optimized' : this.deps)
      .style('color', this.ui.getFrameColor({
        category: 'deps',
        isOptimized: true
      }, 'foreground', false))

    this.d3Key3
      .text(showOpt ? 'Not JavaScript' : this.core)
      .style('color', this.ui.getFrameColor({
        category: 'core'
      }, 'foreground', false))

    const titleHTML = `Call stacks in <em>${this.appName}</em>, grouped, by time spent on stack`
    this.d3Title.html(titleHTML)
  }
}

module.exports = Key

},{"./html-content.js":46}],49:[function(require,module,exports){
'use strict'
require('@clinic/clinic-common/spinner')
const Ui = require('./ui.js')
const loadFonts = require('@clinic/clinic-common/behaviours/font-loader')

// Create UI
const ui = new Ui('main')

// Called on font load or timeout
const drawUi = () => {
  document.body.classList.remove('is-loading-font')
  document.body.classList.add('is-font-loaded')

  ui.initializeElements()

  // TODO: see if there's a way to load this asyncronously (in case of huge data) that works with puppeteer
  const dataTree = require('./data.json')
  ui.setData(dataTree)

  // Select hottest frame, after frame visibility has been set in d3-fg
  // And only if no node was selected during initialization by some other means
  // (eg from parsing the history hash).
  ui.draw()
  if (!ui.selectedNode || ui.selectedNode.category === 'none') {
    ui.selectHottestNode()
  }
}

// Orchestrate font loading
setTimeout(() => (
  loadFonts({
    onLoad: () => ui.emit('uiFontLoaded'),
    onTimeout: () => ui.emit('uiFontLoaded')
  })
))

drawUi()

if (false) {
  window.ui = ui
}

},{"./data.json":"/Users/alex/.nvm/versions/node/v20.8.0/lib/node_modules/clinic/node_modules/@clinic/flame/visualizer/data.json","./ui.js":57,"@clinic/clinic-common/behaviours/font-loader":13,"@clinic/clinic-common/spinner":33}],50:[function(require,module,exports){
'use strict'
const d3 = require('./d3.js')

const msgComponent = d3.select('body')
  .append('div')
  .attr('id', 'message-component')

module.exports = {
  info (msgHtml, duration = 5000) {
    const el = msgComponent.append('div')
      .classed('message-text', true)
      .html(msgHtml)

    setTimeout(() => {
      el.remove()
    }, duration)
  }
}

},{"./d3.js":35}],51:[function(require,module,exports){
'use strict'

// Recreate the object every time it is needed so the caller
// can change properties without mutating the original.
function getNoDataNode () {
  return {
    category: 'none', // Used to distinguish fake nodes like this from real ones
    children: [],
    functionName: 'No data.',
    fileName: 'Nothing to show currently.',
    id: null, // Don't show any id in the url hash
    name: '',
    onStackTop: {
      asViewed: 0,
      base: 0,
      rootFromMean: 0
    },
    type: 'no-data', // Used for this node specifically, indicating no visible data

    areaText: 'No frames are visible', // Trailing '.' is added in info-box.js
    getNodeRect: function () {
      return {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      }
    }
  }
}

module.exports = getNoDataNode

},{}],52:[function(require,module,exports){
const HtmlContent = require('./html-content.js')
const debounce = require('lodash.debounce')

class SearchBox extends HtmlContent {
  constructor (parentContent, contentProperties) {
    const properties = Object.assign({}, contentProperties)
    properties.classNames = properties.classNames.split(' ')
    properties.classNames.push('search-box')
    properties.classNames = properties.classNames.join(' ')

    super(parentContent, properties)

    this.ui.on('clearSearch', () => {
      this.d3Input.property('value', '')
    })

    this.ui.on('search', (query) => {
      this.d3Input.property('value', query)
    })
  }

  initializeElements () {
    super.initializeElements()

    this.d3Input = this.d3Element.append('input')
      .attr('placeholder', 'Search...')

    this.d3Input.on('input', debounce(() => {
      this.onInput()
    }, 300))
  }

  onInput () {
    const query = this.d3Input.property('value')
    if (query === '') {
      this.ui.clearSearch()
    } else {
      this.ui.search(query)
    }
  }
}

module.exports = SearchBox

},{"./html-content.js":46,"lodash.debounce":81}],53:[function(require,module,exports){
'use strict'

const HtmlContent = require('./html-content.js')
const chevronLeftFirst = require('@clinic/clinic-common/icons/chevron-left-first')
const chevronLeft = require('@clinic/clinic-common/icons/chevron-left')
const chevronRight = require('@clinic/clinic-common/icons/chevron-right')
const chevronRightLast = require('@clinic/clinic-common/icons/chevron-right-last')

const button = require('@clinic/clinic-common/base/button.js')

class SelectionControls extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)
    this.tooltip = contentProperties.customTooltip

    this.rankNumber = 0
    this.framesCount = '…'

    this.selectedNode = null

    // Show content for highlightedNode, or selectedNode when nothing is highlighted
    // so content falls back to most recent selection on frame mouseout etc
    this.ui.on('updateExclusions', () => {
      this.update()
    })

    this.ui.on('zoomNode', () => {
      this.update()
    })

    this.ui.on('setData', () => {
      this.countFrames()
    })

    this.ui.on('selectNode', node => {
      if (!node) return
      this.selectedNode = node
      this.rankNumber = this.ui.dataTree.getSortPosition(node)
      this.draw()
    })

    this.ui.on('highlightNode', node => {
      if (!node && !this.selectedNode) return
      this.rankNumber = this.ui.dataTree.getSortPosition(node || this.selectedNode)
      this.draw()
    })
  }

  update () {
    this.countFrames()
    const node = this.ui.highlightedNode || this.ui.selectedNode
    this.rankNumber = this.ui.dataTree.getSortPosition(node)
    this.draw()
  }

  draw () {
    super.draw()

    const noNodes = this.ui.selectedNode && this.ui.selectedNode.type === 'no-data'

    this.d3FramesCount.html(`<span class="visible-from-bp-1">of ${noNodes ? 0 : this.framesCount}</span>`)
    this.d3SelectNumber.property('value', noNodes ? 0 : this.rankNumber + 1)

    const isHottest = this.rankNumber === 0
    this.d3SelectHotter.attr('disabled', noNodes || isHottest || null)
    this.d3SelectHottest.attr('disabled', noNodes || isHottest || null)

    const isColdest = this.rankNumber === this.framesCount - 1
    this.d3SelectCooler.attr('disabled', noNodes || isColdest || null)
    this.d3SelectColdest.attr('disabled', noNodes || isColdest || null)
  }

  initializeElements () {
    super.initializeElements()

    // Initialize controls

    this.d3SelectHottest = this.d3Element.append(() => button({
      rightIcon: chevronLeftFirst,
      classNames: ['hotness-selector'],
      onClick: () => this.selectByRank(0)
    }))
    this.tooltip.attach({
      msg: 'Select the hottest frame (meaning, most time at the top of the stack)',
      d3TargetElement: this.d3SelectHottest,
      offset: {
        y: 2
      }
    })

    this.d3SelectHotter = this.d3Element.append(() => button({
      rightIcon: chevronLeft,
      classNames: ['hotness-selector'],
      onClick: () => this.selectByRank(this.rankNumber - 1)
    }))
    this.tooltip.attach({
      msg: 'Select the frame before the selected frame when ranked from hottest to coldest',
      d3TargetElement: this.d3SelectHotter,
      offset: {
        y: 2
      }
    })

    const d3RankWrapper = this.d3Element.append('span')
      .classed('rank-wrapper', true)
    d3RankWrapper.append('label').text('#')

    this.d3SelectNumber = d3RankWrapper.append('input')
      .classed('hotness-selector button', true)
      .property('value', this.rankNumber)

    this.d3FramesCount = d3RankWrapper.append('label').html('<span class="visible-from-bp-2">hottest frame, </span> ').append('span')

    this.d3SelectCooler = this.d3Element.append(() => button({
      rightIcon: chevronRight,
      label: 'Next hottest',
      classNames: ['hotness-selector', 'visible-from-bp-2'],
      onClick: () => this.selectByRank(this.rankNumber + 1)
    }))
    this.tooltip.attach({
      msg: 'Select the frame after the selected frame when ranked from hottest to coldest',
      d3TargetElement: this.d3SelectCooler,
      offset: {
        y: 2
      }
    })

    this.d3SelectColdest = this.d3Element.append(() => button({
      rightIcon: chevronRightLast,
      classNames: ['hotness-selector'],
      onClick: () => this.selectByRank('last')
    }))
    this.tooltip.attach({
      msg: 'Select the coldest frame (meaning, least time at the top of the stack)',
      d3TargetElement: this.d3SelectColdest,
      offset: {
        y: 2
      }
    })
  }

  selectByRank (rank) {
    if (rank === 'last') {
      if (typeof this.framesCount !== 'number' || !this.framesCount) return
      this.ui.selectNode(this.ui.dataTree.getFrameByRank(this.framesCount - 1))
      return
    }
    this.ui.selectNode(this.ui.dataTree.getFrameByRank(rank))
  }

  countFrames () {
    this.framesCount = this.ui.dataTree.countFrames()
  }
}

module.exports = SelectionControls

},{"./html-content.js":46,"@clinic/clinic-common/base/button.js":2,"@clinic/clinic-common/icons/chevron-left":20,"@clinic/clinic-common/icons/chevron-left-first":19,"@clinic/clinic-common/icons/chevron-right":22,"@clinic/clinic-common/icons/chevron-right-last":21}],54:[function(require,module,exports){
'use strict'
const HtmlContent = require('./html-content.js')

class SideBar extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)
    this.animationEnd = contentProperties.animationEnd
    this.isExpanded = false
  }

  initializeElements () {
    super.initializeElements()

    this.d3ContentWrapper.attr('id', 'side-bar')

    this.d3ContentWrapper.on('animationend', () => {
      this.isExpanded = !this.isExpanded

      if (this.isExpanded) {
        this.d3ContentWrapper.classed('contract', false)
      }

      this.animationEnd(this.isExpanded)
    })
  }

  slideIn () {
    this.d3ContentWrapper.classed('expand', true)
  }

  slideOut () {
    this.d3ContentWrapper.classed('expand', false)
    this.d3ContentWrapper.classed('contract', true)
  }

  toggle (isVisible) {
    // const className = isVisible ? 'expand' : 'contract'
    this.d3ContentWrapper.classed('expand', isVisible)
    this.d3ContentWrapper.classed('contract', !isVisible)
  }

  draw () {
    super.draw()
  }
}

module.exports = SideBar

},{"./html-content.js":46}],55:[function(require,module,exports){
const d3 = require('./d3.js')
const HtmlContent = require('./html-content.js')

class StackBar extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, contentProperties)

    this.highlightedNode = null
    this.highlightedNodeTimeoutHandler = null
    this.frameTooltipHandler = null

    this.tooltip = contentProperties.tooltip
    this.tooltipHtmlContent = contentProperties.tooltipHtmlContent

    this.tooltipHtmlContent.getTooltipD3()
      .on('mouseenter', () => {
        clearTimeout(this.highlightedNodeTimeoutHandler)
        // this.ui.highlightNode(this.ui.selectedNode)
      })
      .on('mouseleave', () => {
        this.ui.highlightNode(this.ui.selectedNode)
      })

    this.ui.on('highlightNode', node => {
      this.pointToNode(node || this.ui.selectedNode)
    })

    this.ui.on('selectNode', node => {
      this.pointToNode(node)
    })

    this.ui.on('zoomNode', () => {
      this.draw()
    })
  }

  initializeElements () {
    super.initializeElements()

    const ui = this.ui

    this.d3StacksWrapper = this.d3Element.append('div')
      .classed('stacks-wrapper', true)
      .on('mousemove', () => {
        clearTimeout(this.highlightedNodeTimeoutHandler)

        const nodeElem = this.getNodeAtX(d3.event.offsetX)
        if (!nodeElem) return

        const nodeData = nodeElem.d
        ui.highlightNode(nodeElem.d)

        const wrapperRect = this.d3StacksWrapper.node().getBoundingClientRect()

        if (!nodeData) {
          this.tooltip.hide()
          return
        }

        this.tooltipHtmlContent.setNodeData(nodeData)
        this.tooltip.show({
          msg: this.tooltipHtmlContent.getTooltipD3().node(),
          pointerCoords: { x: d3.event.offsetX, y: d3.event.offsetY },
          targetRect: wrapperRect,
          wrapperNode: this.d3StacksWrapper.node()
        })
      })
      .on('mouseout', () => {
        clearTimeout(this.highlightedNodeTimeoutHandler)
        this.highlightedNodeTimeoutHandler = setTimeout(() => {
          ui.highlightNode(this.ui.selectedNode)
          this.tooltip.hide(200)
        }, 200)
      })
      .on('click', () => {
        const nodeElem = this.getNodeAtX(d3.event.offsetX)
        if (!nodeElem) return

        const nodeData = nodeElem.d
        if (nodeData) {
          this.ui.highlightNode(nodeData)
          this.ui.selectNode(nodeData)
        }
      })
      .on('dblclick', () => {
        const nodeElem = this.getNodeAtX(d3.event.offsetX)
        if (!nodeElem) return

        const nodeData = nodeElem.d
        if (nodeData) {
          this.ui.zoomNode(nodeData)
        }
      })

    this.d3Pointer = this.d3Element.append('div')
      .classed('pointer', true)
  }

  pointToNode (node) {
    this.highlightedNode = node
    this.draw()
  }

  getNodeAtX (x) {
    const totalWidth = this.d3StacksWrapper.node().getBoundingClientRect().width

    let left = 0
    return this.frames.find(frame => {
      left += totalWidth * frame.width + frame.margin
      return left > x
    })
  }

  getNodePosition (node) {
    let found = false
    let isInRemaining = false
    let left = 0
    let margin = 0
    let i = 0
    const frames = this.frames
    const totalWidth = this.d3StacksWrapper.node().getBoundingClientRect().width
    if (!frames || !node) return '0px'

    while (!found && i < frames.length - 1) {
      const frame = frames[i]
      found = node.id === frame.d.id

      margin += found ? 0 : frame.margin
      left += found ? frame.width / 2 : frame.width
      i++
    }

    if (!found) {
      const lastFrame = frames[frames.length - 1]
      // This may not be an aggregate `remaining` frame if all frames fit on the stack bar,
      // which can happen on small profiles or with aggressive filters.
      isInRemaining = Array.isArray(lastFrame.remaining) &&
        lastFrame.remaining.some((smallFrame) => smallFrame.id === node.id)
    }

    return found || isInRemaining ? `${left * totalWidth + margin}px` : '-20px'
  }

  prepareFrames () {
    if (false) {
      console.time('StackBar.prepareFrames')
    }

    const { dataTree } = this.ui
    const rootNode = this.ui.zoomedNode || dataTree.activeTree()

    // flattening the children array and sorting the frames
    dataTree.sortFramesByHottest(this.ui.zoomedNode)

    const availableWidth = this.d3Element.node().getBoundingClientRect().width
    const onePxPercent = 1 / availableWidth

    const frames = []
    let usedWidth = 0.0

    for (let i = 0; i < dataTree.flatByHottest.length; i++) {
      const d = dataTree.flatByHottest[i]
      const stackTop = d.onStackTop.asViewed
      const totalFraction = Math.max(onePxPercent, stackTop / rootNode.value)

      const width = totalFraction
      const margin = totalFraction > 0.02 ? 2 : 1

      frames.push({ d, width, margin })

      usedWidth += width + (margin / availableWidth)
      if (usedWidth >= 0.98) {
        const remaining = dataTree.flatByHottest.slice(i + 1)
        frames.push({ remaining, width: 1 - usedWidth, margin: 0 })
        break
      }
    }
    if (false) {
      console.timeEnd('StackBar.prepareFrames')
    }
    return frames
  }

  draw () {
    super.draw()

    const { dataTree } = this.ui

    if (dataTree.flatByHottest === null) {
      return
    }

    if (false) {
      console.time('StackBar.draw')
    }
    this.frames = this.prepareFrames()

    const update = this.d3StacksWrapper.selectAll('div')
      .data(this.frames)
    update.exit().remove()

    const self = this

    update.enter().append('div')
      .classed('stack-frame', true)
      .merge(update)
      .each(function (data) {
        const { width, margin } = data

        const isHighlighted = data.d && self.highlightedNode && (self.highlightedNode.id === data.d.id)
        const isSelected = data.d && self.ui.selectedNode && (self.ui.selectedNode.id === data.d.id)

        d3.select(this)
          .classed('highlighted', isHighlighted)
          .classed('selected', isSelected)
          .style('background-color', self.ui.dataTree.getHeatColor(data.d))
          .style('width', `${(width * 100).toFixed(3)}%`)
          .style('margin-right', `${margin}px`)
      })

    // moving the selector over the bar
    const left = this.getNodePosition(self.highlightedNode)
    this.d3Pointer.style('transform', `translateX(${left})`)

    this.d3Pointer.classed('hidden', left === null)

    if (false) {
      console.timeEnd('StackBar.draw')
    }
  }
}

module.exports = StackBar

},{"./d3.js":35,"./html-content.js":46}],56:[function(require,module,exports){
'use strict'

const HtmlContent = require('./html-content.js')
const { toHtml } = require('@clinic/clinic-common/base/helpers.js')

class Tooltip extends HtmlContent {
  constructor (parentContent, contentProperties = {}) {
    super(parentContent, Object.assign({ hidden: true }, contentProperties))

    this.tooltipHandler = null
    this.showDelay = contentProperties.showDelay || 1500
    this.hideDelay = contentProperties.hideDelay || 200

    this.onHideCallback = null

    this.contentProperties = contentProperties
  }

  initializeElements () {
    super.initializeElements()

    // creating the tooltip component
    this.d3Tooltip = this.d3Element
      .classed('tooltip', true)

    this.d3TooltipInner = this.d3Tooltip.append('div')
      .classed('tooltip-inner', true)

    // handling the mouse events
    this.d3Tooltip.on('mouseover', () => {
      clearTimeout(this.tooltipHandler)
    })

    this.d3Tooltip.on('mouseout', (e) => {
      this.tooltipHandler && this.hide()
    })
  }

  attach (options) {
    options.d3TargetElement
      .on('mouseover.tooltip', () => this.show(options))
      .on('mouseout.tooltip', () => this.hide(options))

      // replicating the default tooltip behaviour
      .on('click.tooltip', () => this.hide(options))
  }

  show (props) {
    const baseDelay = props.showDelay === undefined ? this.showDelay : props.showDelay
    // adding the delay if no tooltip is already displayed, or a shorter delay
    // if the tooltip is already there
    const delay = this.isHidden ? baseDelay : baseDelay / 2

    clearTimeout(this.tooltipHandler)

    this.updateTooltip(props)

    this.tooltipHandler = setTimeout(() => {
      this.isHidden = false
      this.draw()

      this.updateTooltip(props)
    }, delay)
  }

  // If nothing is passed in, or { delay } === undefined, use default delay
  hide ({ delay = this.hideDelay, callback } = {}) {
    clearTimeout(this.tooltipHandler)

    // Callback will be called next hide, even if this timeout cleared, e.g. moving mouse from frame to tooltip
    if (callback) this.onHideCallback = callback

    this.tooltipHandler = setTimeout(() => {
      this.isHidden = true

      this.draw()
      if (this.onHideCallback) {
        this.onHideCallback()
        this.onHideCallback = null
      }
    }, delay)
  }

  toggle (props, show = this.isHidden) {
    if (this.onHideCallback) {
      const opt = Object.assign({}, props, { delay: 0 })
      this.hide(opt)
    }
    // Callback will be called next hide, even if this timeout cleared, e.g. moving mouse from frame to tooltip
    if (props.callback && this.onHideCallback !== props.callback) this.onHideCallback = props.callback

    if (show) {
      this.show(props)
    } else {
      this.hide(props)
    }
  }

  updateTooltip ({ msg, d3TargetElement, targetRect, outerRect = document.body.getBoundingClientRect(), offset, pointerCoords, verticalAlign = 'bottom' }) {
    // returns if the tooltip is hidden
    if (this.isHidden) return

    const msgHtmlNode = toHtml(msg, 'tooltip-default-message')

    this.d3TooltipInner.classed('top bottom', false)
    this.d3TooltipInner.classed(verticalAlign, true)

    let {
      x,
      y,
      width,
      height
    } = targetRect || d3TargetElement.node().getBoundingClientRect()

    if (offset) {
      x += offset.x || 0
      y += offset.y || 0
      width += offset.width || 0
      height += offset.height || 0
    }

    clearTimeout(this.tooltipHandler)

    let ttLeft = x
    const ttTop = y + (verticalAlign === 'bottom' ? height : 0)

    if (pointerCoords) {
      // centering on the mouse pointer horizontally
      ttLeft = x + pointerCoords.x
    }

    this.d3Tooltip
      .style('left', `${ttLeft}px`)
      .style('top', `${ttTop}px`)

    this.d3TooltipInner.selectAll(function () { return this.childNodes })
      .remove()
    this.d3TooltipInner.append(() => msgHtmlNode)

    // calculating the actual tooltip width
    const ttWidth = this.d3TooltipInner.node().getBoundingClientRect().width

    // positioning the tooltip content
    // making sure that it doesn't go over the frame right edge
    const alignRight = ttLeft + ttWidth - (x + width)
    let deltaX = Math.max(alignRight, ttWidth / 2)

    // then checking it doesn't overflow the frame left edge
    deltaX = (ttLeft - deltaX < x) ? ttLeft - x : deltaX

    // then checking the outer element right edge
    if (outerRect) {
      deltaX = (ttLeft - deltaX + ttWidth > outerRect.right) ? alignRight : deltaX
    }

    // if it doesn't fit either way, attach to the very left edge of the viewport
    // so it has as much space as possible
    if (ttLeft - deltaX < 0) {
      deltaX = ttLeft
    }

    this.d3TooltipInner
      .style('left', `-${deltaX}px`)
      .style('max-width', outerRect ? `${outerRect.width}px` : 'auto')
  }

  draw () {
    super.draw()
  }
}

module.exports = Tooltip

},{"./html-content.js":46,"@clinic/clinic-common/base/helpers.js":8}],57:[function(require,module,exports){
(function (process){(function (){
'use strict'

const d3 = require('./d3.js')
const events = require('events')
const htmlContentTypes = require('./html-content-types.js')
const debounce = require('lodash.debounce')
const DataTree = require('./data-tree.js')
const History = require('./history.js')
const spinner = require('@clinic/clinic-common/spinner')

const close = require('@clinic/clinic-common/icons/close')

const TooltipHtmlContent = require('./flame-graph-tooltip-content')
const getNoDataNode = require('./no-data-node.js')

const { button, walkthroughButton } = require('@clinic/clinic-common/base/index.js')
const wtSteps = require('./walkthrough-steps.js')

class Ui extends events.EventEmitter {
  constructor (wrapperSelector) {
    super()

    this.flameWrapperSpinner = null
    this.history = new History()

    this.dataTree = null
    this.highlightedNode = null

    this.selectedNode = getNoDataNode()

    this.zoomedNode = null
    this.changedExclusions = {
      toHide: new Set(),
      toShow: new Set()
    }
    this.searchQuery = null
    this.presentationMode = process.env.PRESENTATION_MODE === 'true'

    this.tooltipHtmlContent = new TooltipHtmlContent(this)

    this.wrapperSelector = wrapperSelector
    this.exposedCSS = null
    this.setExposedCSS()

    this.sections = new Map()
    this.createContent()

    this.history.on('change', (data) => {
      this.updateFromHistory(data)
    })
  }

  pushHistory (opts = {}) {
    this.history.push({
      selectedNodeId: this.selectedNode && this.selectedNode.id,
      zoomedNodeId: this.zoomedNode && this.zoomedNode.id,
      useMerged: this.dataTree.useMerged,
      showOptimizationStatus: this.dataTree.showOptimizationStatus,
      exclude: this.dataTree.exclude,
      search: this.searchQuery,
      walkthroughIndex: this.helpButton.WtPlayer.currentStepIndex
    }, opts)
  }

  updateFromHistory (data) {
    const {
      exclude,
      useMerged,
      search,
      selectedNodeId,
      showOptimizationStatus,
      zoomedNodeId,
      walkthroughIndex
    } = data

    this.setUseMergedTree(useMerged, {
      pushState: false,
      selectedNodeId,
      cb: () => {
        this.dataTree.showOptimizationStatus = showOptimizationStatus

        let anyChanges = false

        // Diff exclusion setting so FlameGraph can update.
        exclude.forEach((name) => {
          if (this.dataTree.exclude.has(name)) return
          this.changedExclusions.toHide.add(name)
          anyChanges = true
        })
        this.dataTree.exclude.forEach((name) => {
          if (exclude.has(name)) return
          this.changedExclusions.toShow.add(name)
          anyChanges = true
        })
        this.dataTree.exclude = exclude

        if (anyChanges) this.updateExclusions({ pushState: false, selectedNodeId, zoomedNodeId })

        // Redraw before zooming to make sure these nodes are visible in the flame graph.
        this.draw()

        this.zoomNode(this.dataTree.getNodeById(zoomedNodeId), { pushState: false })
        this.selectNode(this.dataTree.getNodeById(selectedNodeId), { pushState: false })
      }
    })

    if (search !== this.searchQuery) {
      this.search(search, { pushState: false })
    }
    if (walkthroughIndex !== undefined) {
      this.helpButton.WtPlayer.skipTo(walkthroughIndex)
    }
  }

  // Temporary e.g. on mouseover, erased on mouseout
  highlightNode (node = null) {
    if (node && node.id === 0) return
    const changed = node !== this.highlightedNode
    this.highlightedNode = node
    if (changed) this.emit('highlightNode', node)

    this.showNodeInfo(node || this.selectedNode)
  }

  // Persistent e.g. on click, then falls back to this after mouseout
  selectNode (node = null, { pushState = true } = {}) {
    if (!node || node.id === 0 || this.dataTree.isNodeExcluded(node)) {
      if (!this.selectedNode) this.selectHottestNode({ pushState })
      return
    }
    if (!node || node.id === 0) return
    const changed = node !== this.selectedNode
    this.selectedNode = node
    if (changed) this.emit('selectNode', node)

    this.scrollSelectedFrameIntoView()

    this.showNodeInfo(node)
    this.highlightNode(node)

    if (pushState) this.pushHistory()
  }

  selectHottestNode (opts) {
    const node = this.dataTree.getFrameByRank(0)
    if (!node) return getNoDataNode()

    // Prevent infinite loop if some future bug allows an invalid node to be returned here
    const nodeInvalidMessage = ' node selected in selectHottestNode'
    if (node.id === 0) throw new Error('Root' + nodeInvalidMessage)
    if (this.dataTree.isNodeExcluded(node)) throw new Error('Excluded' + nodeInvalidMessage)

    this.selectNode(node, opts)
  }

  zoomNode (node = null, { pushState = true, cb } = {}) {
    if (!node && !this.zoomedNode) {
      if (cb) cb()
      return
    }

    // Zoom out if zooming in on already-zoomed node, or zoom target is excluded
    if (!node || node === this.zoomedNode || this.dataTree.isNodeExcluded(node)) node = null
    this.zoomedNode = node

    this.emit('zoomNode', node, cb)
    if (node && node !== this.selectedNode) {
      this.selectNode(node, { pushState })
    } else if (pushState) {
      this.pushHistory()
    }
    this.scrollSelectedFrameIntoView()
  }

  clearSearch ({ pushState = true } = {}) {
    this.searchQuery = null
    this.emit('clearSearch')

    if (pushState) {
      this.pushHistory()
    }
  }

  search (query, { pushState = true } = {}) {
    if (!query) {
      if (this.searchQuery) this.clearSearch({ pushState })
      return
    }

    this.emit('search', query)

    const prevQuery = this.searchQuery
    this.searchQuery = query

    if (pushState) {
      this.pushHistory({
        // If the new query is just the old one with more characters,
        // the user was probably still typing. instead of pushing a new entry,
        // potentially resulting in many entries for a single query, replace the previous entry.
        replace: prevQuery && query.startsWith(prevQuery)
      })
    }
  }

  setPresentationMode (mode) {
    this.presentationMode = mode
    // switching the class on the html element
    document.documentElement.classList.toggle('presentation-mode', mode)
    this.setExposedCSS()
    this.emit('presentationMode', mode)
  }

  /**
  * Sections and content
  **/

  createContent () {
    this.mainElement = document.querySelector(this.wrapperSelector)

    this.uiContainer = new htmlContentTypes.HtmlContent(null, {
      element: this.mainElement,
      id: 'one-col-layout'
    }, this, this.wrapperSelector)

    // creating the tooltip instance that the Ui's components can share
    const tooltip = this.uiContainer.addContent('Tooltip', {
      htmlElementType: 'div',
      isHoverOverridden: true,
      id: 'ui-tooltip'
    })
    this.tooltip = tooltip

    const toolbar = this.uiContainer.addContent(undefined, {
      id: 'toolbar',
      htmlElementType: 'section'
    })

    this.stackBar = toolbar.addContent('StackBar', {
      id: 'stack-bar',
      tooltip,
      tooltipHtmlContent: this.tooltipHtmlContent
    })

    const toolbarTopPanel = toolbar.addContent(undefined, {
      id: 'toolbar-top-panel'
    })

    toolbarTopPanel.addContent('SelectionControls', {
      id: 'selection-controls',
      customTooltip: tooltip
    })

    this.infoBox = toolbar.addContent('InfoBox', {
      id: 'info-box',
      customTooltip: tooltip
    })

    const getZoomFactor = () => {
      // getting the zoomFactor when the viewport is larger than 600px
      // and as long as the width / height proportion equals to 16/9
      const minWidth = 600

      if (window.innerWidth > minWidth) {
        const size = Math.min(window.innerWidth, window.innerHeight * 16 / 9)
        const baseFactor = (size - minWidth) / 250
        const bonus = this.presentationMode ? 1.5 : 1
        return Math.round(baseFactor * bonus)
      }

      return 0
    }

    this.mainContent = this.uiContainer.addContent('HtmlContent', {
      id: 'main-content'
    })

    const flameWrapper = this.mainContent.addContent('FlameGraph', {
      id: 'flame-main',
      htmlElementType: 'section',
      customTooltip: tooltip,
      zoomFactor: getZoomFactor(),
      tooltipHtmlContent: this.tooltipHtmlContent
    })
    this.flameWrapper = flameWrapper

    this.sideBar = this.mainContent.addContent('SideBar', {
      id: 'side-bar',
      animationEnd: () => {
        const zoomFactor = getZoomFactor()
        flameWrapper.resize(zoomFactor)
      }
    })

    this.sideBar.addContent('FiltersContent', {
      classNames: 'filters-options',
      getSpinner: () => this.flameWrapperSpinner
    })

    this.footer = this.uiContainer.addContent(undefined, {
      id: 'footer',
      htmlElementType: 'section'
    })

    // mobile search-box
    this.mSearchBoxWrapper = this.footer.addContent(undefined, {
      id: 'm-search-box-wrapper',
      classNames: 'before-bp-2 m-search-box-wrapper'
    })
    this.mSearchBoxWrapper.addContent('SearchBox', {
      id: 'm-search-box',
      classNames: 'inline-panel'
    })

    this.footer.addContent('FiltersContainer', {
      id: 'filters-bar',
      toggleSideBar: this.toggleSideBar,
      getSpinner: () => this.flameWrapperSpinner
    })

    // TODO: add these ↴
    // footer.addContent('FlameGraph', { id: 'flame-chronological' })
    // footer.addContent('TimeFilter')

    const reDrawStackBar = debounce(() => this.stackBar.draw(this.highlightedNode), 200)

    let scrollContainer = null
    this.scrollSelectedFrameIntoView = debounce(() => {
      if (!scrollContainer) {
        scrollContainer = flameWrapper.d3Element.select('.scroll-container').node()
      }

      let scrollAmount = scrollContainer.scrollHeight
      if (this.selectedNode && this.selectedNode.category !== 'none') {
        const viewportHeight = scrollContainer.clientHeight
        const rect = this.flameWrapper.getNodeRect(this.selectedNode)

        scrollAmount = rect.y - viewportHeight * 0.4
        // scrolling only if the frame is outside the viewport
        if ((rect.y - rect.height) > scrollContainer.scrollTop && rect.y < scrollContainer.scrollTop + viewportHeight) return
      }

      if (scrollContainer.scrollTo) {
        scrollContainer.scrollTo({
          top: scrollAmount,
          behavior: 'smooth'
        })
      } else {
        // Fallback for MS Edge
        scrollContainer.scrollTop = scrollAmount
      }
    }, 200)

    const setFontSize = (zoomFactor) => {
      // increasing the font-size as the screen gets wider...
      document.documentElement.style.fontSize = 0.625 + zoomFactor / 16 + 'em'
    }

    setFontSize(getZoomFactor())
    // flameWrapper.

    window.addEventListener('resize', () => {
      const zoomFactor = getZoomFactor()
      flameWrapper.resize(zoomFactor)
      this.scrollSelectedFrameIntoView()
      reDrawStackBar()
      setFontSize(zoomFactor)
    })

    window.addEventListener('load', this.scrollSelectedFrameIntoView)

    this.on('presentationMode', () => {
      const zoomFactor = getZoomFactor()
      flameWrapper.resize(zoomFactor)
      setFontSize(zoomFactor)
      this.scrollSelectedFrameIntoView()
    })
  }

  addSection (id, options = {}) {
    options.id = id
    const section = this.uiContainer.addContent('HtmlContent', options)
    section.ui = this
    this.sections.set(id, section)
    return section
  }

  getContentClass (className) {
    const ContentClass = htmlContentTypes[className]
    if (typeof ContentClass !== 'function') {
      throw new Error(`HTML content class "${className}" is ${typeof ContentClass}`)
    }

    return ContentClass
  }

  getLabelFromKey (key, singular = false) {
    const keysToLabels = {
      app: this.dataTree.appName || 'profiled application',
      deps: singular ? 'Dependency' : 'Dependencies',
      core: 'Node JS',
      wasm: 'WebAssembly',

      'is:inlinable': 'Inlinable',
      'is:init': 'Init',

      'all-v8': 'V8',
      'all-v8:native': 'V8 native',
      'all-v8:v8': 'V8 runtime',
      'all-v8:cpp': 'V8 C++',
      'all-v8:regexp': 'RegExp'
    }

    if (keysToLabels[key]) {
      return keysToLabels[key]
    }

    const splitKey = key.split(':')
    if (splitKey.length > 1) {
      const type = splitKey[1]
      return keysToLabels[type] || type
    }

    return key
  }

  getDescriptionFromKey (key) {
    const keysToDescriptions = {
      app: '<span>Functions in the code of the application being profiled.</span>',
      deps: '<span>External modules in the application\'s node_modules directory.</span>',
      core: '<span>JS functions in core Node.js APIs.</span>',
      wasm: '<span>Compiled WebAssembly code.</span>',
      'all-v8': `<span>The JavaScript engine used by default in Node.js.</span> ${this.createMoreInfoLink('https://clinicjs.org/documentation/flame/09-advanced-controls/#controls-v8')}`,
      'all-v8:v8': `<span>Operations in V8's implementation of JS.</span> ${this.createMoreInfoLink('https://clinicjs.org/documentation/flame/09-advanced-controls/#controls-v8-runtime')}`,
      'all-v8:native': `<span>JS compiled into V8, such as prototype methods and eval.</span> ${this.createMoreInfoLink('https://clinicjs.org/documentation/flame/09-advanced-controls/#controls-v8-native')}`,
      'all-v8:cpp': `<span>Native C++ operations called by V8, including shared libraries.</span> ${this.createMoreInfoLink('https://clinicjs.org/documentation/flame/09-advanced-controls/#controls-v8-cpp')}`,
      'all-v8:regexp': `<span>The RegExp notation is shown as the function name.</span> ${this.createMoreInfoLink('https://clinicjs.org/documentation/flame/09-advanced-controls/#controls-regexp')}`
    }

    if (keysToDescriptions[key]) {
      return keysToDescriptions[key]
    }

    if (key.startsWith('deps:')) {
      // TODO use actual path, this is incorrect for
      // nested dependencies
      return `./node_modules/${key.slice(5)}`
    }

    return null
  }

  setCodeAreaVisibility ({ codeArea, visible, pushState = true, isRecursing = false }) {
    // Apply a single possible change to dataTree.exclude, updating what's necessary
    let isChanged = false

    if (codeArea.children && codeArea.children.length) {
      const childrenChanged = codeArea.children.forEach(child => this.setCodeAreaVisibility({
        codeArea: child,
        visible,
        pushState: false,
        isRecursing: true
      }))
      this.updateExclusions({ pushState })
      return childrenChanged
    } else {
      const name = codeArea.excludeKey
      if (visible) {
        isChanged = this.dataTree.show(name)
        if (isChanged) this.changedExclusions.toShow.add(name)
      } else {
        isChanged = this.dataTree.hide(name)
        if (isChanged) this.changedExclusions.toHide.add(name)
      }

      if (isChanged && !isRecursing) this.updateExclusions({ pushState })
    }

    return isChanged
  }

  updateExclusions ({ initial, pushState = true, selectedNodeId, zoomedNodeId } = {}) {
    this.dataTree.update(initial)

    const selectedNodeNotShown = this.selectedNode && (this.dataTree.isNodeExcluded(this.selectedNode) || this.selectedNode.category === 'none')

    if (!initial && !selectedNodeId && selectedNodeNotShown) {
      this.selectHottestNode()
    }

    const cb = () => {
      if (!initial) this.emit('updateExclusions')
      if (pushState) this.pushHistory()
    }

    // Zoom out before updating exclusions if the user excludes the node they're zoomed in on
    if (!zoomedNodeId && this.zoomedNode && this.dataTree.isNodeExcluded(this.zoomedNode)) {
      this.zoomNode(null, { cb })
    } else {
      cb()
    }
  }

  setUseMergedTree (useMerged, { pushState = true, selectedNodeId, cb } = {}) {
    if (this.dataTree.useMerged === useMerged) {
      if (cb) cb()
      return
    }

    // Current selected and zoomed nodes will be in wrong tree, therefore may cause errors during draw.
    // ui.selectNode() will be called properly in this.selectHottestNode() or based on selectedNodeId.
    this.selectedNode = null

    this.zoomNode(null, {
      cb: () => {
      // Complete update after any zoom animation is complete
        this.dataTree.setActiveTree(useMerged)

        this.draw()
        if (!selectedNodeId) this.selectHottestNode()

        if (pushState) this.pushHistory()

        if (cb) cb()

        this.emit('updateExclusions')
      }
    })
  }

  setShowOptimizationStatus (showOptimizationStatus) {
    this.dataTree.showOptimizationStatus = showOptimizationStatus
    this.draw()
    this.pushHistory()
    this.emit('updateExclusions')
  }

  setData (dataTree) {
    this.dataTree = new DataTree(dataTree)
    this.updateExclusions({ pushState: false, initial: true })
    this.emit('setData')
    this.history.setData(dataTree)
  }

  showNodeInfo (nodeData) {
    this.infoBox.showNodeInfo(nodeData)
  }

  toggleMobileSearchBox (show = !this.mSearchBoxWrapper.d3Element.classed('show')) {
    clearTimeout(this.mSearchBoxAutoHideHnd)
    this.mSearchBoxWrapper.d3Element.classed('show', show)
    if (show) this.mSearchBoxWrapper.d3Element.select('input').node().focus()
  }

  toggleSideBar (show = !this.sideBar.d3Element.classed('expand')) {
    this.sideBar.toggle(show)
    this.emit('sideBar', show)
  }

  /**
   * Initialization and draw
   **/

  setExposedCSS () {
    // TODO: When light / dark theme switch implemented, call this after each switch, before redraw
    const computedStyle = window.getComputedStyle(document.body)
    this.exposedCSS = {
      app: computedStyle.getPropertyValue('--area-color-app').trim(),
      deps: computedStyle.getPropertyValue('--area-color-deps').trim(),
      core: computedStyle.getPropertyValue('--area-color-core').trim(),
      wasm: computedStyle.getPropertyValue('--area-color-core').trim(),
      'all-v8': computedStyle.getPropertyValue('--area-color-core').trim(),

      'opposite-contrast': computedStyle.getPropertyValue('--opposite-contrast').trim(),
      'max-contrast': computedStyle.getPropertyValue('--max-contrast').trim(),
      'grey-blue': computedStyle.getPropertyValue('--grey-blue').trim(),
      'primary-grey': computedStyle.getPropertyValue('--primary-grey').trim()
    }
  }

  getFrameColor (nodeData, role, reverse = nodeData.highlight) {
    if ((role === 'background' && !reverse) || (role === 'foreground' && reverse)) {
      return this.exposedCSS['opposite-contrast']
    }

    if (this.dataTree.showOptimizationStatus) {
      if (nodeData.isUnoptimized) return this.exposedCSS['max-contrast']
      if (nodeData.isOptimized) return this.exposedCSS['primary-grey']
      return this.exposedCSS['grey-blue']
    } else {
      return this.exposedCSS[nodeData.category]
    }
  }

  initializeElements () {
    // Cascades down tree in addContent() append/prepend order
    this.uiContainer.initializeElements()

    // auto hiding mobile search-box on blur if empty
    this.mSearchBoxWrapper.d3Element.select('input')
      .on('blur', (datum, index, nodes) => {
        this.mSearchBoxAutoHideHnd = setTimeout(() => {
          // this little delay is to avoid clashes between the 'blur' cb and clicking on the search button
          if (nodes[index].value.trim() === '') {
            this.toggleMobileSearchBox(false)
          }
        }, 300)
      })

    // adding the mSearchBox close button
    this.mSearchBoxWrapper.d3Element.append(() => button({
      leftIcon: close,
      onClick: () => {
        clearTimeout(this.mSearchBoxAutoHideHnd)
        if (this.searchQuery === null) {
          // close if empty
          this.toggleMobileSearchBox(false)
        } else {
          // clear otherwise
          this.clearSearch()
        }
      }
    }))

    // walkthrough init
    this.helpButton = walkthroughButton({
      steps: wtSteps,
      onProgress: () => {
        this.pushHistory()
      },
      label: '<span class="before-bp-1">Guide</span><span class="after-bp-1">Show how to use this</span>',
      title: 'Click to start the step-by-step UI features guide!'
    })
    // Place help button top right
    d3.select('.nc-header__inner').append(() => this.helpButton.button)

    this.flameWrapperSpinner = spinner.attachTo(document.querySelector('#flame-main'))
  }

  draw () {
    // Cascades down tree in addContent() append/prepend order
    this.uiContainer.draw()

    this.changedExclusions.toHide.clear()
    this.changedExclusions.toShow.clear()

    // setting Presentation Mode
    this.setPresentationMode(this.presentationMode)
  }

  createMoreInfoLink (href) {
    return `
      <a target="_blank" rel="noopener noreferrer" href="${href}" class="more-info">
        More info
      </a>
    `
  }
}

module.exports = Ui

}).call(this)}).call(this,require('_process'))
},{"./d3.js":35,"./data-tree.js":36,"./flame-graph-tooltip-content":42,"./history.js":44,"./html-content-types.js":45,"./no-data-node.js":51,"./walkthrough-steps.js":58,"@clinic/clinic-common/base/index.js":9,"@clinic/clinic-common/icons/close":24,"@clinic/clinic-common/spinner":33,"_process":82,"events":78,"lodash.debounce":81}],58:[function(require,module,exports){
const link = require('@clinic/clinic-common/base/link.js')

const docs = link({
  label: 'Clinic Flame Documentation',
  href: 'https://clinicjs.org/documentation/flame/',
  target: '_blank',
  leftIcon: '<svg style="width: 20px; margin-right: 0px;" class="icon" viewBox="0 0 64 64" fill="currentColor"><path d="M42,21.13H23.37a1,1,0,0,0-1,1V40.75a1,1,0,0,0,1,1H42a1,1,0,0,0,1-1V32.88H33.85a1.46,1.46,0,1,1,0-2.91H43V22.1A1,1,0,0,0,42,21.13Z"></path><path d="M60.23,21.21A8.58,8.58,0,0,0,56,14.75C48.93,10.42,42,6,35.45,2a6.38,6.38,0,0,0-6.9,0C22,6,15.07,10.45,8,14.75a8.63,8.63,0,0,0-4.21,6.46,165.32,165.32,0,0,0,0,21.58A8.58,8.58,0,0,0,8,49.25C15.07,53.55,22,58,28.55,62a6.38,6.38,0,0,0,6.9,0C42,58,48.93,53.55,56,49.25a8.5,8.5,0,0,0,4.21-6.46A165.32,165.32,0,0,0,60.23,21.21ZM45.9,40.75A3.88,3.88,0,0,1,42,44.63H23.37a3.88,3.88,0,0,1-3.87-3.88V22.1a3.88,3.88,0,0,1,3.87-3.88H42A3.88,3.88,0,0,1,45.9,22.1Z"></path></svg>'
})

const flame = '<svg style="width:40px; margin: -4px 8px 0 -4px;" class="icon" viewBox="0 0 64 64" fill="#ffaa2b"><path d="M61.23,21.21A8.58,8.58,0,0,0,57,14.75C49.93,10.42,43,6,36.45,2a6.38,6.38,0,0,0-6.9,0C23,6,16.07,10.45,9,14.75a8.63,8.63,0,0,0-4.21,6.46,165.32,165.32,0,0,0,0,21.58A8.58,8.58,0,0,0,9,49.25C16.07,53.55,23,58,29.55,62a6.38,6.38,0,0,0,6.9,0C43,58,49.93,53.55,57,49.25a8.5,8.5,0,0,0,4.21-6.46A165.32,165.32,0,0,0,61.23,21.21Zm-21-2.77H42.2a1.45,1.45,0,1,1,0,2.9H40.26a1.45,1.45,0,1,1,0-2.9Zm0,5.81h5.82a1.46,1.46,0,0,1,0,2.91H40.26a1.46,1.46,0,0,1,0-2.91Zm0,5.81h5.82a1.46,1.46,0,0,1,0,2.91H40.26a1.46,1.46,0,0,1,0-2.91Zm0,5.81H49a1.46,1.46,0,1,1,0,2.91H40.26a1.46,1.46,0,0,1,0-2.91ZM16.05,24.25h3.87a1.46,1.46,0,0,1,0,2.91H16.05a1.46,1.46,0,1,1,0-2.91Zm0,5.81H27.67a1.46,1.46,0,0,1,0,2.91H16.05a1.46,1.46,0,1,1,0-2.91Zm0,5.81H32.51a1.46,1.46,0,1,1,0,2.91H16.05a1.46,1.46,0,1,1,0-2.91ZM49,44.59H16.05a1.45,1.45,0,1,1,0-2.9H49a1.45,1.45,0,1,1,0,2.9Z"></path></svg>'
const WalkthroughSteps = [
  {
    attachTo: '#flame-main',
    msg: `
    <div>
      <h4 class="welcome-step">
        ${flame}
        Welcome to Clinic.js Flame!
      </h4>
      <p>This is a Flamegraph. Each block represents the time spent executing calls to a function. The wider the block, the more time was spent.</p>
      <p>Blocks sit on the function that called them, so the stack below each block shows its stack trace.</p>
      <p>Double clicking on a block will expand it and its children.</p>
    </div>
    `
  },
  {
    attachTo: '#flame-main .highlighter-box',
    msg: `
    <div>
      <h4>A hot function</h4>
      <p>This is a "hot" function - a lot of time was spent at the top of the stack, running the code inside this function. The brighter the colour on the exposed top of a block, the "hotter" it is compared to the rest of the profile.</p>
      <p>This might signify a problem: for example, it might be a slow function that can be optimised, or that is called very many times by functions below it.</p>
    </div>`
  },
  {
    attachTo: '#toolbar',
    msg: `
    <div>
      <h4>About this function</h4>
      <p>The "hottest" function in the profile is selected by default.</p>
      <p>Here, we can see the function name and file location (or equivalent), so we can inspect the underlying code and decide if this function is something we can and should optimise.</p>
    </div>`
  },
  {
    attachTo: '#selection-controls',
    msg: `
    <div>
      <h4>Selection controls</h4>
      <p>One good way to start using a Clinic.js Flame profile is to cycle through the "hottest" frames in order. Then, for each one, we can look down the stack and work out why a relatively high amount of time is spent here.</p>
      <p>These buttons locate and select the next or previous hottest block in the flamegraph.</p>
    </div>`
  },
  {
    attachTo: '#stack-bar',
    msg: `
    <div>
      <h4>Functions by heat</h4>
      <p>This bar shows the "heat" of every block (the time spent in that function and not any functions it calls), in order; and shows where the currently selected block sits in this ranking.</p>
      <p>Moving to the next hottest block using the selection controls below moves this selection one block to the right.</p>
    </div>`
  },
  {
    attachTo: '#filters-bar .center-col',
    msg: `
    <div>
      <h4>Functions by code area</h4>
      <p>Blocks are colour-coded by position in the Node.js application's architecture:</p>
      <ul>
        <li>Functions from this application's own code are highlighted in white</li>
        <li>Dependencies in node_modules are blue</li>
        <li>Calls to Node.js APIs are shown in grey</li>
        <li>Activity in the <a href="https://clinicjs.org/documentation/flame/09-advanced-controls/#v8">V8 JavaScript engine</a>
          is hidden by default, to reduce complexity</li>
      </ul>
      <p>These code areas can be hidden or shown using these checkboxes.</p>
    </div>`
  },
  {
    attachTo: '#filters-bar .right-col',
    msg: `
    <div>
      <h4>Advanced options</h4>
      <p>Typing part of a function name, file path or equivalent into this search box highlights every matching block.</p>
      <p>Advanced options can also be accessed here.</p>
      <p>For more infomation and detailed walkthroughs, see:</p> ${docs.outerHTML}
   </div>`
  }
]

module.exports = WalkthroughSteps

},{"@clinic/clinic-common/base/link.js":10}],59:[function(require,module,exports){
"use strict";

var deselectCurrent = require("toggle-selection");

var clipboardToIE11Formatting = {
  "text/plain": "Text",
  "text/html": "Url",
  "default": "Text"
}

var defaultMessage = "Copy to clipboard: #{key}, Enter";

function format(message) {
  var copyKey = (/mac os x/i.test(navigator.userAgent) ? "⌘" : "Ctrl") + "+C";
  return message.replace(/#{\s*key\s*}/g, copyKey);
}

function copy(text, options) {
  var debug,
    message,
    reselectPrevious,
    range,
    selection,
    mark,
    success = false;
  if (!options) {
    options = {};
  }
  debug = options.debug || false;
  try {
    reselectPrevious = deselectCurrent();

    range = document.createRange();
    selection = document.getSelection();

    mark = document.createElement("span");
    mark.textContent = text;
    // avoid screen readers from reading out loud the text
    mark.ariaHidden = "true"
    // reset user styles for span element
    mark.style.all = "unset";
    // prevents scrolling to the end of the page
    mark.style.position = "fixed";
    mark.style.top = 0;
    mark.style.clip = "rect(0, 0, 0, 0)";
    // used to preserve spaces and line breaks
    mark.style.whiteSpace = "pre";
    // do not inherit user-select (it may be `none`)
    mark.style.webkitUserSelect = "text";
    mark.style.MozUserSelect = "text";
    mark.style.msUserSelect = "text";
    mark.style.userSelect = "text";
    mark.addEventListener("copy", function(e) {
      e.stopPropagation();
      if (options.format) {
        e.preventDefault();
        if (typeof e.clipboardData === "undefined") { // IE 11
          debug && console.warn("unable to use e.clipboardData");
          debug && console.warn("trying IE specific stuff");
          window.clipboardData.clearData();
          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting["default"]
          window.clipboardData.setData(format, text);
        } else { // all other browsers
          e.clipboardData.clearData();
          e.clipboardData.setData(options.format, text);
        }
      }
      if (options.onCopy) {
        e.preventDefault();
        options.onCopy(e.clipboardData);
      }
    });

    document.body.appendChild(mark);

    range.selectNodeContents(mark);
    selection.addRange(range);

    var successful = document.execCommand("copy");
    if (!successful) {
      throw new Error("copy command was unsuccessful");
    }
    success = true;
  } catch (err) {
    debug && console.error("unable to copy using execCommand: ", err);
    debug && console.warn("trying IE specific stuff");
    try {
      window.clipboardData.setData(options.format || "text", text);
      options.onCopy && options.onCopy(window.clipboardData);
      success = true;
    } catch (err) {
      debug && console.error("unable to copy using clipboardData: ", err);
      debug && console.error("falling back to prompt");
      message = format("message" in options ? options.message : defaultMessage);
      window.prompt(message, text);
    }
  } finally {
    if (selection) {
      if (typeof selection.removeRange == "function") {
        selection.removeRange(range);
      } else {
        selection.removeAllRanges();
      }
    }

    if (mark) {
      document.body.removeChild(mark);
    }
    reselectPrevious();
  }

  return success;
}

module.exports = copy;

},{"toggle-selection":85}],60:[function(require,module,exports){
// https://d3js.org/d3-array/ v2.12.1 Copyright 2021 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.d3 = global.d3 || {}));
}(this, (function (exports) { 'use strict';

function ascending(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

function bisector(f) {
  let delta = f;
  let compare = f;

  if (f.length === 1) {
    delta = (d, x) => f(d) - x;
    compare = ascendingComparator(f);
  }

  function left(a, x, lo, hi) {
    if (lo == null) lo = 0;
    if (hi == null) hi = a.length;
    while (lo < hi) {
      const mid = (lo + hi) >>> 1;
      if (compare(a[mid], x) < 0) lo = mid + 1;
      else hi = mid;
    }
    return lo;
  }

  function right(a, x, lo, hi) {
    if (lo == null) lo = 0;
    if (hi == null) hi = a.length;
    while (lo < hi) {
      const mid = (lo + hi) >>> 1;
      if (compare(a[mid], x) > 0) hi = mid;
      else lo = mid + 1;
    }
    return lo;
  }

  function center(a, x, lo, hi) {
    if (lo == null) lo = 0;
    if (hi == null) hi = a.length;
    const i = left(a, x, lo, hi - 1);
    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;
  }

  return {left, center, right};
}

function ascendingComparator(f) {
  return (d, x) => ascending(f(d), x);
}

function number(x) {
  return x === null ? NaN : +x;
}

function* numbers(values, valueof) {
  if (valueof === undefined) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        yield value;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {
        yield value;
      }
    }
  }
}

const ascendingBisect = bisector(ascending);
const bisectRight = ascendingBisect.right;
const bisectLeft = ascendingBisect.left;
const bisectCenter = bisector(number).center;

function count(values, valueof) {
  let count = 0;
  if (valueof === undefined) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        ++count;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {
        ++count;
      }
    }
  }
  return count;
}

function length$1(array) {
  return array.length | 0;
}

function empty(length) {
  return !(length > 0);
}

function arrayify(values) {
  return typeof values !== "object" || "length" in values ? values : Array.from(values);
}

function reducer(reduce) {
  return values => reduce(...values);
}

function cross(...values) {
  const reduce = typeof values[values.length - 1] === "function" && reducer(values.pop());
  values = values.map(arrayify);
  const lengths = values.map(length$1);
  const j = values.length - 1;
  const index = new Array(j + 1).fill(0);
  const product = [];
  if (j < 0 || lengths.some(empty)) return product;
  while (true) {
    product.push(index.map((j, i) => values[i][j]));
    let i = j;
    while (++index[i] === lengths[i]) {
      if (i === 0) return reduce ? product.map(reduce) : product;
      index[i--] = 0;
    }
  }
}

function cumsum(values, valueof) {
  var sum = 0, index = 0;
  return Float64Array.from(values, valueof === undefined
    ? v => (sum += +v || 0)
    : v => (sum += +valueof(v, index++, values) || 0));
}

function descending(a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
}

function variance(values, valueof) {
  let count = 0;
  let delta;
  let mean = 0;
  let sum = 0;
  if (valueof === undefined) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        delta = value - mean;
        mean += delta / ++count;
        sum += delta * (value - mean);
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {
        delta = value - mean;
        mean += delta / ++count;
        sum += delta * (value - mean);
      }
    }
  }
  if (count > 1) return sum / (count - 1);
}

function deviation(values, valueof) {
  const v = variance(values, valueof);
  return v ? Math.sqrt(v) : v;
}

function extent(values, valueof) {
  let min;
  let max;
  if (valueof === undefined) {
    for (const value of values) {
      if (value != null) {
        if (min === undefined) {
          if (value >= value) min = max = value;
        } else {
          if (min > value) min = value;
          if (max < value) max = value;
        }
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null) {
        if (min === undefined) {
          if (value >= value) min = max = value;
        } else {
          if (min > value) min = value;
          if (max < value) max = value;
        }
      }
    }
  }
  return [min, max];
}

// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423
class Adder {
  constructor() {
    this._partials = new Float64Array(32);
    this._n = 0;
  }
  add(x) {
    const p = this._partials;
    let i = 0;
    for (let j = 0; j < this._n && j < 32; j++) {
      const y = p[j],
        hi = x + y,
        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);
      if (lo) p[i++] = lo;
      x = hi;
    }
    p[i] = x;
    this._n = i + 1;
    return this;
  }
  valueOf() {
    const p = this._partials;
    let n = this._n, x, y, lo, hi = 0;
    if (n > 0) {
      hi = p[--n];
      while (n > 0) {
        x = hi;
        y = p[--n];
        hi = x + y;
        lo = y - (hi - x);
        if (lo) break;
      }
      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {
        y = lo * 2;
        x = hi + y;
        if (y == x - hi) hi = x;
      }
    }
    return hi;
  }
}

function fsum(values, valueof) {
  const adder = new Adder();
  if (valueof === undefined) {
    for (let value of values) {
      if (value = +value) {
        adder.add(value);
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if (value = +valueof(value, ++index, values)) {
        adder.add(value);
      }
    }
  }
  return +adder;
}

function fcumsum(values, valueof) {
  const adder = new Adder();
  let index = -1;
  return Float64Array.from(values, valueof === undefined
      ? v => adder.add(+v || 0)
      : v => adder.add(+valueof(v, ++index, values) || 0)
  );
}

class InternMap extends Map {
  constructor(entries, key = keyof) {
    super();
    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});
    if (entries != null) for (const [key, value] of entries) this.set(key, value);
  }
  get(key) {
    return super.get(intern_get(this, key));
  }
  has(key) {
    return super.has(intern_get(this, key));
  }
  set(key, value) {
    return super.set(intern_set(this, key), value);
  }
  delete(key) {
    return super.delete(intern_delete(this, key));
  }
}

class InternSet extends Set {
  constructor(values, key = keyof) {
    super();
    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});
    if (values != null) for (const value of values) this.add(value);
  }
  has(value) {
    return super.has(intern_get(this, value));
  }
  add(value) {
    return super.add(intern_set(this, value));
  }
  delete(value) {
    return super.delete(intern_delete(this, value));
  }
}

function intern_get({_intern, _key}, value) {
  const key = _key(value);
  return _intern.has(key) ? _intern.get(key) : value;
}

function intern_set({_intern, _key}, value) {
  const key = _key(value);
  if (_intern.has(key)) return _intern.get(key);
  _intern.set(key, value);
  return value;
}

function intern_delete({_intern, _key}, value) {
  const key = _key(value);
  if (_intern.has(key)) {
    value = _intern.get(value);
    _intern.delete(key);
  }
  return value;
}

function keyof(value) {
  return value !== null && typeof value === "object" ? value.valueOf() : value;
}

function identity(x) {
  return x;
}

function group(values, ...keys) {
  return nest(values, identity, identity, keys);
}

function groups(values, ...keys) {
  return nest(values, Array.from, identity, keys);
}

function rollup(values, reduce, ...keys) {
  return nest(values, identity, reduce, keys);
}

function rollups(values, reduce, ...keys) {
  return nest(values, Array.from, reduce, keys);
}

function index(values, ...keys) {
  return nest(values, identity, unique, keys);
}

function indexes(values, ...keys) {
  return nest(values, Array.from, unique, keys);
}

function unique(values) {
  if (values.length !== 1) throw new Error("duplicate key");
  return values[0];
}

function nest(values, map, reduce, keys) {
  return (function regroup(values, i) {
    if (i >= keys.length) return reduce(values);
    const groups = new InternMap();
    const keyof = keys[i++];
    let index = -1;
    for (const value of values) {
      const key = keyof(value, ++index, values);
      const group = groups.get(key);
      if (group) group.push(value);
      else groups.set(key, [value]);
    }
    for (const [key, values] of groups) {
      groups.set(key, regroup(values, i));
    }
    return map(groups);
  })(values, 0);
}

function permute(source, keys) {
  return Array.from(keys, key => source[key]);
}

function sort(values, ...F) {
  if (typeof values[Symbol.iterator] !== "function") throw new TypeError("values is not iterable");
  values = Array.from(values);
  let [f = ascending] = F;
  if (f.length === 1 || F.length > 1) {
    const index = Uint32Array.from(values, (d, i) => i);
    if (F.length > 1) {
      F = F.map(f => values.map(f));
      index.sort((i, j) => {
        for (const f of F) {
          const c = ascending(f[i], f[j]);
          if (c) return c;
        }
      });
    } else {
      f = values.map(f);
      index.sort((i, j) => ascending(f[i], f[j]));
    }
    return permute(values, index);
  }
  return values.sort(f);
}

function groupSort(values, reduce, key) {
  return (reduce.length === 1
    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))
    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))
    .map(([key]) => key);
}

var array = Array.prototype;

var slice = array.slice;

function constant(x) {
  return function() {
    return x;
  };
}

var e10 = Math.sqrt(50),
    e5 = Math.sqrt(10),
    e2 = Math.sqrt(2);

function ticks(start, stop, count) {
  var reverse,
      i = -1,
      n,
      ticks,
      step;

  stop = +stop, start = +start, count = +count;
  if (start === stop && count > 0) return [start];
  if (reverse = stop < start) n = start, start = stop, stop = n;
  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];

  if (step > 0) {
    let r0 = Math.round(start / step), r1 = Math.round(stop / step);
    if (r0 * step < start) ++r0;
    if (r1 * step > stop) --r1;
    ticks = new Array(n = r1 - r0 + 1);
    while (++i < n) ticks[i] = (r0 + i) * step;
  } else {
    step = -step;
    let r0 = Math.round(start * step), r1 = Math.round(stop * step);
    if (r0 / step < start) ++r0;
    if (r1 / step > stop) --r1;
    ticks = new Array(n = r1 - r0 + 1);
    while (++i < n) ticks[i] = (r0 + i) / step;
  }

  if (reverse) ticks.reverse();

  return ticks;
}

function tickIncrement(start, stop, count) {
  var step = (stop - start) / Math.max(0, count),
      power = Math.floor(Math.log(step) / Math.LN10),
      error = step / Math.pow(10, power);
  return power >= 0
      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)
      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);
}

function tickStep(start, stop, count) {
  var step0 = Math.abs(stop - start) / Math.max(0, count),
      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),
      error = step0 / step1;
  if (error >= e10) step1 *= 10;
  else if (error >= e5) step1 *= 5;
  else if (error >= e2) step1 *= 2;
  return stop < start ? -step1 : step1;
}

function nice(start, stop, count) {
  let prestep;
  while (true) {
    const step = tickIncrement(start, stop, count);
    if (step === prestep || step === 0 || !isFinite(step)) {
      return [start, stop];
    } else if (step > 0) {
      start = Math.floor(start / step) * step;
      stop = Math.ceil(stop / step) * step;
    } else if (step < 0) {
      start = Math.ceil(start * step) / step;
      stop = Math.floor(stop * step) / step;
    }
    prestep = step;
  }
}

function sturges(values) {
  return Math.ceil(Math.log(count(values)) / Math.LN2) + 1;
}

function bin() {
  var value = identity,
      domain = extent,
      threshold = sturges;

  function histogram(data) {
    if (!Array.isArray(data)) data = Array.from(data);

    var i,
        n = data.length,
        x,
        values = new Array(n);

    for (i = 0; i < n; ++i) {
      values[i] = value(data[i], i, data);
    }

    var xz = domain(values),
        x0 = xz[0],
        x1 = xz[1],
        tz = threshold(values, x0, x1);

    // Convert number of thresholds into uniform thresholds, and nice the
    // default domain accordingly.
    if (!Array.isArray(tz)) {
      const max = x1, tn = +tz;
      if (domain === extent) [x0, x1] = nice(x0, x1, tn);
      tz = ticks(x0, x1, tn);

      // If the last threshold is coincident with the domain’s upper bound, the
      // last bin will be zero-width. If the default domain is used, and this
      // last threshold is coincident with the maximum input value, we can
      // extend the niced upper bound by one tick to ensure uniform bin widths;
      // otherwise, we simply remove the last threshold. Note that we don’t
      // coerce values or the domain to numbers, and thus must be careful to
      // compare order (>=) rather than strict equality (===)!
      if (tz[tz.length - 1] >= x1) {
        if (max >= x1 && domain === extent) {
          const step = tickIncrement(x0, x1, tn);
          if (isFinite(step)) {
            if (step > 0) {
              x1 = (Math.floor(x1 / step) + 1) * step;
            } else if (step < 0) {
              x1 = (Math.ceil(x1 * -step) + 1) / -step;
            }
          }
        } else {
          tz.pop();
        }
      }
    }

    // Remove any thresholds outside the domain.
    var m = tz.length;
    while (tz[0] <= x0) tz.shift(), --m;
    while (tz[m - 1] > x1) tz.pop(), --m;

    var bins = new Array(m + 1),
        bin;

    // Initialize bins.
    for (i = 0; i <= m; ++i) {
      bin = bins[i] = [];
      bin.x0 = i > 0 ? tz[i - 1] : x0;
      bin.x1 = i < m ? tz[i] : x1;
    }

    // Assign data to bins by value, ignoring any outside the domain.
    for (i = 0; i < n; ++i) {
      x = values[i];
      if (x0 <= x && x <= x1) {
        bins[bisectRight(tz, x, 0, m)].push(data[i]);
      }
    }

    return bins;
  }

  histogram.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant(_), histogram) : value;
  };

  histogram.domain = function(_) {
    return arguments.length ? (domain = typeof _ === "function" ? _ : constant([_[0], _[1]]), histogram) : domain;
  };

  histogram.thresholds = function(_) {
    return arguments.length ? (threshold = typeof _ === "function" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;
  };

  return histogram;
}

function max(values, valueof) {
  let max;
  if (valueof === undefined) {
    for (const value of values) {
      if (value != null
          && (max < value || (max === undefined && value >= value))) {
        max = value;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null
          && (max < value || (max === undefined && value >= value))) {
        max = value;
      }
    }
  }
  return max;
}

function min(values, valueof) {
  let min;
  if (valueof === undefined) {
    for (const value of values) {
      if (value != null
          && (min > value || (min === undefined && value >= value))) {
        min = value;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null
          && (min > value || (min === undefined && value >= value))) {
        min = value;
      }
    }
  }
  return min;
}

// Based on https://github.com/mourner/quickselect
// ISC license, Copyright 2018 Vladimir Agafonkin.
function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {
  while (right > left) {
    if (right - left > 600) {
      const n = right - left + 1;
      const m = k - left + 1;
      const z = Math.log(n);
      const s = 0.5 * Math.exp(2 * z / 3);
      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);
      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));
      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));
      quickselect(array, k, newLeft, newRight, compare);
    }

    const t = array[k];
    let i = left;
    let j = right;

    swap(array, left, k);
    if (compare(array[right], t) > 0) swap(array, left, right);

    while (i < j) {
      swap(array, i, j), ++i, --j;
      while (compare(array[i], t) < 0) ++i;
      while (compare(array[j], t) > 0) --j;
    }

    if (compare(array[left], t) === 0) swap(array, left, j);
    else ++j, swap(array, j, right);

    if (j <= k) left = j + 1;
    if (k <= j) right = j - 1;
  }
  return array;
}

function swap(array, i, j) {
  const t = array[i];
  array[i] = array[j];
  array[j] = t;
}

function quantile(values, p, valueof) {
  values = Float64Array.from(numbers(values, valueof));
  if (!(n = values.length)) return;
  if ((p = +p) <= 0 || n < 2) return min(values);
  if (p >= 1) return max(values);
  var n,
      i = (n - 1) * p,
      i0 = Math.floor(i),
      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),
      value1 = min(values.subarray(i0 + 1));
  return value0 + (value1 - value0) * (i - i0);
}

function quantileSorted(values, p, valueof = number) {
  if (!(n = values.length)) return;
  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);
  if (p >= 1) return +valueof(values[n - 1], n - 1, values);
  var n,
      i = (n - 1) * p,
      i0 = Math.floor(i),
      value0 = +valueof(values[i0], i0, values),
      value1 = +valueof(values[i0 + 1], i0 + 1, values);
  return value0 + (value1 - value0) * (i - i0);
}

function freedmanDiaconis(values, min, max) {
  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(count(values), -1 / 3)));
}

function scott(values, min, max) {
  return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(count(values), -1 / 3)));
}

function maxIndex(values, valueof) {
  let max;
  let maxIndex = -1;
  let index = -1;
  if (valueof === undefined) {
    for (const value of values) {
      ++index;
      if (value != null
          && (max < value || (max === undefined && value >= value))) {
        max = value, maxIndex = index;
      }
    }
  } else {
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null
          && (max < value || (max === undefined && value >= value))) {
        max = value, maxIndex = index;
      }
    }
  }
  return maxIndex;
}

function mean(values, valueof) {
  let count = 0;
  let sum = 0;
  if (valueof === undefined) {
    for (let value of values) {
      if (value != null && (value = +value) >= value) {
        ++count, sum += value;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {
        ++count, sum += value;
      }
    }
  }
  if (count) return sum / count;
}

function median(values, valueof) {
  return quantile(values, 0.5, valueof);
}

function* flatten(arrays) {
  for (const array of arrays) {
    yield* array;
  }
}

function merge(arrays) {
  return Array.from(flatten(arrays));
}

function minIndex(values, valueof) {
  let min;
  let minIndex = -1;
  let index = -1;
  if (valueof === undefined) {
    for (const value of values) {
      ++index;
      if (value != null
          && (min > value || (min === undefined && value >= value))) {
        min = value, minIndex = index;
      }
    }
  } else {
    for (let value of values) {
      if ((value = valueof(value, ++index, values)) != null
          && (min > value || (min === undefined && value >= value))) {
        min = value, minIndex = index;
      }
    }
  }
  return minIndex;
}

function pairs(values, pairof = pair) {
  const pairs = [];
  let previous;
  let first = false;
  for (const value of values) {
    if (first) pairs.push(pairof(previous, value));
    previous = value;
    first = true;
  }
  return pairs;
}

function pair(a, b) {
  return [a, b];
}

function range(start, stop, step) {
  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;

  var i = -1,
      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,
      range = new Array(n);

  while (++i < n) {
    range[i] = start + i * step;
  }

  return range;
}

function least(values, compare = ascending) {
  let min;
  let defined = false;
  if (compare.length === 1) {
    let minValue;
    for (const element of values) {
      const value = compare(element);
      if (defined
          ? ascending(value, minValue) < 0
          : ascending(value, value) === 0) {
        min = element;
        minValue = value;
        defined = true;
      }
    }
  } else {
    for (const value of values) {
      if (defined
          ? compare(value, min) < 0
          : compare(value, value) === 0) {
        min = value;
        defined = true;
      }
    }
  }
  return min;
}

function leastIndex(values, compare = ascending) {
  if (compare.length === 1) return minIndex(values, compare);
  let minValue;
  let min = -1;
  let index = -1;
  for (const value of values) {
    ++index;
    if (min < 0
        ? compare(value, value) === 0
        : compare(value, minValue) < 0) {
      minValue = value;
      min = index;
    }
  }
  return min;
}

function greatest(values, compare = ascending) {
  let max;
  let defined = false;
  if (compare.length === 1) {
    let maxValue;
    for (const element of values) {
      const value = compare(element);
      if (defined
          ? ascending(value, maxValue) > 0
          : ascending(value, value) === 0) {
        max = element;
        maxValue = value;
        defined = true;
      }
    }
  } else {
    for (const value of values) {
      if (defined
          ? compare(value, max) > 0
          : compare(value, value) === 0) {
        max = value;
        defined = true;
      }
    }
  }
  return max;
}

function greatestIndex(values, compare = ascending) {
  if (compare.length === 1) return maxIndex(values, compare);
  let maxValue;
  let max = -1;
  let index = -1;
  for (const value of values) {
    ++index;
    if (max < 0
        ? compare(value, value) === 0
        : compare(value, maxValue) > 0) {
      maxValue = value;
      max = index;
    }
  }
  return max;
}

function scan(values, compare) {
  const index = leastIndex(values, compare);
  return index < 0 ? undefined : index;
}

var shuffle = shuffler(Math.random);

function shuffler(random) {
  return function shuffle(array, i0 = 0, i1 = array.length) {
    let m = i1 - (i0 = +i0);
    while (m) {
      const i = random() * m-- | 0, t = array[m + i0];
      array[m + i0] = array[i + i0];
      array[i + i0] = t;
    }
    return array;
  };
}

function sum(values, valueof) {
  let sum = 0;
  if (valueof === undefined) {
    for (let value of values) {
      if (value = +value) {
        sum += value;
      }
    }
  } else {
    let index = -1;
    for (let value of values) {
      if (value = +valueof(value, ++index, values)) {
        sum += value;
      }
    }
  }
  return sum;
}

function transpose(matrix) {
  if (!(n = matrix.length)) return [];
  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {
    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {
      row[j] = matrix[j][i];
    }
  }
  return transpose;
}

function length(d) {
  return d.length;
}

function zip() {
  return transpose(arguments);
}

function every(values, test) {
  if (typeof test !== "function") throw new TypeError("test is not a function");
  let index = -1;
  for (const value of values) {
    if (!test(value, ++index, values)) {
      return false;
    }
  }
  return true;
}

function some(values, test) {
  if (typeof test !== "function") throw new TypeError("test is not a function");
  let index = -1;
  for (const value of values) {
    if (test(value, ++index, values)) {
      return true;
    }
  }
  return false;
}

function filter(values, test) {
  if (typeof test !== "function") throw new TypeError("test is not a function");
  const array = [];
  let index = -1;
  for (const value of values) {
    if (test(value, ++index, values)) {
      array.push(value);
    }
  }
  return array;
}

function map(values, mapper) {
  if (typeof values[Symbol.iterator] !== "function") throw new TypeError("values is not iterable");
  if (typeof mapper !== "function") throw new TypeError("mapper is not a function");
  return Array.from(values, (value, index) => mapper(value, index, values));
}

function reduce(values, reducer, value) {
  if (typeof reducer !== "function") throw new TypeError("reducer is not a function");
  const iterator = values[Symbol.iterator]();
  let done, next, index = -1;
  if (arguments.length < 3) {
    ({done, value} = iterator.next());
    if (done) return;
    ++index;
  }
  while (({done, value: next} = iterator.next()), !done) {
    value = reducer(value, next, ++index, values);
  }
  return value;
}

function reverse(values) {
  if (typeof values[Symbol.iterator] !== "function") throw new TypeError("values is not iterable");
  return Array.from(values).reverse();
}

function difference(values, ...others) {
  values = new Set(values);
  for (const other of others) {
    for (const value of other) {
      values.delete(value);
    }
  }
  return values;
}

function disjoint(values, other) {
  const iterator = other[Symbol.iterator](), set = new Set();
  for (const v of values) {
    if (set.has(v)) return false;
    let value, done;
    while (({value, done} = iterator.next())) {
      if (done) break;
      if (Object.is(v, value)) return false;
      set.add(value);
    }
  }
  return true;
}

function set(values) {
  return values instanceof Set ? values : new Set(values);
}

function intersection(values, ...others) {
  values = new Set(values);
  others = others.map(set);
  out: for (const value of values) {
    for (const other of others) {
      if (!other.has(value)) {
        values.delete(value);
        continue out;
      }
    }
  }
  return values;
}

function superset(values, other) {
  const iterator = values[Symbol.iterator](), set = new Set();
  for (const o of other) {
    if (set.has(o)) continue;
    let value, done;
    while (({value, done} = iterator.next())) {
      if (done) return false;
      set.add(value);
      if (Object.is(o, value)) break;
    }
  }
  return true;
}

function subset(values, other) {
  return superset(other, values);
}

function union(...others) {
  const set = new Set();
  for (const other of others) {
    for (const o of other) {
      set.add(o);
    }
  }
  return set;
}

exports.Adder = Adder;
exports.InternMap = InternMap;
exports.InternSet = InternSet;
exports.ascending = ascending;
exports.bin = bin;
exports.bisect = bisectRight;
exports.bisectCenter = bisectCenter;
exports.bisectLeft = bisectLeft;
exports.bisectRight = bisectRight;
exports.bisector = bisector;
exports.count = count;
exports.cross = cross;
exports.cumsum = cumsum;
exports.descending = descending;
exports.deviation = deviation;
exports.difference = difference;
exports.disjoint = disjoint;
exports.every = every;
exports.extent = extent;
exports.fcumsum = fcumsum;
exports.filter = filter;
exports.fsum = fsum;
exports.greatest = greatest;
exports.greatestIndex = greatestIndex;
exports.group = group;
exports.groupSort = groupSort;
exports.groups = groups;
exports.histogram = bin;
exports.index = index;
exports.indexes = indexes;
exports.intersection = intersection;
exports.least = least;
exports.leastIndex = leastIndex;
exports.map = map;
exports.max = max;
exports.maxIndex = maxIndex;
exports.mean = mean;
exports.median = median;
exports.merge = merge;
exports.min = min;
exports.minIndex = minIndex;
exports.nice = nice;
exports.pairs = pairs;
exports.permute = permute;
exports.quantile = quantile;
exports.quantileSorted = quantileSorted;
exports.quickselect = quickselect;
exports.range = range;
exports.reduce = reduce;
exports.reverse = reverse;
exports.rollup = rollup;
exports.rollups = rollups;
exports.scan = scan;
exports.shuffle = shuffle;
exports.shuffler = shuffler;
exports.some = some;
exports.sort = sort;
exports.subset = subset;
exports.sum = sum;
exports.superset = superset;
exports.thresholdFreedmanDiaconis = freedmanDiaconis;
exports.thresholdScott = scott;
exports.thresholdSturges = sturges;
exports.tickIncrement = tickIncrement;
exports.tickStep = tickStep;
exports.ticks = ticks;
exports.transpose = transpose;
exports.union = union;
exports.variance = variance;
exports.zip = zip;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],61:[function(require,module,exports){
// https://d3js.org/d3-color/ v1.4.1 Copyright 2020 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

function define(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
}

function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition) prototype[key] = definition[key];
  return prototype;
}

function Color() {}

var darker = 0.7;
var brighter = 1 / darker;

var reI = "\\s*([+-]?\\d+)\\s*",
    reN = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
    reP = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
    reHex = /^#([0-9a-f]{3,8})$/,
    reRgbInteger = new RegExp("^rgb\\(" + [reI, reI, reI] + "\\)$"),
    reRgbPercent = new RegExp("^rgb\\(" + [reP, reP, reP] + "\\)$"),
    reRgbaInteger = new RegExp("^rgba\\(" + [reI, reI, reI, reN] + "\\)$"),
    reRgbaPercent = new RegExp("^rgba\\(" + [reP, reP, reP, reN] + "\\)$"),
    reHslPercent = new RegExp("^hsl\\(" + [reN, reP, reP] + "\\)$"),
    reHslaPercent = new RegExp("^hsla\\(" + [reN, reP, reP, reN] + "\\)$");

var named = {
  aliceblue: 0xf0f8ff,
  antiquewhite: 0xfaebd7,
  aqua: 0x00ffff,
  aquamarine: 0x7fffd4,
  azure: 0xf0ffff,
  beige: 0xf5f5dc,
  bisque: 0xffe4c4,
  black: 0x000000,
  blanchedalmond: 0xffebcd,
  blue: 0x0000ff,
  blueviolet: 0x8a2be2,
  brown: 0xa52a2a,
  burlywood: 0xdeb887,
  cadetblue: 0x5f9ea0,
  chartreuse: 0x7fff00,
  chocolate: 0xd2691e,
  coral: 0xff7f50,
  cornflowerblue: 0x6495ed,
  cornsilk: 0xfff8dc,
  crimson: 0xdc143c,
  cyan: 0x00ffff,
  darkblue: 0x00008b,
  darkcyan: 0x008b8b,
  darkgoldenrod: 0xb8860b,
  darkgray: 0xa9a9a9,
  darkgreen: 0x006400,
  darkgrey: 0xa9a9a9,
  darkkhaki: 0xbdb76b,
  darkmagenta: 0x8b008b,
  darkolivegreen: 0x556b2f,
  darkorange: 0xff8c00,
  darkorchid: 0x9932cc,
  darkred: 0x8b0000,
  darksalmon: 0xe9967a,
  darkseagreen: 0x8fbc8f,
  darkslateblue: 0x483d8b,
  darkslategray: 0x2f4f4f,
  darkslategrey: 0x2f4f4f,
  darkturquoise: 0x00ced1,
  darkviolet: 0x9400d3,
  deeppink: 0xff1493,
  deepskyblue: 0x00bfff,
  dimgray: 0x696969,
  dimgrey: 0x696969,
  dodgerblue: 0x1e90ff,
  firebrick: 0xb22222,
  floralwhite: 0xfffaf0,
  forestgreen: 0x228b22,
  fuchsia: 0xff00ff,
  gainsboro: 0xdcdcdc,
  ghostwhite: 0xf8f8ff,
  gold: 0xffd700,
  goldenrod: 0xdaa520,
  gray: 0x808080,
  green: 0x008000,
  greenyellow: 0xadff2f,
  grey: 0x808080,
  honeydew: 0xf0fff0,
  hotpink: 0xff69b4,
  indianred: 0xcd5c5c,
  indigo: 0x4b0082,
  ivory: 0xfffff0,
  khaki: 0xf0e68c,
  lavender: 0xe6e6fa,
  lavenderblush: 0xfff0f5,
  lawngreen: 0x7cfc00,
  lemonchiffon: 0xfffacd,
  lightblue: 0xadd8e6,
  lightcoral: 0xf08080,
  lightcyan: 0xe0ffff,
  lightgoldenrodyellow: 0xfafad2,
  lightgray: 0xd3d3d3,
  lightgreen: 0x90ee90,
  lightgrey: 0xd3d3d3,
  lightpink: 0xffb6c1,
  lightsalmon: 0xffa07a,
  lightseagreen: 0x20b2aa,
  lightskyblue: 0x87cefa,
  lightslategray: 0x778899,
  lightslategrey: 0x778899,
  lightsteelblue: 0xb0c4de,
  lightyellow: 0xffffe0,
  lime: 0x00ff00,
  limegreen: 0x32cd32,
  linen: 0xfaf0e6,
  magenta: 0xff00ff,
  maroon: 0x800000,
  mediumaquamarine: 0x66cdaa,
  mediumblue: 0x0000cd,
  mediumorchid: 0xba55d3,
  mediumpurple: 0x9370db,
  mediumseagreen: 0x3cb371,
  mediumslateblue: 0x7b68ee,
  mediumspringgreen: 0x00fa9a,
  mediumturquoise: 0x48d1cc,
  mediumvioletred: 0xc71585,
  midnightblue: 0x191970,
  mintcream: 0xf5fffa,
  mistyrose: 0xffe4e1,
  moccasin: 0xffe4b5,
  navajowhite: 0xffdead,
  navy: 0x000080,
  oldlace: 0xfdf5e6,
  olive: 0x808000,
  olivedrab: 0x6b8e23,
  orange: 0xffa500,
  orangered: 0xff4500,
  orchid: 0xda70d6,
  palegoldenrod: 0xeee8aa,
  palegreen: 0x98fb98,
  paleturquoise: 0xafeeee,
  palevioletred: 0xdb7093,
  papayawhip: 0xffefd5,
  peachpuff: 0xffdab9,
  peru: 0xcd853f,
  pink: 0xffc0cb,
  plum: 0xdda0dd,
  powderblue: 0xb0e0e6,
  purple: 0x800080,
  rebeccapurple: 0x663399,
  red: 0xff0000,
  rosybrown: 0xbc8f8f,
  royalblue: 0x4169e1,
  saddlebrown: 0x8b4513,
  salmon: 0xfa8072,
  sandybrown: 0xf4a460,
  seagreen: 0x2e8b57,
  seashell: 0xfff5ee,
  sienna: 0xa0522d,
  silver: 0xc0c0c0,
  skyblue: 0x87ceeb,
  slateblue: 0x6a5acd,
  slategray: 0x708090,
  slategrey: 0x708090,
  snow: 0xfffafa,
  springgreen: 0x00ff7f,
  steelblue: 0x4682b4,
  tan: 0xd2b48c,
  teal: 0x008080,
  thistle: 0xd8bfd8,
  tomato: 0xff6347,
  turquoise: 0x40e0d0,
  violet: 0xee82ee,
  wheat: 0xf5deb3,
  white: 0xffffff,
  whitesmoke: 0xf5f5f5,
  yellow: 0xffff00,
  yellowgreen: 0x9acd32
};

define(Color, color, {
  copy: function(channels) {
    return Object.assign(new this.constructor, this, channels);
  },
  displayable: function() {
    return this.rgb().displayable();
  },
  hex: color_formatHex, // Deprecated! Use color.formatHex.
  formatHex: color_formatHex,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});

function color_formatHex() {
  return this.rgb().formatHex();
}

function color_formatHsl() {
  return hslConvert(this).formatHsl();
}

function color_formatRgb() {
  return this.rgb().formatRgb();
}

function color(format) {
  var m, l;
  format = (format + "").trim().toLowerCase();
  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000
      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00
      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000
      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000
      : null) // invalid hex
      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)
      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)
      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)
      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)
      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)
      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)
      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins
      : format === "transparent" ? new Rgb(NaN, NaN, NaN, 0)
      : null;
}

function rgbn(n) {
  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);
}

function rgba(r, g, b, a) {
  if (a <= 0) r = g = b = NaN;
  return new Rgb(r, g, b, a);
}

function rgbConvert(o) {
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Rgb;
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}

function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}

function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}

define(Rgb, rgb, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return (-0.5 <= this.r && this.r < 255.5)
        && (-0.5 <= this.g && this.g < 255.5)
        && (-0.5 <= this.b && this.b < 255.5)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex, // Deprecated! Use color.formatHex.
  formatHex: rgb_formatHex,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));

function rgb_formatHex() {
  return "#" + hex(this.r) + hex(this.g) + hex(this.b);
}

function rgb_formatRgb() {
  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));
  return (a === 1 ? "rgb(" : "rgba(")
      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", "
      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", "
      + Math.max(0, Math.min(255, Math.round(this.b) || 0))
      + (a === 1 ? ")" : ", " + a + ")");
}

function hex(value) {
  value = Math.max(0, Math.min(255, Math.round(value) || 0));
  return (value < 16 ? "0" : "") + value.toString(16);
}

function hsla(h, s, l, a) {
  if (a <= 0) h = s = l = NaN;
  else if (l <= 0 || l >= 1) h = s = NaN;
  else if (s <= 0) h = NaN;
  return new Hsl(h, s, l, a);
}

function hslConvert(o) {
  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Hsl;
  if (o instanceof Hsl) return o;
  o = o.rgb();
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      h = NaN,
      s = max - min,
      l = (max + min) / 2;
  if (s) {
    if (r === max) h = (g - b) / s + (g < b) * 6;
    else if (g === max) h = (b - r) / s + 2;
    else h = (r - g) / s + 4;
    s /= l < 0.5 ? max + min : 2 - max - min;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}

function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}

function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

define(Hsl, hsl, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = this.h % 360 + (this.h < 0) * 360,
        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,
        l = this.l,
        m2 = l + (l < 0.5 ? l : 1 - l) * s,
        m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s))
        && (0 <= this.l && this.l <= 1)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl: function() {
    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));
    return (a === 1 ? "hsl(" : "hsla(")
        + (this.h || 0) + ", "
        + (this.s || 0) * 100 + "%, "
        + (this.l || 0) * 100 + "%"
        + (a === 1 ? ")" : ", " + a + ")");
  }
}));

/* From FvD 13.37, CSS Color Module Level 3 */
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60
      : h < 180 ? m2
      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60
      : m1) * 255;
}

var deg2rad = Math.PI / 180;
var rad2deg = 180 / Math.PI;

// https://observablehq.com/@mbostock/lab-and-rgb
var K = 18,
    Xn = 0.96422,
    Yn = 1,
    Zn = 0.82521,
    t0 = 4 / 29,
    t1 = 6 / 29,
    t2 = 3 * t1 * t1,
    t3 = t1 * t1 * t1;

function labConvert(o) {
  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);
  if (o instanceof Hcl) return hcl2lab(o);
  if (!(o instanceof Rgb)) o = rgbConvert(o);
  var r = rgb2lrgb(o.r),
      g = rgb2lrgb(o.g),
      b = rgb2lrgb(o.b),
      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;
  if (r === g && g === b) x = z = y; else {
    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);
    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);
  }
  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);
}

function gray(l, opacity) {
  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);
}

function lab(l, a, b, opacity) {
  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);
}

function Lab(l, a, b, opacity) {
  this.l = +l;
  this.a = +a;
  this.b = +b;
  this.opacity = +opacity;
}

define(Lab, lab, extend(Color, {
  brighter: function(k) {
    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  darker: function(k) {
    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  rgb: function() {
    var y = (this.l + 16) / 116,
        x = isNaN(this.a) ? y : y + this.a / 500,
        z = isNaN(this.b) ? y : y - this.b / 200;
    x = Xn * lab2xyz(x);
    y = Yn * lab2xyz(y);
    z = Zn * lab2xyz(z);
    return new Rgb(
      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),
      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),
      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),
      this.opacity
    );
  }
}));

function xyz2lab(t) {
  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;
}

function lab2xyz(t) {
  return t > t1 ? t * t * t : t2 * (t - t0);
}

function lrgb2rgb(x) {
  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);
}

function rgb2lrgb(x) {
  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);
}

function hclConvert(o) {
  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof Lab)) o = labConvert(o);
  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);
  var h = Math.atan2(o.b, o.a) * rad2deg;
  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}

function lch(l, c, h, opacity) {
  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}

function hcl(h, c, l, opacity) {
  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}

function Hcl(h, c, l, opacity) {
  this.h = +h;
  this.c = +c;
  this.l = +l;
  this.opacity = +opacity;
}

function hcl2lab(o) {
  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);
  var h = o.h * deg2rad;
  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
}

define(Hcl, hcl, extend(Color, {
  brighter: function(k) {
    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);
  },
  darker: function(k) {
    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);
  },
  rgb: function() {
    return hcl2lab(this).rgb();
  }
}));

var A = -0.14861,
    B = +1.78277,
    C = -0.29227,
    D = -0.90649,
    E = +1.97294,
    ED = E * D,
    EB = E * B,
    BC_DA = B * C - D * A;

function cubehelixConvert(o) {
  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Rgb)) o = rgbConvert(o);
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),
      bl = b - l,
      k = (E * (g - l) - C * bl) / D,
      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1
      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;
  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);
}

function cubehelix(h, s, l, opacity) {
  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);
}

function Cubehelix(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

define(Cubehelix, cubehelix, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,
        l = +this.l,
        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),
        cosh = Math.cos(h),
        sinh = Math.sin(h);
    return new Rgb(
      255 * (l + a * (A * cosh + B * sinh)),
      255 * (l + a * (C * cosh + D * sinh)),
      255 * (l + a * (E * cosh)),
      this.opacity
    );
  }
}));

exports.color = color;
exports.cubehelix = cubehelix;
exports.gray = gray;
exports.hcl = hcl;
exports.hsl = hsl;
exports.lab = lab;
exports.lch = lch;
exports.rgb = rgb;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],62:[function(require,module,exports){
// https://d3js.org/d3-dispatch/ v1.0.6 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

var noop = {value: function() {}};

function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || (t in _) || /[\s.]/.test(t)) throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}

function Dispatch(_) {
  this._ = _;
}

function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t)) throw new Error("unknown type: " + t);
    return {type: t, name: name};
  });
}

Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._,
        T = parseTypenames(typename + "", _),
        t,
        i = -1,
        n = T.length;

    // If no callback was specified, return the callback of the given type and name.
    if (arguments.length < 2) {
      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;
      return;
    }

    // If a type was specified, set the callback for the given type and name.
    // Otherwise, if a null callback was specified, remove callbacks of the given name.
    if (callback != null && typeof callback !== "function") throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);
      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);
    }

    return this;
  },
  copy: function() {
    var copy = {}, _ = this._;
    for (var t in _) copy[t] = _[t].slice();
    return new Dispatch(copy);
  },
  call: function(type, that) {
    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);
  },
  apply: function(type, that, args) {
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);
  }
};

function get(type, name) {
  for (var i = 0, n = type.length, c; i < n; ++i) {
    if ((c = type[i]).name === name) {
      return c.value;
    }
  }
}

function set(type, name, callback) {
  for (var i = 0, n = type.length; i < n; ++i) {
    if (type[i].name === name) {
      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));
      break;
    }
  }
  if (callback != null) type.push({name: name, value: callback});
  return type;
}

exports.dispatch = dispatch;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],63:[function(require,module,exports){
// https://d3js.org/d3-drag/ v1.2.5 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-dispatch'), require('d3-selection')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-dispatch', 'd3-selection'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}, global.d3, global.d3));
}(this, function (exports, d3Dispatch, d3Selection) { 'use strict';

function nopropagation() {
  d3Selection.event.stopImmediatePropagation();
}

function noevent() {
  d3Selection.event.preventDefault();
  d3Selection.event.stopImmediatePropagation();
}

function nodrag(view) {
  var root = view.document.documentElement,
      selection = d3Selection.select(view).on("dragstart.drag", noevent, true);
  if ("onselectstart" in root) {
    selection.on("selectstart.drag", noevent, true);
  } else {
    root.__noselect = root.style.MozUserSelect;
    root.style.MozUserSelect = "none";
  }
}

function yesdrag(view, noclick) {
  var root = view.document.documentElement,
      selection = d3Selection.select(view).on("dragstart.drag", null);
  if (noclick) {
    selection.on("click.drag", noevent, true);
    setTimeout(function() { selection.on("click.drag", null); }, 0);
  }
  if ("onselectstart" in root) {
    selection.on("selectstart.drag", null);
  } else {
    root.style.MozUserSelect = root.__noselect;
    delete root.__noselect;
  }
}

function constant(x) {
  return function() {
    return x;
  };
}

function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {
  this.target = target;
  this.type = type;
  this.subject = subject;
  this.identifier = id;
  this.active = active;
  this.x = x;
  this.y = y;
  this.dx = dx;
  this.dy = dy;
  this._ = dispatch;
}

DragEvent.prototype.on = function() {
  var value = this._.on.apply(this._, arguments);
  return value === this._ ? this : value;
};

// Ignore right-click, since that should open the context menu.
function defaultFilter() {
  return !d3Selection.event.ctrlKey && !d3Selection.event.button;
}

function defaultContainer() {
  return this.parentNode;
}

function defaultSubject(d) {
  return d == null ? {x: d3Selection.event.x, y: d3Selection.event.y} : d;
}

function defaultTouchable() {
  return navigator.maxTouchPoints || ("ontouchstart" in this);
}

function drag() {
  var filter = defaultFilter,
      container = defaultContainer,
      subject = defaultSubject,
      touchable = defaultTouchable,
      gestures = {},
      listeners = d3Dispatch.dispatch("start", "drag", "end"),
      active = 0,
      mousedownx,
      mousedowny,
      mousemoving,
      touchending,
      clickDistance2 = 0;

  function drag(selection) {
    selection
        .on("mousedown.drag", mousedowned)
      .filter(touchable)
        .on("touchstart.drag", touchstarted)
        .on("touchmove.drag", touchmoved)
        .on("touchend.drag touchcancel.drag", touchended)
        .style("touch-action", "none")
        .style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }

  function mousedowned() {
    if (touchending || !filter.apply(this, arguments)) return;
    var gesture = beforestart("mouse", container.apply(this, arguments), d3Selection.mouse, this, arguments);
    if (!gesture) return;
    d3Selection.select(d3Selection.event.view).on("mousemove.drag", mousemoved, true).on("mouseup.drag", mouseupped, true);
    nodrag(d3Selection.event.view);
    nopropagation();
    mousemoving = false;
    mousedownx = d3Selection.event.clientX;
    mousedowny = d3Selection.event.clientY;
    gesture("start");
  }

  function mousemoved() {
    noevent();
    if (!mousemoving) {
      var dx = d3Selection.event.clientX - mousedownx, dy = d3Selection.event.clientY - mousedowny;
      mousemoving = dx * dx + dy * dy > clickDistance2;
    }
    gestures.mouse("drag");
  }

  function mouseupped() {
    d3Selection.select(d3Selection.event.view).on("mousemove.drag mouseup.drag", null);
    yesdrag(d3Selection.event.view, mousemoving);
    noevent();
    gestures.mouse("end");
  }

  function touchstarted() {
    if (!filter.apply(this, arguments)) return;
    var touches = d3Selection.event.changedTouches,
        c = container.apply(this, arguments),
        n = touches.length, i, gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = beforestart(touches[i].identifier, c, d3Selection.touch, this, arguments)) {
        nopropagation();
        gesture("start");
      }
    }
  }

  function touchmoved() {
    var touches = d3Selection.event.changedTouches,
        n = touches.length, i, gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        noevent();
        gesture("drag");
      }
    }
  }

  function touchended() {
    var touches = d3Selection.event.changedTouches,
        n = touches.length, i, gesture;

    if (touchending) clearTimeout(touchending);
    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!
    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        nopropagation();
        gesture("end");
      }
    }
  }

  function beforestart(id, container, point, that, args) {
    var p = point(container, id), s, dx, dy,
        sublisteners = listeners.copy();

    if (!d3Selection.customEvent(new DragEvent(drag, "beforestart", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {
      if ((d3Selection.event.subject = s = subject.apply(that, args)) == null) return false;
      dx = s.x - p[0] || 0;
      dy = s.y - p[1] || 0;
      return true;
    })) return;

    return function gesture(type) {
      var p0 = p, n;
      switch (type) {
        case "start": gestures[id] = gesture, n = active++; break;
        case "end": delete gestures[id], --active; // nobreak
        case "drag": p = point(container, id), n = active; break;
      }
      d3Selection.customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);
    };
  }

  drag.filter = function(_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : constant(!!_), drag) : filter;
  };

  drag.container = function(_) {
    return arguments.length ? (container = typeof _ === "function" ? _ : constant(_), drag) : container;
  };

  drag.subject = function(_) {
    return arguments.length ? (subject = typeof _ === "function" ? _ : constant(_), drag) : subject;
  };

  drag.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : constant(!!_), drag) : touchable;
  };

  drag.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? drag : value;
  };

  drag.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);
  };

  return drag;
}

exports.drag = drag;
exports.dragDisable = nodrag;
exports.dragEnable = yesdrag;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{"d3-dispatch":62,"d3-selection":72}],64:[function(require,module,exports){
// https://d3js.org/d3-ease/ v1.0.7 Copyright 2020 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

function linear(t) {
  return +t;
}

function quadIn(t) {
  return t * t;
}

function quadOut(t) {
  return t * (2 - t);
}

function quadInOut(t) {
  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;
}

function cubicIn(t) {
  return t * t * t;
}

function cubicOut(t) {
  return --t * t * t + 1;
}

function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

var exponent = 3;

var polyIn = (function custom(e) {
  e = +e;

  function polyIn(t) {
    return Math.pow(t, e);
  }

  polyIn.exponent = custom;

  return polyIn;
})(exponent);

var polyOut = (function custom(e) {
  e = +e;

  function polyOut(t) {
    return 1 - Math.pow(1 - t, e);
  }

  polyOut.exponent = custom;

  return polyOut;
})(exponent);

var polyInOut = (function custom(e) {
  e = +e;

  function polyInOut(t) {
    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;
  }

  polyInOut.exponent = custom;

  return polyInOut;
})(exponent);

var pi = Math.PI,
    halfPi = pi / 2;

function sinIn(t) {
  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);
}

function sinOut(t) {
  return Math.sin(t * halfPi);
}

function sinInOut(t) {
  return (1 - Math.cos(pi * t)) / 2;
}

// tpmt is two power minus ten times t scaled to [0,1]
function tpmt(x) {
  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;
}

function expIn(t) {
  return tpmt(1 - +t);
}

function expOut(t) {
  return 1 - tpmt(t);
}

function expInOut(t) {
  return ((t *= 2) <= 1 ? tpmt(1 - t) : 2 - tpmt(t - 1)) / 2;
}

function circleIn(t) {
  return 1 - Math.sqrt(1 - t * t);
}

function circleOut(t) {
  return Math.sqrt(1 - --t * t);
}

function circleInOut(t) {
  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;
}

var b1 = 4 / 11,
    b2 = 6 / 11,
    b3 = 8 / 11,
    b4 = 3 / 4,
    b5 = 9 / 11,
    b6 = 10 / 11,
    b7 = 15 / 16,
    b8 = 21 / 22,
    b9 = 63 / 64,
    b0 = 1 / b1 / b1;

function bounceIn(t) {
  return 1 - bounceOut(1 - t);
}

function bounceOut(t) {
  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;
}

function bounceInOut(t) {
  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;
}

var overshoot = 1.70158;

var backIn = (function custom(s) {
  s = +s;

  function backIn(t) {
    return (t = +t) * t * (s * (t - 1) + t);
  }

  backIn.overshoot = custom;

  return backIn;
})(overshoot);

var backOut = (function custom(s) {
  s = +s;

  function backOut(t) {
    return --t * t * ((t + 1) * s + t) + 1;
  }

  backOut.overshoot = custom;

  return backOut;
})(overshoot);

var backInOut = (function custom(s) {
  s = +s;

  function backInOut(t) {
    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;
  }

  backInOut.overshoot = custom;

  return backInOut;
})(overshoot);

var tau = 2 * Math.PI,
    amplitude = 1,
    period = 0.3;

var elasticIn = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticIn(t) {
    return a * tpmt(-(--t)) * Math.sin((s - t) / p);
  }

  elasticIn.amplitude = function(a) { return custom(a, p * tau); };
  elasticIn.period = function(p) { return custom(a, p); };

  return elasticIn;
})(amplitude, period);

var elasticOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticOut(t) {
    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);
  }

  elasticOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticOut.period = function(p) { return custom(a, p); };

  return elasticOut;
})(amplitude, period);

var elasticInOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticInOut(t) {
    return ((t = t * 2 - 1) < 0
        ? a * tpmt(-t) * Math.sin((s - t) / p)
        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;
  }

  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticInOut.period = function(p) { return custom(a, p); };

  return elasticInOut;
})(amplitude, period);

exports.easeBack = backInOut;
exports.easeBackIn = backIn;
exports.easeBackInOut = backInOut;
exports.easeBackOut = backOut;
exports.easeBounce = bounceOut;
exports.easeBounceIn = bounceIn;
exports.easeBounceInOut = bounceInOut;
exports.easeBounceOut = bounceOut;
exports.easeCircle = circleInOut;
exports.easeCircleIn = circleIn;
exports.easeCircleInOut = circleInOut;
exports.easeCircleOut = circleOut;
exports.easeCubic = cubicInOut;
exports.easeCubicIn = cubicIn;
exports.easeCubicInOut = cubicInOut;
exports.easeCubicOut = cubicOut;
exports.easeElastic = elasticOut;
exports.easeElasticIn = elasticIn;
exports.easeElasticInOut = elasticInOut;
exports.easeElasticOut = elasticOut;
exports.easeExp = expInOut;
exports.easeExpIn = expIn;
exports.easeExpInOut = expInOut;
exports.easeExpOut = expOut;
exports.easeLinear = linear;
exports.easePoly = polyInOut;
exports.easePolyIn = polyIn;
exports.easePolyInOut = polyInOut;
exports.easePolyOut = polyOut;
exports.easeQuad = quadInOut;
exports.easeQuadIn = quadIn;
exports.easeQuadInOut = quadInOut;
exports.easeQuadOut = quadOut;
exports.easeSin = sinInOut;
exports.easeSinIn = sinIn;
exports.easeSinInOut = sinInOut;
exports.easeSinOut = sinOut;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],65:[function(require,module,exports){
var hsl = require('hsl-to-rgb-for-reals')
var rxEsc = require('escape-string-regexp')

// small pseudo d3
var d3 = Object.assign(
  {},
  require('d3-array'),
  require('d3-dispatch'),
  require('d3-ease'),
  require('d3-hierarchy'),
  require('d3-scale'),
  require('d3-selection'),
  require('d3-zoom')
)
Object.defineProperty(d3, 'event', {
  get: function () { return require('d3-selection').event }
})

var diffScale = d3.scaleLinear().range([0, 0.2])
var colors = {
  v8: { h: 67, s: 81, l: 65 },
  inlinable: { h: 300, s: 100, l: 50 },
  regexp: { h: 27, s: 100, l: 50 },
  cpp: { h: 0, s: 50, l: 50 },
  native: { h: 122, s: 50, l: 45 },
  core: { h: 0, s: 0, l: 80 },
  wasm: { h: 150, s: 80, l: 80 },
  deps: { h: 244, s: 50, l: 65 },
  app: { h: 200, s: 50, l: 45 },
  init: { h: 21, s: 81, l: 73 }
}
colors.def = { h: 10, s: 66, l: 80 }
colors.js = { h: 10, s: 66, l: 80 }
colors.c = { h: 10, s: 66, l: 80 }

var STATE_IDLE = 0
var STATE_HOVER = 1
var STATE_UNHOVER = 2

var FONT_FAMILY = 'Verdana, sans-serif'

function flameGraph (opts) {
  var tree = opts.tree
  var timing = opts.timing || false
  var element = opts.element
  var collapseHiddenNodeWidths = opts.collapseHiddenNodeWidths || false
  var c = opts.cellHeight || 18 // cell height
  var h = opts.height || (maxDepth(tree) + 2) * c // graph height
  var minHeight = opts.minHeight || 950
  h = h < minHeight ? minHeight : h
  h += opts.topOffset || 0
  var w = opts.width || document.body.clientWidth * 0.89 // graph width
  var heatBars = opts.heatBars || false
  var labelColors = opts.labelColors || { default: '#000' }
  var frameColors = opts.frameColors || { fill: '#fff', stroke: 'rgba(0, 0, 0, 0.7)' }
  var scaleToWidth = null
  var scaleToGraph = null
  var panZoom = d3.zoom().on('zoom', function () {
    update({ animate: false })
  })
  var dispatch = d3.dispatch('zoom', 'hoverin', 'hoverout', 'animationEnd', 'click', 'dblClick', 'contextmenu')
  var selection = null
  var transitionDuration = 500
  var transitionEase = d3.easeCubicInOut
  var sort = true
  var tiers = false
  var filterNeeded = true
  var filterTypes = []
  var allSamples
  var nodes = null
  var focusedFrame = null
  var hoverFrame = null
  var currentAnimation = null

  // Overridable functions. Use custom function if passed in, default if undefined, or, do nothing (or neutral fallback) if passed null
  var colorHash = (opts.colorHash === undefined) ? defaultColorHash : (d, decimalAdjust, allSamples, tiers) => opts.colorHash ? opts.colorHash(stackTop, { d, decimalAdjust, allSamples, tiers }) : frameColors.fill

  var renderLabel = (opts.renderLabel === undefined) ? defaultRenderLabel : (context, node, x, y, width) => opts.renderLabel && opts.renderLabel(c, { context, node, x, y, width })

  var renderTooltip = (opts.renderTooltip === undefined) ? defaultRenderTooltip : node => opts.renderTooltip && opts.renderTooltip(node)

  var stackBoxGlobals = { STATE_HOVER, STATE_UNHOVER, STATE_IDLE, frameColors, colorHash } // Shouldn't include `c` i.e. frame height because its value can change e.g. chart.cellHeight(newC)
  var renderStackFrameBox = (opts.renderStackFrameBox === undefined) ? defaultRenderStackFrameBox : (context, node, x, y, width, state) => opts.renderStackFrameBox && opts.renderStackFrameBox(stackBoxGlobals, { context, node, state }, { x, y, width, height: c })

  var clickHandler = (opts.clickHandler === undefined) ? defaultClickHandler : opts.clickHandler || function (target) { return target || nodes ? nodes[0] : null }

  var isNodeExcluded = (opts.isNodeExcluded === undefined) ? defaultIsNodeExcluded : opts.isNodeExcluded || function () { return false }

  onresize()

  function onresize () {
    panZoom.translateExtent([[0, 0], [w, h]])

    scaleToWidth = d3.scaleLinear().range([0, w])
    scaleToGraph = d3.scaleLinear().domain([0, w]).range([0, 1])
  }

  function time (name, fn) {
    if (timing) {
      console.time(name)
      var result = fn()
      console.timeEnd(name)
      return result
    } else return fn()
  }

  document.addEventListener('DOMContentLoaded', () => {
    element.scrollTop = element.scrollHeight
  })

  var categorizer = opts.categorizer || categorize
  var exclude = opts.exclude || []

  function labelName (d) {
    return d.data.name
  }
  function labelStack (d) {
    if (!d.parent) return null
    var onStack = d.data.name ? Math.round(100 * (d.data.value / allSamples) * 10) / 10 + '% on stack' : ''
    var top = stackTop(d.data)
    var topOfStack = d.data.name ? (top
      ? Math.round(100 * (top / allSamples) * 100) / 100 + '% stack top'
      : '') : ''

    if (onStack && topOfStack) { onStack += ', ' }

    return onStack + topOfStack
  }

  function tooltipLabel (d) {
    if (!d.parent) return ''
    var top = stackTop(d.data)
    return d.data.name + '<br />' + (top
      ? 'Top of Stack: ' + Math.round(100 * (top / allSamples) * 10) / 10 + '% ' +
      '(' + top + ' of ' + allSamples + ' samples)<br />'
      : '') + 'On Stack: ' + Math.round(100 * (d.data.value / allSamples) * 10) / 10 + '% ' +
     '(' + d.data.value + ' of ' + allSamples + ' samples)'
  }

  function categorize (child) {
    var name = child.name

    // todo: C deps
    if (!/.js/.test(name)) {
      switch (true) {
        case /^Builtin:|^Stub:|v8::|^(.+)IC:|^.*Handler:/
          .test(name): return { type: 'v8' }
        case /^RegExp:/
          .test(name): return { type: 'regexp' }
        case /apply$|call$|Arguments$/
          .test(name): return { type: 'native' }
        case /\.$/.test(name): return { type: 'core' }
        default: return { type: 'cpp' }
      }
    }

    if (/\[INIT\]/.test(name)) return { type: 'init' }

    switch (true) {
      case / native /.test(name): return { type: 'native' }
      case (name.indexOf('/') === -1 || /internal\//.test(name) && !/ \//.test(name)): return { type: 'core' }
      case !/node_modules/.test(name): return { type: 'app' }
      default: return { type: 'deps' }
    }
  }

  function frameDepth (node) {
    var parent = node.parent
    var depth = node.depth
    if (parent && parent.data.hide) depth -= 1
    while (parent && (parent = parent.parent)) {
      if (parent.data.hide) depth -= 1
    }
    return depth
  }

  function frameWidth (d) {
    var dx = d.x1 - d.x0
    return dx * w
  }

  function filter (data) {
    if (!filterNeeded) return
    if (data.children && (data.children.length > 0)) {
      data.children.forEach(filter)
      data.children.forEach(function (child) {
        if (isNodeExcluded(child, filterTypes)) {
          child.data.hide = true
        } else {
          child.data.hide = false
        }
      })
    }
  }

  function categorizeTree (data) {
    if (data.children && (data.children.length > 0)) {
      data.children.forEach(categorizeTree)
      data.children.forEach(function (child, ix, children) {
        var lt = categorizer(child.data, ix, children)
        child.data.type = lt.type
      })
    }
  }

  function hide (d) {
    if (!d.data.original) {
      d.data.original = d.data.value
    }
    d.data.value = 0
    if (d.children) {
      d.children.forEach(hide)
    }
  }

  function show (d) {
    d.data.fade = false
    if (d.data.original) {
      d.data.value = d.data.original
    }
    if (d.children) {
      d.children.forEach(show)
    }
  }

  function getSiblings (d) {
    var siblings = []
    if (d.parent) {
      var me = d.parent.children.indexOf(d)
      siblings = d.parent.children.slice(0)
      siblings.splice(me, 1)
    }
    return siblings
  }

  function hideSiblings (d) {
    var siblings = getSiblings(d)
    siblings.forEach(function (s) {
      hide(s)
    })
    if (d.parent) {
      hideSiblings(d.parent)
    }
  }

  function fadeAncestors (d) {
    if (d.parent) {
      d.parent.data.fade = true
      fadeAncestors(d.parent)
    }
  }

  function zoom (d) {
    if (currentAnimation) {
      currentAnimation.cancel()
      // save points before clearing the animation,
      // so that it uses the current mid-animation coords as starting points
      saveAnimationStartingPoints()
      currentAnimation = null
    }

    time('zoom', function () {
      focusedFrame = d.data
      time('hideSiblings', function () {
        hideSiblings(d)
      })
      time('show', function () {
        show(d)
      })
      time('fadeAncestors', function () {
        fadeAncestors(d)
      })
      time('update', function () {
        update({ animate: true })
      })
    })

    dispatch.call('zoom', null, d.data)
  }

  function searchTree (d, term, color) {
    var re = term instanceof RegExp ? term : new RegExp(rxEsc(term), 'i')
    var label = d.data.name

    if (d.children) {
      d.children.forEach(function (child) {
        searchTree(child, term, color)
      })
    }
    if (d.data.hide) { return }

    var searchArea
    if (d.data.type === 'cpp') {
      searchArea = label.split('[')[0]
    } else if (d.data.type === 'v8') {
      searchArea = label.split(' ')[0]
    } else if (d.data.type === 'regexp') {
      searchArea = label
    } else if (d.data.type === 'wasm') {
      searchArea = label.slice(0, label.lastIndexOf('[WASM'))
    } else {
      searchArea = label.split(':')[0]
    }
    if (re.test(searchArea)) {
      d.data.highlight = color || true
    } else {
      d.data.highlight = false
    }
  }

  function clear (d, color) {
    if (!color || d.data.highlight === color) {
      d.data.highlight = false
    }
    if (d.children) {
      d.children.forEach(function (child) {
        clear(child, color)
      })
    }
  }

  function doSort (a, b) {
    if (typeof sort === 'function') {
      return sort(a, b)
    } else if (sort) {
      return d3.ascending(a.data.name, b.data.name)
    } else {
      return 0
    }
  }

  var partition = d3.partition()

  function sumChildValues (node) {
    var acc = 0
    if (!node.children) return acc
    for (var i = 0; i < node.children.length; i++) {
      var d = node.children[i]
      // If a child is hidden or is (an ancestor of) the focusedFrame frame, don't count it
      if (d.fade || d === focusedFrame) {
        acc += sumChildValues(d)
        continue
      }
      // When collapsing hidden nodes, they only count for their children's values.
      // This way there is no space between children of this hidden node and adjacent nodes.
      if (d.hide && collapseHiddenNodeWidths) {
        acc += sumChildValues(d)
        continue
      }
      acc += d.value
    }
    return acc
  }

  function update (opts) {
    if (timing) console.group('update')

    var mayAnimate = opts && opts.animate

    adjustForHighDpiScreen(selection.select('canvas.d3-flame-graph'))

    selection
      .each(function (data) {
        time('filter', function () {
          filter(data)
        })

        time('sum/sort', function () {
          data
            .sum(function (d) {
              // If this is the ancestor of a focusedFrame frame, use the same value (width) as the focusedFrame frame.
              if (d.fade) return 0
              // When collapsing hidden nodes, they don't have a width; d3 will sum up their children's widths
              if (d.hide && collapseHiddenNodeWidths) return 0

              // d3 sums value + all child values to get the value for a node,
              // we can set `value = specifiedValue - all child values` to counteract that.
              // the `.value`s in our data already include the sum of all child values.
              return d.value - sumChildValues(d)
            })
            .sort(doSort)

          // Make "all stacks" as wide as every visible stack.
          data.value = data.children
            ? data.children.reduce((acc, node) => acc + node.value, 0)
            : 0
        })

        time('partition', function () {
          return partition(data)
        })

        nodes = data.descendants()

        var canvas = d3.select(this).select('canvas.d3-flame-graph').node()

        // Animate if data was known for this set of nodes in the past.
        if (nodes[0].data.prev && mayAnimate) {
          animate()
        } else {
          time('render', function () {
            render(canvas, nodes)
            saveAnimationStartingPoints()
          })
        }

        function animate () {
          currentAnimation = createAnimation({
            duration: transitionDuration,
            ease: transitionEase
          }, (ease) => {
            render(canvas, nodes, ease)
          }, () => {
            currentAnimation = null
            saveAnimationStartingPoints()
            dispatch.call('animationEnd')
          })
        }

        function render (canvas, nodes, ease) {
          if (ease == null) ease = 1
          var context = canvas.getContext('2d')
          context.textBaseline = 'bottom'

          // Ensure clearing is not affected by current zoom, panning, scaling etc
          context.save()
          context.setTransform(1, 0, 0, 1, 0, 0)
          context.clearRect(0, 0, canvas.width, canvas.height)
          context.restore()

          withZoomTransform(context, function () {
            nodes.forEach(function (node) {
              renderNode(context, node, ease, STATE_IDLE)
            })
          })
        }
      })
    if (timing) console.groupEnd('update')
  }

  function withZoomTransform (context, fn) {
    var transform = d3.zoomTransform(context.canvas)
    context.save()
    context.translate(transform.x, transform.y)
    context.scale(transform.k, transform.k)
    fn()
    context.restore()
  }

  function saveAnimationStartingPoints () {
    nodes.forEach(function (node) {
      // If an animation is ongoing, use the current positions as the starting position for the new animation
      // This makes it look nice when jumping through history quickly (eg. triple click back button)
      var pts = currentAnimation
        ? currentAnimation.currentX(node)
        : node
      node.data.prev = {
        x0: pts.x0,
        x1: pts.x1
      }
    })
  }

  function renderNode (context, node, ease, state) {
    // Hidden by filters
    if (node.data.hide) return

    var depth = frameDepth(node)
    var width = frameWidth(node)

    // Coordinate of top left corner of this frame's rectangle.
    var x = scaleToWidth(node.x0)
    var y = h - (depth * c) - c

    // Scale width while animating
    if (ease !== 1 && node.data.prev) {
      var prev = node.data.prev
      width = interpolate(frameWidth(prev), width, ease)
      x = interpolate(scaleToWidth(prev.x0), x, ease)
    }

    if (state === STATE_HOVER || state === STATE_UNHOVER) {
      context.clearRect(x, y, width, c)
    }

    // Draw heat.
    if (width >= 3 && heatBars && node.parent != null &&
        // These states mean we're redrawing on top of an existing rendered graph,
        // so we shouldn't exceed the current rectangle's boundaries; the heat will
        // still be visible from before
        (state !== STATE_HOVER && state !== STATE_UNHOVER)) {
      renderHeatBar(context, node, x, y, width)
    }

    // Draw boxes.
    renderStackFrameBox(context, node, x, y, width, state)

    // Draw labels.
    if (width >= 35) {
      renderLabel(context, node, x, y, width)
    }
  }

  function defaultRenderStackFrameBox (context, node, x, y, width, state) {
    // don't bother drawing anything fancy for tiny frames, just do a box.
    if (width < 3) {
      // Hidden by zoom
      if (node.data.value === 0) return

      context.fillStyle = heatBars || !node.parent
        ? frameColors.fill
        : colorHash(node.data, undefined, allSamples, tiers)
      context.fillRect(x, y, Math.max(width, 1), c)
      return
    }

    var fillColor = heatBars || !node.parent
      ? frameColors.fill
      : colorHash(node.data, undefined, allSamples, tiers)
    var strokeColor = heatBars || !node.parent
      ? frameColors.stroke
      : colorHash(node.data, 1.1, allSamples, tiers)
    context.fillStyle = node.data.highlight
      ? (typeof node.data.highlight === 'string' ? node.data.highlight : '#e600e6')
      : fillColor
    context.strokeStyle = strokeColor

    context.beginPath()
    context.rect(x, y, width, c)
    if (state === STATE_HOVER) {
      context.save()
      context.globalAlpha = 0.8
      context.fill()
      context.restore()
    } else {
      context.fill()
    }

    if (heatBars) {
      context.beginPath()
      context.moveTo(x, y)
      context.lineTo(x, y + c)
      context.moveTo(x + width, y)
      context.lineTo(x + width, y + c)
      context.stroke()
    } else {
      context.stroke()
    }
  }

  function defaultClickHandler (target) {
    return zoom(target || nodes[0])
  }

  function defaultRenderLabel (context, node, x, y, width) {
    // baseline size of 12px—for every ~3px that cellHeight grows above its baseline of 18px,
    // grow the font size 1px
    // This way the font size gets relatively smaller, giving it some breathing room at larger cell heights
    // while also being readable at small cell heights
    // NOTE this currently does NOT deal with cell heights below 18px, but then nothing in d3-fg really does
    var labelFontSize = Math.floor(12 + (c - 18) * 0.3)
    var stackFontSize = Math.floor(labelFontSize * 10 / 12)

    context.save()
    context.beginPath()
    context.rect(x, y, width, c)
    context.clip()
    context.font = `${labelFontSize}px ${FONT_FAMILY}`
    context.fillStyle = labelColors[node.data.type] || labelColors.default

    var labelOffset = 4 // padding
    // Center the "all stacks" text
    if (!node.parent) {
      context.textAlign = 'center'
      labelOffset = width / 2
    }

    // Magic value to sorta kinda align the label in the middle of the frame height
    // It's not very accurate
    var btmOffset = Math.floor((c - 16) / 2)
    var label = labelName(node)
    context.fillText(label, x + labelOffset, y + c - btmOffset)

    var stack = labelStack(node)
    if (stack) {
      var nameWidth = context.measureText(label + ' ').width
      context.font = `${stackFontSize}px ${FONT_FAMILY}`
      context.fillText(stack, x + labelOffset + nameWidth, y + c - btmOffset)
    }

    context.restore()
  }

  function renderHeatBar (context, node, x, y, width) {
    var heatColor = colorHash(node.data, undefined, allSamples, tiers)
    var heatStrokeColor = colorHash(node.data, 1.1, allSamples, tiers)
    var heatHeight = Math.floor(c / 3)

    context.fillStyle = heatColor
    context.strokeStyle = heatStrokeColor
    context.beginPath()
    context.rect(x, y - heatHeight, width, heatHeight)
    context.fill()
    context.stroke()
  }

  function getNodeRect (node) {
    if (!node) return null

    var wrapper = d3.select(element)
    var canvas = wrapper.select('canvas.d3-flame-graph').node()
    var transform = d3.zoomTransform(canvas)
    const x0 = transform.applyX(scaleToWidth(node.x0))
    const x1 = transform.applyX(scaleToWidth(node.x1))

    return {
      x: x0,
      y: transform.applyY(h - frameDepth(node) * c),
      width: x1 - x0,
      height: c
    }
  }

  function defaultRenderTooltip (node) {
    var wrapper = d3.select(element)
    var canvas = wrapper.select('canvas.d3-flame-graph').node()
    var transform = d3.zoomTransform(canvas)
    var x = transform.applyX(scaleToWidth(node.x0)) + canvas.getBoundingClientRect().left
    // y = the bottom of the node - the scroll from the top
    // (because the tooltip uses absolute positioning)
    var y = transform.applyY(h - frameDepth(node) * c) - wrapper.node().scrollTop
    var label = tooltipLabel(node)

    var tooltip = d3.select(element).select('.d3-flame-graph-tooltip')
      .style('top', y + 'px')
      .style('display', 'block')
      // scale up the font size with the graph zoom level,
      // but don't scale it down below 10pt because it'd be unreadable,
      // and don't go above 25pt which should be huge enough for even the
      // largest screens
      .style('font-size', Math.max(10, Math.min(25, transform.k * 10)) + 'pt')
      .html(label)

    // 300px is an arbitrary cut off point. if it's "too near"
    // to the right edge, instead align with the rightmost end of
    // the node
    // The 300px is scaled along with the rest of the graph to make sure that
    // tooltips don't get super squished at higher zoom levels
    if (x + (transform.k * 300) > window.innerWidth) {
      var right = canvas.getBoundingClientRect().left + w
      x = window.innerWidth - right + scaleToWidth(1 - node.x1)
      tooltip.style('left', 'auto').style('right', x + 'px')
    } else {
      tooltip.style('right', 'auto').style('left', x + 'px')
    }
  }

  // Wait for 500 ms before showing the tooltip.
  var tooltipFocusNode = null
  var tooltipFocusTimeout = null
  var hoveringIn = false
  function showTooltip (node) {
    // let's dispatch the hover event with no delay
    const pointerCoords = { x: d3.event.offsetX, y: d3.event.offsetY }
    dispatch.call('hoverin', null, node.data, getNodeRect(node), pointerCoords)
    hoveringIn = true

    if (tooltipFocusNode === node) {
      return renderTooltip(node)
    }
    clearTimeout(tooltipFocusTimeout)
    tooltipFocusTimeout = setTimeout(function () {
      tooltipFocusNode = node
      renderTooltip(node)
    }, 500)
  }

  function hideTooltip () {
    if (hoveringIn) {
      dispatch.call('hoverout', null, null)
      hoveringIn = false
    }

    clearTimeout(tooltipFocusTimeout)
    tooltipFocusNode = null
    tooltipFocusTimeout = setTimeout(function () {
      d3.select(element).select('.d3-flame-graph-tooltip')
        .style('display', 'none')
        .empty()
    }, 250)
  }

  // cancel hiding the tooltip, used when the cursor moves
  // from the hovered node to the tooltip or vice versa to
  // cancel the mouseout event from the previously focused one.
  function preventHideTooltip () {
    clearTimeout(tooltipFocusTimeout)
  }

  function getNodeAt (canvas, offsetX, offsetY) {
    var transform = d3.zoomTransform(canvas)
    var x = scaleToGraph(transform.invertX(offsetX))
    var y = h - transform.invertY(offsetY)
    return nodes.find(function (node) {
      if (node.data.hide) return false
      if (node.x0 <= x && x <= node.x1) {
        var nodeY = frameDepth(node) * c
        return nodeY <= y && y <= nodeY + c
      }
      return false
    })
  }

  function adjustForHighDpiScreen (canvas) {
    // Adjust canvas for high DPI screens
    // - Size the image up N× using attributes
    // - Squash it down N× using CSS
    // - Scale the context so 1px in all subsequent draw operations means Npx

    const devicePixelRatio = window.devicePixelRatio
    // let's resize the canvas
    canvas
      .style('width', w + 'px')
      .style('height', h + 'px')
      .attr('width', w * devicePixelRatio)
      .attr('height', h * devicePixelRatio)

    canvas.node().getContext('2d').scale(devicePixelRatio, devicePixelRatio)
  }

  function chart (firstRender) {
    selection = d3.select(element)

    selection.each(function (data) {
      allSamples = data.data.value

      if (!firstRender) {
        var node = d3.select(this).append('div')
          .style('position', 'relative')
        node.append('canvas')
          .attr('width', w)
          .attr('height', h)
          .attr('class', 'partition d3-flame-graph')
          .attr('transition', 'transform 200ms ease-in-out')
          .call(panZoom)
          .on('wheel.zoom', null)
          .on('contextmenu', function () {
            const pointerCoords = { x: d3.event.offsetX, y: d3.event.offsetY }
            const target = getNodeAt(this, pointerCoords.x, pointerCoords.y)

            d3.event.preventDefault()

            if (target) {
              // Passes original datum and rect / event co-ordinates, same as hoverin / hoverout dispatches
              dispatch.call('contextmenu', null, target.data, getNodeRect(target), pointerCoords)
            } else {
              // Click on the flamegraph background. Listeners can ignore it or treat it as deselection
              dispatch.call('contextmenu', null, null, null, null)
            }
          })
          .on('dblclick.zoom', null)
          .on('dblclick', function () {
            const pointerCoords = { x: d3.event.offsetX, y: d3.event.offsetY }
            const target = getNodeAt(this, pointerCoords.x, pointerCoords.y)

            if (target) {
              // Passes original datum and rect / event co-ordinates, same as hoverin / hoverout dispatches
              dispatch.call('dblClick', null, target.data, getNodeRect(target), pointerCoords)
            } else {
              // Click on the flamegraph background. Listeners can ignore it or treat it as deselection
              dispatch.call('dblClick', null, null, null, null)
            }
          })
          .on('click', function () {
            const pointerCoords = { x: d3.event.offsetX, y: d3.event.offsetY }
            const target = getNodeAt(this, pointerCoords.x, pointerCoords.y)

            if (target) {
              // Passes original datum and rect / event co-ordinates, same as hoverin / hoverout dispatches
              dispatch.call('click', null, target.data, getNodeRect(target), pointerCoords)
            } else {
              // Click on the flamegraph background. Listeners can ignore it or treat it as deselection
              dispatch.call('click', null, null, null, null)
            }

            // Passes d3-fg target node object, in context of DOM element
            return clickHandler.call(this, target)
          })
          .on('mousemove', function () {
            var target = getNodeAt(this, d3.event.offsetX, d3.event.offsetY)
            var context = this.getContext('2d')

            if (target === hoverFrame) return

            if (hoverFrame) {
              withZoomTransform(context, function () {
                renderNode(context, hoverFrame, 1, STATE_UNHOVER)
              })
            }
            hoverFrame = target

            if (target) {
              this.style.cursor = 'pointer'
              withZoomTransform(context, function () {
                renderNode(context, target, 1, STATE_HOVER)
              })
              if (target.parent) showTooltip(target)
              else hideTooltip()
            } else {
              this.style.cursor = 'default'
              hideTooltip()
            }
          })
          .on('mouseout', function () {
            hoverFrame = null
            this.style.cursor = 'default'
            hideTooltip()
          })

        if (opts.renderTooltip !== null) {
          node.append('div')
            .style('background', '#222')
            .style('color', '#fff')
            .style('border-radius', '3px')
            .style('padding', '3px')
            .style('font-size', '10pt')
            .style('position', 'fixed')
            .style('display', 'none')
            .style('z-index', 1000)
            .classed('d3-flame-graph-tooltip', true)
            .on('mouseover', preventHideTooltip)
            .on('mouseout', hideTooltip)
        }

        adjustForHighDpiScreen(node.select('canvas.d3-flame-graph'))
      }

      categorizeTree(data)
      filter(data)

      // first draw
      update()
    })
  }

  chart.height = function (_) {
    if (!arguments.length) { return h }
    h = _ < minHeight ? minHeight : _
    onresize()
    update()
    return chart
  }

  chart.minHeight = function (_) {
    if (!arguments.length) { return minHeight }
    minHeight = _
    h = h < minHeight ? minHeight : h
    onresize()
    update()
    return chart
  }

  chart.width = function (_) {
    if (!arguments.length) { return w }
    w = _
    onresize()
    update()
    return chart
  }

  chart.cellHeight = function (_) {
    if (!arguments.length) { return c }
    c = _
    h = (maxDepth(tree) + 2) * c
    h = h < minHeight ? minHeight : h
    onresize()
    update()
    return chart
  }

  chart.transitionDuration = function (_) {
    if (!arguments.length) { return transitionDuration }
    transitionDuration = _
    return chart
  }

  chart.transitionEase = function (_) {
    if (!arguments.length) { return transitionEase }
    transitionEase = _
    return chart
  }

  chart.sort = function (_) {
    if (!arguments.length) { return sort }
    sort = _
    return chart
  }

  chart.tiers = function (_) {
    tiers = _
    if (selection) update()
    return chart
  }

  chart.search = function (term, color) {
    selection.each(function (data) {
      searchTree(data, term, color)
      update()
    })
  }

  chart.clear = function (color) {
    selection.each(function (data) {
      clear(data, color)
      update()
    })
  }

  chart.typeHide = function (type) {
    if (!~filterTypes.indexOf(type)) {
      filterTypes.push(type)
      filterNeeded = true
      if (selection) update()
    }
  }

  chart.typeShow = function (type) {
    var ix = filterTypes.indexOf(type)
    if (!~ix) return
    filterTypes.splice(ix, 1)
    filterNeeded = true
    if (selection) update()
  }

  chart.setGraphZoom = function (n) {
    panZoom.scaleTo(d3.select(element).select('canvas.d3-flame-graph'), n)
  }

  chart.renderTree = function (data) {
    d3.select(element).datum(d3.hierarchy(data, function (d) { return d.c || d.children }))
    chart(true)
  }

  chart.colors = colors

  chart.update = (hard) => {
    if (hard) {
      selection.each(function (data) {
        allSamples = data.value

        categorizeTree(data)
        filter(data)

        // first draw
        update()
      })
    } else update()
  }

  chart.zoom = (nodeData = nodes[0].data) => {
    // nodes[0] = root node
    // users of this method can zoom in on a data point
    // instead of a node.
    const node = nodes.find(n => n.data === nodeData)
    zoom(node || nodes[0])
  }

  chart.getNodeRect = nodeData => {
    // returns the node position and size on canvas, or null.
    const node = nodes.find(n => n.data === nodeData)
    return getNodeRect(node)
  }

  chart.on = dispatch.on.bind(dispatch)

  exclude.forEach(chart.typeHide)
  d3.select(element).datum(d3.hierarchy(tree, function (d) { return d.c || d.children }))
  chart()

  return chart
}

function defaultIsNodeExcluded (node, filterTypes) {
  return ~filterTypes.indexOf(node.data.type)
}

function defaultColorHash (d, perc, allSamples, tiers) {
  if (!d.name) {
    return perc ? 'rgb(127, 127, 127)' : 'rgba(0, 0, 0, 0)'
  }

  perc = perc || 1
  var type = d.type || 'def'

  var key

  if (!tiers) key = colors.def

  if (tiers) key = colors[type]

  var h = key.h
  var s = key.s
  var l = key.l
  var top = stackTop(d)
  var vector = ((top / allSamples) * 100) + 1

  s *= vector
  l += (vector * 2)

  s /= 100
  l /= 100

  s *= perc
  l *= perc

  var a = 0.8
  if (l > 0.8) {
    a += diffScale(l - 0.8)
    l = 0.8
  }

  var rgb = hsl(h, s, l)
  var res = 'rgba(' + rgb + ', ' + a + ')'

  return res
}

function stackTop (d) {
  if (!d.children) return d.top
  var top = d.top

  d.children
    .forEach(function (child) {
      if (
        !child.children ||
          child.children.filter(function (c) { return c.hide }).length
      ) {
        if (child.hide) {
          top += stackTop(child)
        }
      }
    })

  return top
}

function maxDepth (tree) {
  if (!tree.children) {
    return 1
  }
  return tree.children.map(maxDepth).reduce((prev, next) => Math.max(prev, next), 0) + 1
}

function createAnimation (opts, render, done) {
  var start = Date.now()
  var animationFrame = null
  var dt = 0
  var ease = 0

  function nextFrame () {
    dt = (Date.now() - start) / opts.duration
    ease = opts.ease(dt > 1 ? 1 : dt)
    render(ease)

    if (ease === 1) {
      animationFrame = null
      done()
    } else {
      animationFrame = window.requestAnimationFrame(nextFrame)
    }
  }
  animationFrame = window.requestAnimationFrame(nextFrame)

  return {
    cancel () {
      window.cancelAnimationFrame(animationFrame)
    },
    currentX (node) {
      var prev = node.data.prev
      return {
        x0: interpolate(prev.x0, node.x0, ease),
        x1: interpolate(prev.x1, node.x1, ease)
      }
    }
  }
}

function interpolate (start, end, ease) {
  return start + ease * (end - start)
}

module.exports = flameGraph
module.exports.colors = colors
module.exports.colorHash = defaultColorHash

},{"d3-array":60,"d3-dispatch":62,"d3-ease":64,"d3-hierarchy":68,"d3-scale":70,"d3-selection":72,"d3-zoom":77,"escape-string-regexp":66,"hsl-to-rgb-for-reals":80}],66:[function(require,module,exports){
'use strict';

var matchOperatorsRe = /[|\\{}()[\]^$+*?.]/g;

module.exports = function (str) {
	if (typeof str !== 'string') {
		throw new TypeError('Expected a string');
	}

	return str.replace(matchOperatorsRe, '\\$&');
};

},{}],67:[function(require,module,exports){
// https://d3js.org/d3-format/ v1.4.5 Copyright 2020 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.d3 = global.d3 || {}));
}(this, (function (exports) { 'use strict';

function formatDecimal(x) {
  return Math.abs(x = Math.round(x)) >= 1e21
      ? x.toLocaleString("en").replace(/,/g, "")
      : x.toString(10);
}

// Computes the decimal coefficient and exponent of the specified number x with
// significant digits p, where x is positive and p is in [1, 21] or undefined.
// For example, formatDecimalParts(1.23) returns ["123", 0].
function formatDecimalParts(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0) return null; // NaN, ±Infinity
  var i, coefficient = x.slice(0, i);

  // The string returned by toExponential either has the form \d\.\d+e[-+]\d+
  // (e.g., 1.2e+3) or the form \de[-+]\d+ (e.g., 1e+3).
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
}

function exponent(x) {
  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;
}

function formatGroup(grouping, thousands) {
  return function(value, width) {
    var i = value.length,
        t = [],
        j = 0,
        g = grouping[0],
        length = 0;

    while (i > 0 && g > 0) {
      if (length + g + 1 > width) g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width) break;
      g = grouping[j = (j + 1) % grouping.length];
    }

    return t.reverse().join(thousands);
  };
}

function formatNumerals(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
}

// [[fill]align][sign][symbol][0][width][,][.precision][~][type]
var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;

function formatSpecifier(specifier) {
  if (!(match = re.exec(specifier))) throw new Error("invalid format: " + specifier);
  var match;
  return new FormatSpecifier({
    fill: match[1],
    align: match[2],
    sign: match[3],
    symbol: match[4],
    zero: match[5],
    width: match[6],
    comma: match[7],
    precision: match[8] && match[8].slice(1),
    trim: match[9],
    type: match[10]
  });
}

formatSpecifier.prototype = FormatSpecifier.prototype; // instanceof

function FormatSpecifier(specifier) {
  this.fill = specifier.fill === undefined ? " " : specifier.fill + "";
  this.align = specifier.align === undefined ? ">" : specifier.align + "";
  this.sign = specifier.sign === undefined ? "-" : specifier.sign + "";
  this.symbol = specifier.symbol === undefined ? "" : specifier.symbol + "";
  this.zero = !!specifier.zero;
  this.width = specifier.width === undefined ? undefined : +specifier.width;
  this.comma = !!specifier.comma;
  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;
  this.trim = !!specifier.trim;
  this.type = specifier.type === undefined ? "" : specifier.type + "";
}

FormatSpecifier.prototype.toString = function() {
  return this.fill
      + this.align
      + this.sign
      + this.symbol
      + (this.zero ? "0" : "")
      + (this.width === undefined ? "" : Math.max(1, this.width | 0))
      + (this.comma ? "," : "")
      + (this.precision === undefined ? "" : "." + Math.max(0, this.precision | 0))
      + (this.trim ? "~" : "")
      + this.type;
};

// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.
function formatTrim(s) {
  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {
    switch (s[i]) {
      case ".": i0 = i1 = i; break;
      case "0": if (i0 === 0) i0 = i; i1 = i; break;
      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;
    }
  }
  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;
}

var prefixExponent;

function formatPrefixAuto(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1],
      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,
      n = coefficient.length;
  return i === n ? coefficient
      : i > n ? coefficient + new Array(i - n + 1).join("0")
      : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i)
      : "0." + new Array(1 - i).join("0") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!
}

function formatRounded(x, p) {
  var d = formatDecimalParts(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient
      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1)
      : coefficient + new Array(exponent - coefficient.length + 2).join("0");
}

var formatTypes = {
  "%": function(x, p) { return (x * 100).toFixed(p); },
  "b": function(x) { return Math.round(x).toString(2); },
  "c": function(x) { return x + ""; },
  "d": formatDecimal,
  "e": function(x, p) { return x.toExponential(p); },
  "f": function(x, p) { return x.toFixed(p); },
  "g": function(x, p) { return x.toPrecision(p); },
  "o": function(x) { return Math.round(x).toString(8); },
  "p": function(x, p) { return formatRounded(x * 100, p); },
  "r": formatRounded,
  "s": formatPrefixAuto,
  "X": function(x) { return Math.round(x).toString(16).toUpperCase(); },
  "x": function(x) { return Math.round(x).toString(16); }
};

function identity(x) {
  return x;
}

var map = Array.prototype.map,
    prefixes = ["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];

function formatLocale(locale) {
  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + ""),
      currencyPrefix = locale.currency === undefined ? "" : locale.currency[0] + "",
      currencySuffix = locale.currency === undefined ? "" : locale.currency[1] + "",
      decimal = locale.decimal === undefined ? "." : locale.decimal + "",
      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),
      percent = locale.percent === undefined ? "%" : locale.percent + "",
      minus = locale.minus === undefined ? "-" : locale.minus + "",
      nan = locale.nan === undefined ? "NaN" : locale.nan + "";

  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);

    var fill = specifier.fill,
        align = specifier.align,
        sign = specifier.sign,
        symbol = specifier.symbol,
        zero = specifier.zero,
        width = specifier.width,
        comma = specifier.comma,
        precision = specifier.precision,
        trim = specifier.trim,
        type = specifier.type;

    // The "n" type is an alias for ",g".
    if (type === "n") comma = true, type = "g";

    // The "" type, and any invalid type, is an alias for ".12~g".
    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = "g";

    // If zero fill is specified, padding goes after sign and before digits.
    if (zero || (fill === "0" && align === "=")) zero = true, fill = "0", align = "=";

    // Compute the prefix and suffix.
    // For SI-prefix, the suffix is lazily computed.
    var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "",
        suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type) ? percent : "";

    // What format function should we use?
    // Is this an integer type?
    // Can this type generate exponential notation?
    var formatType = formatTypes[type],
        maybeSuffix = /[defgprs%]/.test(type);

    // Set the default precision if not specified,
    // or clamp the specified precision to the supported range.
    // For significant precision, it must be in [1, 21].
    // For fixed precision, it must be in [0, 20].
    precision = precision === undefined ? 6
        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))
        : Math.max(0, Math.min(20, precision));

    function format(value) {
      var valuePrefix = prefix,
          valueSuffix = suffix,
          i, n, c;

      if (type === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;

        // Determine the sign. -0 is not less than 0, but 1 / -0 is!
        var valueNegative = value < 0 || 1 / value < 0;

        // Perform the initial formatting.
        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);

        // Trim insignificant zeros.
        if (trim) value = formatTrim(value);

        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.
        if (valueNegative && +value === 0 && sign !== "+") valueNegative = false;

        // Compute the prefix and suffix.
        valuePrefix = (valueNegative ? (sign === "(" ? sign : minus) : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");

        // Break the formatted value into the integer “value” part that can be
        // grouped, and fractional or exponential “suffix” part that is not.
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }

      // If the fill character is not "0", grouping is applied before padding.
      if (comma && !zero) value = group(value, Infinity);

      // Compute the padding.
      var length = valuePrefix.length + value.length + valueSuffix.length,
          padding = length < width ? new Array(width - length + 1).join(fill) : "";

      // If the fill character is "0", grouping is applied after padding.
      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";

      // Reconstruct the final output based on the desired alignment.
      switch (align) {
        case "<": value = valuePrefix + value + valueSuffix + padding; break;
        case "=": value = valuePrefix + padding + value + valueSuffix; break;
        case "^": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;
        default: value = padding + valuePrefix + value + valueSuffix; break;
      }

      return numerals(value);
    }

    format.toString = function() {
      return specifier + "";
    };

    return format;
  }

  function formatPrefix(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)),
        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,
        k = Math.pow(10, -e),
        prefix = prefixes[8 + e / 3];
    return function(value) {
      return f(k * value) + prefix;
    };
  }

  return {
    format: newFormat,
    formatPrefix: formatPrefix
  };
}

var locale;

defaultLocale({
  decimal: ".",
  thousands: ",",
  grouping: [3],
  currency: ["$", ""],
  minus: "-"
});

function defaultLocale(definition) {
  locale = formatLocale(definition);
  exports.format = locale.format;
  exports.formatPrefix = locale.formatPrefix;
  return locale;
}

function precisionFixed(step) {
  return Math.max(0, -exponent(Math.abs(step)));
}

function precisionPrefix(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));
}

function precisionRound(step, max) {
  step = Math.abs(step), max = Math.abs(max) - step;
  return Math.max(0, exponent(max) - exponent(step)) + 1;
}

exports.FormatSpecifier = FormatSpecifier;
exports.formatDefaultLocale = defaultLocale;
exports.formatLocale = formatLocale;
exports.formatSpecifier = formatSpecifier;
exports.precisionFixed = precisionFixed;
exports.precisionPrefix = precisionPrefix;
exports.precisionRound = precisionRound;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],68:[function(require,module,exports){
// https://d3js.org/d3-hierarchy/ v1.1.9 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

function defaultSeparation(a, b) {
  return a.parent === b.parent ? 1 : 2;
}

function meanX(children) {
  return children.reduce(meanXReduce, 0) / children.length;
}

function meanXReduce(x, c) {
  return x + c.x;
}

function maxY(children) {
  return 1 + children.reduce(maxYReduce, 0);
}

function maxYReduce(y, c) {
  return Math.max(y, c.y);
}

function leafLeft(node) {
  var children;
  while (children = node.children) node = children[0];
  return node;
}

function leafRight(node) {
  var children;
  while (children = node.children) node = children[children.length - 1];
  return node;
}

function cluster() {
  var separation = defaultSeparation,
      dx = 1,
      dy = 1,
      nodeSize = false;

  function cluster(root) {
    var previousNode,
        x = 0;

    // First walk, computing the initial x & y values.
    root.eachAfter(function(node) {
      var children = node.children;
      if (children) {
        node.x = meanX(children);
        node.y = maxY(children);
      } else {
        node.x = previousNode ? x += separation(node, previousNode) : 0;
        node.y = 0;
        previousNode = node;
      }
    });

    var left = leafLeft(root),
        right = leafRight(root),
        x0 = left.x - separation(left, right) / 2,
        x1 = right.x + separation(right, left) / 2;

    // Second walk, normalizing x & y to the desired size.
    return root.eachAfter(nodeSize ? function(node) {
      node.x = (node.x - root.x) * dx;
      node.y = (root.y - node.y) * dy;
    } : function(node) {
      node.x = (node.x - x0) / (x1 - x0) * dx;
      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;
    });
  }

  cluster.separation = function(x) {
    return arguments.length ? (separation = x, cluster) : separation;
  };

  cluster.size = function(x) {
    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? null : [dx, dy]);
  };

  cluster.nodeSize = function(x) {
    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? [dx, dy] : null);
  };

  return cluster;
}

function count(node) {
  var sum = 0,
      children = node.children,
      i = children && children.length;
  if (!i) sum = 1;
  else while (--i >= 0) sum += children[i].value;
  node.value = sum;
}

function node_count() {
  return this.eachAfter(count);
}

function node_each(callback) {
  var node = this, current, next = [node], children, i, n;
  do {
    current = next.reverse(), next = [];
    while (node = current.pop()) {
      callback(node), children = node.children;
      if (children) for (i = 0, n = children.length; i < n; ++i) {
        next.push(children[i]);
      }
    }
  } while (next.length);
  return this;
}

function node_eachBefore(callback) {
  var node = this, nodes = [node], children, i;
  while (node = nodes.pop()) {
    callback(node), children = node.children;
    if (children) for (i = children.length - 1; i >= 0; --i) {
      nodes.push(children[i]);
    }
  }
  return this;
}

function node_eachAfter(callback) {
  var node = this, nodes = [node], next = [], children, i, n;
  while (node = nodes.pop()) {
    next.push(node), children = node.children;
    if (children) for (i = 0, n = children.length; i < n; ++i) {
      nodes.push(children[i]);
    }
  }
  while (node = next.pop()) {
    callback(node);
  }
  return this;
}

function node_sum(value) {
  return this.eachAfter(function(node) {
    var sum = +value(node.data) || 0,
        children = node.children,
        i = children && children.length;
    while (--i >= 0) sum += children[i].value;
    node.value = sum;
  });
}

function node_sort(compare) {
  return this.eachBefore(function(node) {
    if (node.children) {
      node.children.sort(compare);
    }
  });
}

function node_path(end) {
  var start = this,
      ancestor = leastCommonAncestor(start, end),
      nodes = [start];
  while (start !== ancestor) {
    start = start.parent;
    nodes.push(start);
  }
  var k = nodes.length;
  while (end !== ancestor) {
    nodes.splice(k, 0, end);
    end = end.parent;
  }
  return nodes;
}

function leastCommonAncestor(a, b) {
  if (a === b) return a;
  var aNodes = a.ancestors(),
      bNodes = b.ancestors(),
      c = null;
  a = aNodes.pop();
  b = bNodes.pop();
  while (a === b) {
    c = a;
    a = aNodes.pop();
    b = bNodes.pop();
  }
  return c;
}

function node_ancestors() {
  var node = this, nodes = [node];
  while (node = node.parent) {
    nodes.push(node);
  }
  return nodes;
}

function node_descendants() {
  var nodes = [];
  this.each(function(node) {
    nodes.push(node);
  });
  return nodes;
}

function node_leaves() {
  var leaves = [];
  this.eachBefore(function(node) {
    if (!node.children) {
      leaves.push(node);
    }
  });
  return leaves;
}

function node_links() {
  var root = this, links = [];
  root.each(function(node) {
    if (node !== root) { // Don’t include the root’s parent, if any.
      links.push({source: node.parent, target: node});
    }
  });
  return links;
}

function hierarchy(data, children) {
  var root = new Node(data),
      valued = +data.value && (root.value = data.value),
      node,
      nodes = [root],
      child,
      childs,
      i,
      n;

  if (children == null) children = defaultChildren;

  while (node = nodes.pop()) {
    if (valued) node.value = +node.data.value;
    if ((childs = children(node.data)) && (n = childs.length)) {
      node.children = new Array(n);
      for (i = n - 1; i >= 0; --i) {
        nodes.push(child = node.children[i] = new Node(childs[i]));
        child.parent = node;
        child.depth = node.depth + 1;
      }
    }
  }

  return root.eachBefore(computeHeight);
}

function node_copy() {
  return hierarchy(this).eachBefore(copyData);
}

function defaultChildren(d) {
  return d.children;
}

function copyData(node) {
  node.data = node.data.data;
}

function computeHeight(node) {
  var height = 0;
  do node.height = height;
  while ((node = node.parent) && (node.height < ++height));
}

function Node(data) {
  this.data = data;
  this.depth =
  this.height = 0;
  this.parent = null;
}

Node.prototype = hierarchy.prototype = {
  constructor: Node,
  count: node_count,
  each: node_each,
  eachAfter: node_eachAfter,
  eachBefore: node_eachBefore,
  sum: node_sum,
  sort: node_sort,
  path: node_path,
  ancestors: node_ancestors,
  descendants: node_descendants,
  leaves: node_leaves,
  links: node_links,
  copy: node_copy
};

var slice = Array.prototype.slice;

function shuffle(array) {
  var m = array.length,
      t,
      i;

  while (m) {
    i = Math.random() * m-- | 0;
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }

  return array;
}

function enclose(circles) {
  var i = 0, n = (circles = shuffle(slice.call(circles))).length, B = [], p, e;

  while (i < n) {
    p = circles[i];
    if (e && enclosesWeak(e, p)) ++i;
    else e = encloseBasis(B = extendBasis(B, p)), i = 0;
  }

  return e;
}

function extendBasis(B, p) {
  var i, j;

  if (enclosesWeakAll(p, B)) return [p];

  // If we get here then B must have at least one element.
  for (i = 0; i < B.length; ++i) {
    if (enclosesNot(p, B[i])
        && enclosesWeakAll(encloseBasis2(B[i], p), B)) {
      return [B[i], p];
    }
  }

  // If we get here then B must have at least two elements.
  for (i = 0; i < B.length - 1; ++i) {
    for (j = i + 1; j < B.length; ++j) {
      if (enclosesNot(encloseBasis2(B[i], B[j]), p)
          && enclosesNot(encloseBasis2(B[i], p), B[j])
          && enclosesNot(encloseBasis2(B[j], p), B[i])
          && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {
        return [B[i], B[j], p];
      }
    }
  }

  // If we get here then something is very wrong.
  throw new Error;
}

function enclosesNot(a, b) {
  var dr = a.r - b.r, dx = b.x - a.x, dy = b.y - a.y;
  return dr < 0 || dr * dr < dx * dx + dy * dy;
}

function enclosesWeak(a, b) {
  var dr = a.r - b.r + 1e-6, dx = b.x - a.x, dy = b.y - a.y;
  return dr > 0 && dr * dr > dx * dx + dy * dy;
}

function enclosesWeakAll(a, B) {
  for (var i = 0; i < B.length; ++i) {
    if (!enclosesWeak(a, B[i])) {
      return false;
    }
  }
  return true;
}

function encloseBasis(B) {
  switch (B.length) {
    case 1: return encloseBasis1(B[0]);
    case 2: return encloseBasis2(B[0], B[1]);
    case 3: return encloseBasis3(B[0], B[1], B[2]);
  }
}

function encloseBasis1(a) {
  return {
    x: a.x,
    y: a.y,
    r: a.r
  };
}

function encloseBasis2(a, b) {
  var x1 = a.x, y1 = a.y, r1 = a.r,
      x2 = b.x, y2 = b.y, r2 = b.r,
      x21 = x2 - x1, y21 = y2 - y1, r21 = r2 - r1,
      l = Math.sqrt(x21 * x21 + y21 * y21);
  return {
    x: (x1 + x2 + x21 / l * r21) / 2,
    y: (y1 + y2 + y21 / l * r21) / 2,
    r: (l + r1 + r2) / 2
  };
}

function encloseBasis3(a, b, c) {
  var x1 = a.x, y1 = a.y, r1 = a.r,
      x2 = b.x, y2 = b.y, r2 = b.r,
      x3 = c.x, y3 = c.y, r3 = c.r,
      a2 = x1 - x2,
      a3 = x1 - x3,
      b2 = y1 - y2,
      b3 = y1 - y3,
      c2 = r2 - r1,
      c3 = r3 - r1,
      d1 = x1 * x1 + y1 * y1 - r1 * r1,
      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,
      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,
      ab = a3 * b2 - a2 * b3,
      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,
      xb = (b3 * c2 - b2 * c3) / ab,
      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,
      yb = (a2 * c3 - a3 * c2) / ab,
      A = xb * xb + yb * yb - 1,
      B = 2 * (r1 + xa * xb + ya * yb),
      C = xa * xa + ya * ya - r1 * r1,
      r = -(A ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);
  return {
    x: x1 + xa + xb * r,
    y: y1 + ya + yb * r,
    r: r
  };
}

function place(b, a, c) {
  var dx = b.x - a.x, x, a2,
      dy = b.y - a.y, y, b2,
      d2 = dx * dx + dy * dy;
  if (d2) {
    a2 = a.r + c.r, a2 *= a2;
    b2 = b.r + c.r, b2 *= b2;
    if (a2 > b2) {
      x = (d2 + b2 - a2) / (2 * d2);
      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));
      c.x = b.x - x * dx - y * dy;
      c.y = b.y - x * dy + y * dx;
    } else {
      x = (d2 + a2 - b2) / (2 * d2);
      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));
      c.x = a.x + x * dx - y * dy;
      c.y = a.y + x * dy + y * dx;
    }
  } else {
    c.x = a.x + c.r;
    c.y = a.y;
  }
}

function intersects(a, b) {
  var dr = a.r + b.r - 1e-6, dx = b.x - a.x, dy = b.y - a.y;
  return dr > 0 && dr * dr > dx * dx + dy * dy;
}

function score(node) {
  var a = node._,
      b = node.next._,
      ab = a.r + b.r,
      dx = (a.x * b.r + b.x * a.r) / ab,
      dy = (a.y * b.r + b.y * a.r) / ab;
  return dx * dx + dy * dy;
}

function Node$1(circle) {
  this._ = circle;
  this.next = null;
  this.previous = null;
}

function packEnclose(circles) {
  if (!(n = circles.length)) return 0;

  var a, b, c, n, aa, ca, i, j, k, sj, sk;

  // Place the first circle.
  a = circles[0], a.x = 0, a.y = 0;
  if (!(n > 1)) return a.r;

  // Place the second circle.
  b = circles[1], a.x = -b.r, b.x = a.r, b.y = 0;
  if (!(n > 2)) return a.r + b.r;

  // Place the third circle.
  place(b, a, c = circles[2]);

  // Initialize the front-chain using the first three circles a, b and c.
  a = new Node$1(a), b = new Node$1(b), c = new Node$1(c);
  a.next = c.previous = b;
  b.next = a.previous = c;
  c.next = b.previous = a;

  // Attempt to place each remaining circle…
  pack: for (i = 3; i < n; ++i) {
    place(a._, b._, c = circles[i]), c = new Node$1(c);

    // Find the closest intersecting circle on the front-chain, if any.
    // “Closeness” is determined by linear distance along the front-chain.
    // “Ahead” or “behind” is likewise determined by linear distance.
    j = b.next, k = a.previous, sj = b._.r, sk = a._.r;
    do {
      if (sj <= sk) {
        if (intersects(j._, c._)) {
          b = j, a.next = b, b.previous = a, --i;
          continue pack;
        }
        sj += j._.r, j = j.next;
      } else {
        if (intersects(k._, c._)) {
          a = k, a.next = b, b.previous = a, --i;
          continue pack;
        }
        sk += k._.r, k = k.previous;
      }
    } while (j !== k.next);

    // Success! Insert the new circle c between a and b.
    c.previous = a, c.next = b, a.next = b.previous = b = c;

    // Compute the new closest circle pair to the centroid.
    aa = score(a);
    while ((c = c.next) !== b) {
      if ((ca = score(c)) < aa) {
        a = c, aa = ca;
      }
    }
    b = a.next;
  }

  // Compute the enclosing circle of the front chain.
  a = [b._], c = b; while ((c = c.next) !== b) a.push(c._); c = enclose(a);

  // Translate the circles to put the enclosing circle around the origin.
  for (i = 0; i < n; ++i) a = circles[i], a.x -= c.x, a.y -= c.y;

  return c.r;
}

function siblings(circles) {
  packEnclose(circles);
  return circles;
}

function optional(f) {
  return f == null ? null : required(f);
}

function required(f) {
  if (typeof f !== "function") throw new Error;
  return f;
}

function constantZero() {
  return 0;
}

function constant(x) {
  return function() {
    return x;
  };
}

function defaultRadius(d) {
  return Math.sqrt(d.value);
}

function index() {
  var radius = null,
      dx = 1,
      dy = 1,
      padding = constantZero;

  function pack(root) {
    root.x = dx / 2, root.y = dy / 2;
    if (radius) {
      root.eachBefore(radiusLeaf(radius))
          .eachAfter(packChildren(padding, 0.5))
          .eachBefore(translateChild(1));
    } else {
      root.eachBefore(radiusLeaf(defaultRadius))
          .eachAfter(packChildren(constantZero, 1))
          .eachAfter(packChildren(padding, root.r / Math.min(dx, dy)))
          .eachBefore(translateChild(Math.min(dx, dy) / (2 * root.r)));
    }
    return root;
  }

  pack.radius = function(x) {
    return arguments.length ? (radius = optional(x), pack) : radius;
  };

  pack.size = function(x) {
    return arguments.length ? (dx = +x[0], dy = +x[1], pack) : [dx, dy];
  };

  pack.padding = function(x) {
    return arguments.length ? (padding = typeof x === "function" ? x : constant(+x), pack) : padding;
  };

  return pack;
}

function radiusLeaf(radius) {
  return function(node) {
    if (!node.children) {
      node.r = Math.max(0, +radius(node) || 0);
    }
  };
}

function packChildren(padding, k) {
  return function(node) {
    if (children = node.children) {
      var children,
          i,
          n = children.length,
          r = padding(node) * k || 0,
          e;

      if (r) for (i = 0; i < n; ++i) children[i].r += r;
      e = packEnclose(children);
      if (r) for (i = 0; i < n; ++i) children[i].r -= r;
      node.r = e + r;
    }
  };
}

function translateChild(k) {
  return function(node) {
    var parent = node.parent;
    node.r *= k;
    if (parent) {
      node.x = parent.x + k * node.x;
      node.y = parent.y + k * node.y;
    }
  };
}

function roundNode(node) {
  node.x0 = Math.round(node.x0);
  node.y0 = Math.round(node.y0);
  node.x1 = Math.round(node.x1);
  node.y1 = Math.round(node.y1);
}

function treemapDice(parent, x0, y0, x1, y1) {
  var nodes = parent.children,
      node,
      i = -1,
      n = nodes.length,
      k = parent.value && (x1 - x0) / parent.value;

  while (++i < n) {
    node = nodes[i], node.y0 = y0, node.y1 = y1;
    node.x0 = x0, node.x1 = x0 += node.value * k;
  }
}

function partition() {
  var dx = 1,
      dy = 1,
      padding = 0,
      round = false;

  function partition(root) {
    var n = root.height + 1;
    root.x0 =
    root.y0 = padding;
    root.x1 = dx;
    root.y1 = dy / n;
    root.eachBefore(positionNode(dy, n));
    if (round) root.eachBefore(roundNode);
    return root;
  }

  function positionNode(dy, n) {
    return function(node) {
      if (node.children) {
        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);
      }
      var x0 = node.x0,
          y0 = node.y0,
          x1 = node.x1 - padding,
          y1 = node.y1 - padding;
      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;
      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;
      node.x0 = x0;
      node.y0 = y0;
      node.x1 = x1;
      node.y1 = y1;
    };
  }

  partition.round = function(x) {
    return arguments.length ? (round = !!x, partition) : round;
  };

  partition.size = function(x) {
    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];
  };

  partition.padding = function(x) {
    return arguments.length ? (padding = +x, partition) : padding;
  };

  return partition;
}

var keyPrefix = "$", // Protect against keys like “__proto__”.
    preroot = {depth: -1},
    ambiguous = {};

function defaultId(d) {
  return d.id;
}

function defaultParentId(d) {
  return d.parentId;
}

function stratify() {
  var id = defaultId,
      parentId = defaultParentId;

  function stratify(data) {
    var d,
        i,
        n = data.length,
        root,
        parent,
        node,
        nodes = new Array(n),
        nodeId,
        nodeKey,
        nodeByKey = {};

    for (i = 0; i < n; ++i) {
      d = data[i], node = nodes[i] = new Node(d);
      if ((nodeId = id(d, i, data)) != null && (nodeId += "")) {
        nodeKey = keyPrefix + (node.id = nodeId);
        nodeByKey[nodeKey] = nodeKey in nodeByKey ? ambiguous : node;
      }
    }

    for (i = 0; i < n; ++i) {
      node = nodes[i], nodeId = parentId(data[i], i, data);
      if (nodeId == null || !(nodeId += "")) {
        if (root) throw new Error("multiple roots");
        root = node;
      } else {
        parent = nodeByKey[keyPrefix + nodeId];
        if (!parent) throw new Error("missing: " + nodeId);
        if (parent === ambiguous) throw new Error("ambiguous: " + nodeId);
        if (parent.children) parent.children.push(node);
        else parent.children = [node];
        node.parent = parent;
      }
    }

    if (!root) throw new Error("no root");
    root.parent = preroot;
    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);
    root.parent = null;
    if (n > 0) throw new Error("cycle");

    return root;
  }

  stratify.id = function(x) {
    return arguments.length ? (id = required(x), stratify) : id;
  };

  stratify.parentId = function(x) {
    return arguments.length ? (parentId = required(x), stratify) : parentId;
  };

  return stratify;
}

function defaultSeparation$1(a, b) {
  return a.parent === b.parent ? 1 : 2;
}

// function radialSeparation(a, b) {
//   return (a.parent === b.parent ? 1 : 2) / a.depth;
// }

// This function is used to traverse the left contour of a subtree (or
// subforest). It returns the successor of v on this contour. This successor is
// either given by the leftmost child of v or by the thread of v. The function
// returns null if and only if v is on the highest level of its subtree.
function nextLeft(v) {
  var children = v.children;
  return children ? children[0] : v.t;
}

// This function works analogously to nextLeft.
function nextRight(v) {
  var children = v.children;
  return children ? children[children.length - 1] : v.t;
}

// Shifts the current subtree rooted at w+. This is done by increasing
// prelim(w+) and mod(w+) by shift.
function moveSubtree(wm, wp, shift) {
  var change = shift / (wp.i - wm.i);
  wp.c -= change;
  wp.s += shift;
  wm.c += change;
  wp.z += shift;
  wp.m += shift;
}

// All other shifts, applied to the smaller subtrees between w- and w+, are
// performed by this function. To prepare the shifts, we have to adjust
// change(w+), shift(w+), and change(w-).
function executeShifts(v) {
  var shift = 0,
      change = 0,
      children = v.children,
      i = children.length,
      w;
  while (--i >= 0) {
    w = children[i];
    w.z += shift;
    w.m += shift;
    shift += w.s + (change += w.c);
  }
}

// If vi-’s ancestor is a sibling of v, returns vi-’s ancestor. Otherwise,
// returns the specified (default) ancestor.
function nextAncestor(vim, v, ancestor) {
  return vim.a.parent === v.parent ? vim.a : ancestor;
}

function TreeNode(node, i) {
  this._ = node;
  this.parent = null;
  this.children = null;
  this.A = null; // default ancestor
  this.a = this; // ancestor
  this.z = 0; // prelim
  this.m = 0; // mod
  this.c = 0; // change
  this.s = 0; // shift
  this.t = null; // thread
  this.i = i; // number
}

TreeNode.prototype = Object.create(Node.prototype);

function treeRoot(root) {
  var tree = new TreeNode(root, 0),
      node,
      nodes = [tree],
      child,
      children,
      i,
      n;

  while (node = nodes.pop()) {
    if (children = node._.children) {
      node.children = new Array(n = children.length);
      for (i = n - 1; i >= 0; --i) {
        nodes.push(child = node.children[i] = new TreeNode(children[i], i));
        child.parent = node;
      }
    }
  }

  (tree.parent = new TreeNode(null, 0)).children = [tree];
  return tree;
}

// Node-link tree diagram using the Reingold-Tilford "tidy" algorithm
function tree() {
  var separation = defaultSeparation$1,
      dx = 1,
      dy = 1,
      nodeSize = null;

  function tree(root) {
    var t = treeRoot(root);

    // Compute the layout using Buchheim et al.’s algorithm.
    t.eachAfter(firstWalk), t.parent.m = -t.z;
    t.eachBefore(secondWalk);

    // If a fixed node size is specified, scale x and y.
    if (nodeSize) root.eachBefore(sizeNode);

    // If a fixed tree size is specified, scale x and y based on the extent.
    // Compute the left-most, right-most, and depth-most nodes for extents.
    else {
      var left = root,
          right = root,
          bottom = root;
      root.eachBefore(function(node) {
        if (node.x < left.x) left = node;
        if (node.x > right.x) right = node;
        if (node.depth > bottom.depth) bottom = node;
      });
      var s = left === right ? 1 : separation(left, right) / 2,
          tx = s - left.x,
          kx = dx / (right.x + s + tx),
          ky = dy / (bottom.depth || 1);
      root.eachBefore(function(node) {
        node.x = (node.x + tx) * kx;
        node.y = node.depth * ky;
      });
    }

    return root;
  }

  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is
  // applied recursively to the children of v, as well as the function
  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the
  // node v is placed to the midpoint of its outermost children.
  function firstWalk(v) {
    var children = v.children,
        siblings = v.parent.children,
        w = v.i ? siblings[v.i - 1] : null;
    if (children) {
      executeShifts(v);
      var midpoint = (children[0].z + children[children.length - 1].z) / 2;
      if (w) {
        v.z = w.z + separation(v._, w._);
        v.m = v.z - midpoint;
      } else {
        v.z = midpoint;
      }
    } else if (w) {
      v.z = w.z + separation(v._, w._);
    }
    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);
  }

  // Computes all real x-coordinates by summing up the modifiers recursively.
  function secondWalk(v) {
    v._.x = v.z + v.parent.m;
    v.m += v.parent.m;
  }

  // The core of the algorithm. Here, a new subtree is combined with the
  // previous subtrees. Threads are used to traverse the inside and outside
  // contours of the left and right subtree up to the highest common level. The
  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the
  // superscript o means outside and i means inside, the subscript - means left
  // subtree and + means right subtree. For summing up the modifiers along the
  // contour, we use respective variables si+, si-, so-, and so+. Whenever two
  // nodes of the inside contours conflict, we compute the left one of the
  // greatest uncommon ancestors using the function ANCESTOR and call MOVE
  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.
  // Finally, we add a new thread (if necessary).
  function apportion(v, w, ancestor) {
    if (w) {
      var vip = v,
          vop = v,
          vim = w,
          vom = vip.parent.children[0],
          sip = vip.m,
          sop = vop.m,
          sim = vim.m,
          som = vom.m,
          shift;
      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {
        vom = nextLeft(vom);
        vop = nextRight(vop);
        vop.a = v;
        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);
        if (shift > 0) {
          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);
          sip += shift;
          sop += shift;
        }
        sim += vim.m;
        sip += vip.m;
        som += vom.m;
        sop += vop.m;
      }
      if (vim && !nextRight(vop)) {
        vop.t = vim;
        vop.m += sim - sop;
      }
      if (vip && !nextLeft(vom)) {
        vom.t = vip;
        vom.m += sip - som;
        ancestor = v;
      }
    }
    return ancestor;
  }

  function sizeNode(node) {
    node.x *= dx;
    node.y = node.depth * dy;
  }

  tree.separation = function(x) {
    return arguments.length ? (separation = x, tree) : separation;
  };

  tree.size = function(x) {
    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);
  };

  tree.nodeSize = function(x) {
    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);
  };

  return tree;
}

function treemapSlice(parent, x0, y0, x1, y1) {
  var nodes = parent.children,
      node,
      i = -1,
      n = nodes.length,
      k = parent.value && (y1 - y0) / parent.value;

  while (++i < n) {
    node = nodes[i], node.x0 = x0, node.x1 = x1;
    node.y0 = y0, node.y1 = y0 += node.value * k;
  }
}

var phi = (1 + Math.sqrt(5)) / 2;

function squarifyRatio(ratio, parent, x0, y0, x1, y1) {
  var rows = [],
      nodes = parent.children,
      row,
      nodeValue,
      i0 = 0,
      i1 = 0,
      n = nodes.length,
      dx, dy,
      value = parent.value,
      sumValue,
      minValue,
      maxValue,
      newRatio,
      minRatio,
      alpha,
      beta;

  while (i0 < n) {
    dx = x1 - x0, dy = y1 - y0;

    // Find the next non-empty node.
    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);
    minValue = maxValue = sumValue;
    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);
    beta = sumValue * sumValue * alpha;
    minRatio = Math.max(maxValue / beta, beta / minValue);

    // Keep adding nodes while the aspect ratio maintains or improves.
    for (; i1 < n; ++i1) {
      sumValue += nodeValue = nodes[i1].value;
      if (nodeValue < minValue) minValue = nodeValue;
      if (nodeValue > maxValue) maxValue = nodeValue;
      beta = sumValue * sumValue * alpha;
      newRatio = Math.max(maxValue / beta, beta / minValue);
      if (newRatio > minRatio) { sumValue -= nodeValue; break; }
      minRatio = newRatio;
    }

    // Position and record the row orientation.
    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});
    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);
    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);
    value -= sumValue, i0 = i1;
  }

  return rows;
}

var squarify = (function custom(ratio) {

  function squarify(parent, x0, y0, x1, y1) {
    squarifyRatio(ratio, parent, x0, y0, x1, y1);
  }

  squarify.ratio = function(x) {
    return custom((x = +x) > 1 ? x : 1);
  };

  return squarify;
})(phi);

function index$1() {
  var tile = squarify,
      round = false,
      dx = 1,
      dy = 1,
      paddingStack = [0],
      paddingInner = constantZero,
      paddingTop = constantZero,
      paddingRight = constantZero,
      paddingBottom = constantZero,
      paddingLeft = constantZero;

  function treemap(root) {
    root.x0 =
    root.y0 = 0;
    root.x1 = dx;
    root.y1 = dy;
    root.eachBefore(positionNode);
    paddingStack = [0];
    if (round) root.eachBefore(roundNode);
    return root;
  }

  function positionNode(node) {
    var p = paddingStack[node.depth],
        x0 = node.x0 + p,
        y0 = node.y0 + p,
        x1 = node.x1 - p,
        y1 = node.y1 - p;
    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;
    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;
    node.x0 = x0;
    node.y0 = y0;
    node.x1 = x1;
    node.y1 = y1;
    if (node.children) {
      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;
      x0 += paddingLeft(node) - p;
      y0 += paddingTop(node) - p;
      x1 -= paddingRight(node) - p;
      y1 -= paddingBottom(node) - p;
      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;
      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;
      tile(node, x0, y0, x1, y1);
    }
  }

  treemap.round = function(x) {
    return arguments.length ? (round = !!x, treemap) : round;
  };

  treemap.size = function(x) {
    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];
  };

  treemap.tile = function(x) {
    return arguments.length ? (tile = required(x), treemap) : tile;
  };

  treemap.padding = function(x) {
    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();
  };

  treemap.paddingInner = function(x) {
    return arguments.length ? (paddingInner = typeof x === "function" ? x : constant(+x), treemap) : paddingInner;
  };

  treemap.paddingOuter = function(x) {
    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();
  };

  treemap.paddingTop = function(x) {
    return arguments.length ? (paddingTop = typeof x === "function" ? x : constant(+x), treemap) : paddingTop;
  };

  treemap.paddingRight = function(x) {
    return arguments.length ? (paddingRight = typeof x === "function" ? x : constant(+x), treemap) : paddingRight;
  };

  treemap.paddingBottom = function(x) {
    return arguments.length ? (paddingBottom = typeof x === "function" ? x : constant(+x), treemap) : paddingBottom;
  };

  treemap.paddingLeft = function(x) {
    return arguments.length ? (paddingLeft = typeof x === "function" ? x : constant(+x), treemap) : paddingLeft;
  };

  return treemap;
}

function binary(parent, x0, y0, x1, y1) {
  var nodes = parent.children,
      i, n = nodes.length,
      sum, sums = new Array(n + 1);

  for (sums[0] = sum = i = 0; i < n; ++i) {
    sums[i + 1] = sum += nodes[i].value;
  }

  partition(0, n, parent.value, x0, y0, x1, y1);

  function partition(i, j, value, x0, y0, x1, y1) {
    if (i >= j - 1) {
      var node = nodes[i];
      node.x0 = x0, node.y0 = y0;
      node.x1 = x1, node.y1 = y1;
      return;
    }

    var valueOffset = sums[i],
        valueTarget = (value / 2) + valueOffset,
        k = i + 1,
        hi = j - 1;

    while (k < hi) {
      var mid = k + hi >>> 1;
      if (sums[mid] < valueTarget) k = mid + 1;
      else hi = mid;
    }

    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;

    var valueLeft = sums[k] - valueOffset,
        valueRight = value - valueLeft;

    if ((x1 - x0) > (y1 - y0)) {
      var xk = (x0 * valueRight + x1 * valueLeft) / value;
      partition(i, k, valueLeft, x0, y0, xk, y1);
      partition(k, j, valueRight, xk, y0, x1, y1);
    } else {
      var yk = (y0 * valueRight + y1 * valueLeft) / value;
      partition(i, k, valueLeft, x0, y0, x1, yk);
      partition(k, j, valueRight, x0, yk, x1, y1);
    }
  }
}

function sliceDice(parent, x0, y0, x1, y1) {
  (parent.depth & 1 ? treemapSlice : treemapDice)(parent, x0, y0, x1, y1);
}

var resquarify = (function custom(ratio) {

  function resquarify(parent, x0, y0, x1, y1) {
    if ((rows = parent._squarify) && (rows.ratio === ratio)) {
      var rows,
          row,
          nodes,
          i,
          j = -1,
          n,
          m = rows.length,
          value = parent.value;

      while (++j < m) {
        row = rows[j], nodes = row.children;
        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;
        if (row.dice) treemapDice(row, x0, y0, x1, y0 += (y1 - y0) * row.value / value);
        else treemapSlice(row, x0, y0, x0 += (x1 - x0) * row.value / value, y1);
        value -= row.value;
      }
    } else {
      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);
      rows.ratio = ratio;
    }
  }

  resquarify.ratio = function(x) {
    return custom((x = +x) > 1 ? x : 1);
  };

  return resquarify;
})(phi);

exports.cluster = cluster;
exports.hierarchy = hierarchy;
exports.pack = index;
exports.packEnclose = enclose;
exports.packSiblings = siblings;
exports.partition = partition;
exports.stratify = stratify;
exports.tree = tree;
exports.treemap = index$1;
exports.treemapBinary = binary;
exports.treemapDice = treemapDice;
exports.treemapResquarify = resquarify;
exports.treemapSlice = treemapSlice;
exports.treemapSliceDice = sliceDice;
exports.treemapSquarify = squarify;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],69:[function(require,module,exports){
// https://d3js.org/d3-interpolate/ v1.4.0 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-color')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-color'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}, global.d3));
}(this, function (exports, d3Color) { 'use strict';

function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0
      + (4 - 6 * t2 + 3 * t3) * v1
      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2
      + t3 * v3) / 6;
}

function basis$1(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),
        v1 = values[i],
        v2 = values[i + 1],
        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,
        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

function basisClosed(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),
        v0 = values[(i + n - 1) % n],
        v1 = values[i % n],
        v2 = values[(i + 1) % n],
        v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
}

function constant(x) {
  return function() {
    return x;
  };
}

function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}

function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}

function hue(a, b) {
  var d = b - a;
  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);
}

function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);
  };
}

function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant(isNaN(a) ? b : a);
}

var rgb = (function rgbGamma(y) {
  var color = gamma(y);

  function rgb(start, end) {
    var r = color((start = d3Color.rgb(start)).r, (end = d3Color.rgb(end)).r),
        g = color(start.g, end.g),
        b = color(start.b, end.b),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.r = r(t);
      start.g = g(t);
      start.b = b(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }

  rgb.gamma = rgbGamma;

  return rgb;
})(1);

function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length,
        r = new Array(n),
        g = new Array(n),
        b = new Array(n),
        i, color;
    for (i = 0; i < n; ++i) {
      color = d3Color.rgb(colors[i]);
      r[i] = color.r || 0;
      g[i] = color.g || 0;
      b[i] = color.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color.opacity = 1;
    return function(t) {
      color.r = r(t);
      color.g = g(t);
      color.b = b(t);
      return color + "";
    };
  };
}

var rgbBasis = rgbSpline(basis$1);
var rgbBasisClosed = rgbSpline(basisClosed);

function numberArray(a, b) {
  if (!b) b = [];
  var n = a ? Math.min(b.length, a.length) : 0,
      c = b.slice(),
      i;
  return function(t) {
    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;
    return c;
  };
}

function isNumberArray(x) {
  return ArrayBuffer.isView(x) && !(x instanceof DataView);
}

function array(a, b) {
  return (isNumberArray(b) ? numberArray : genericArray)(a, b);
}

function genericArray(a, b) {
  var nb = b ? b.length : 0,
      na = a ? Math.min(nb, a.length) : 0,
      x = new Array(na),
      c = new Array(nb),
      i;

  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);
  for (; i < nb; ++i) c[i] = b[i];

  return function(t) {
    for (i = 0; i < na; ++i) c[i] = x[i](t);
    return c;
  };
}

function date(a, b) {
  var d = new Date;
  return a = +a, b = +b, function(t) {
    return d.setTime(a * (1 - t) + b * t), d;
  };
}

function number(a, b) {
  return a = +a, b = +b, function(t) {
    return a * (1 - t) + b * t;
  };
}

function object(a, b) {
  var i = {},
      c = {},
      k;

  if (a === null || typeof a !== "object") a = {};
  if (b === null || typeof b !== "object") b = {};

  for (k in b) {
    if (k in a) {
      i[k] = value(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }

  return function(t) {
    for (k in i) c[k] = i[k](t);
    return c;
  };
}

var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
    reB = new RegExp(reA.source, "g");

function zero(b) {
  return function() {
    return b;
  };
}

function one(b) {
  return function(t) {
    return b(t) + "";
  };
}

function string(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b
      am, // current match in a
      bm, // current match in b
      bs, // string preceding current number in b, if any
      i = -1, // index in s
      s = [], // string constants and placeholders
      q = []; // number interpolators

  // Coerce inputs to strings.
  a = a + "", b = b + "";

  // Interpolate pairs of numbers in a & b.
  while ((am = reA.exec(a))
      && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) { // a string precedes the next number in b
      bs = b.slice(bi, bs);
      if (s[i]) s[i] += bs; // coalesce with previous string
      else s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match
      if (s[i]) s[i] += bm; // coalesce with previous string
      else s[++i] = bm;
    } else { // interpolate non-matching numbers
      s[++i] = null;
      q.push({i: i, x: number(am, bm)});
    }
    bi = reB.lastIndex;
  }

  // Add remains of b.
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i]) s[i] += bs; // coalesce with previous string
    else s[++i] = bs;
  }

  // Special optimization for only a single match.
  // Otherwise, interpolate each of the numbers and rejoin the string.
  return s.length < 2 ? (q[0]
      ? one(q[0].x)
      : zero(b))
      : (b = q.length, function(t) {
          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);
          return s.join("");
        });
}

function value(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant(b)
      : (t === "number" ? number
      : t === "string" ? ((c = d3Color.color(b)) ? (b = c, rgb) : string)
      : b instanceof d3Color.color ? rgb
      : b instanceof Date ? date
      : isNumberArray(b) ? numberArray
      : Array.isArray(b) ? genericArray
      : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object
      : number)(a, b);
}

function discrete(range) {
  var n = range.length;
  return function(t) {
    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
}

function hue$1(a, b) {
  var i = hue(+a, +b);
  return function(t) {
    var x = i(t);
    return x - 360 * Math.floor(x / 360);
  };
}

function round(a, b) {
  return a = +a, b = +b, function(t) {
    return Math.round(a * (1 - t) + b * t);
  };
}

var degrees = 180 / Math.PI;

var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};

function decompose(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX: scaleX,
    scaleY: scaleY
  };
}

var cssNode,
    cssRoot,
    cssView,
    svgNode;

function parseCss(value) {
  if (value === "none") return identity;
  if (!cssNode) cssNode = document.createElement("DIV"), cssRoot = document.documentElement, cssView = document.defaultView;
  cssNode.style.transform = value;
  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue("transform");
  cssRoot.removeChild(cssNode);
  value = value.slice(7, -1).split(",");
  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);
}

function parseSvg(value) {
  if (value == null) return identity;
  if (!svgNode) svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;
  value = value.matrix;
  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);
}

function interpolateTransform(parse, pxComma, pxParen, degParen) {

  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }

  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }

  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path
      q.push({i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: number(a, b)});
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }

  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: number(a, b)});
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }

  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }

  return function(a, b) {
    var s = [], // string constants and placeholders
        q = []; // number interpolators
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null; // gc
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n) s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}

var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

var rho = Math.SQRT2,
    rho2 = 2,
    rho4 = 4,
    epsilon2 = 1e-12;

function cosh(x) {
  return ((x = Math.exp(x)) + 1 / x) / 2;
}

function sinh(x) {
  return ((x = Math.exp(x)) - 1 / x) / 2;
}

function tanh(x) {
  return ((x = Math.exp(2 * x)) - 1) / (x + 1);
}

// p0 = [ux0, uy0, w0]
// p1 = [ux1, uy1, w1]
function zoom(p0, p1) {
  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],
      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],
      dx = ux1 - ux0,
      dy = uy1 - uy0,
      d2 = dx * dx + dy * dy,
      i,
      S;

  // Special case for u0 ≅ u1.
  if (d2 < epsilon2) {
    S = Math.log(w1 / w0) / rho;
    i = function(t) {
      return [
        ux0 + t * dx,
        uy0 + t * dy,
        w0 * Math.exp(rho * t * S)
      ];
    };
  }

  // General case.
  else {
    var d1 = Math.sqrt(d2),
        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),
        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),
        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),
        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
    S = (r1 - r0) / rho;
    i = function(t) {
      var s = t * S,
          coshr0 = cosh(r0),
          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));
      return [
        ux0 + u * dx,
        uy0 + u * dy,
        w0 * coshr0 / cosh(rho * s + r0)
      ];
    };
  }

  i.duration = S * 1000;

  return i;
}

function hsl(hue) {
  return function(start, end) {
    var h = hue((start = d3Color.hsl(start)).h, (end = d3Color.hsl(end)).h),
        s = nogamma(start.s, end.s),
        l = nogamma(start.l, end.l),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.s = s(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

var hsl$1 = hsl(hue);
var hslLong = hsl(nogamma);

function lab(start, end) {
  var l = nogamma((start = d3Color.lab(start)).l, (end = d3Color.lab(end)).l),
      a = nogamma(start.a, end.a),
      b = nogamma(start.b, end.b),
      opacity = nogamma(start.opacity, end.opacity);
  return function(t) {
    start.l = l(t);
    start.a = a(t);
    start.b = b(t);
    start.opacity = opacity(t);
    return start + "";
  };
}

function hcl(hue) {
  return function(start, end) {
    var h = hue((start = d3Color.hcl(start)).h, (end = d3Color.hcl(end)).h),
        c = nogamma(start.c, end.c),
        l = nogamma(start.l, end.l),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.c = c(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

var hcl$1 = hcl(hue);
var hclLong = hcl(nogamma);

function cubehelix(hue) {
  return (function cubehelixGamma(y) {
    y = +y;

    function cubehelix(start, end) {
      var h = hue((start = d3Color.cubehelix(start)).h, (end = d3Color.cubehelix(end)).h),
          s = nogamma(start.s, end.s),
          l = nogamma(start.l, end.l),
          opacity = nogamma(start.opacity, end.opacity);
      return function(t) {
        start.h = h(t);
        start.s = s(t);
        start.l = l(Math.pow(t, y));
        start.opacity = opacity(t);
        return start + "";
      };
    }

    cubehelix.gamma = cubehelixGamma;

    return cubehelix;
  })(1);
}

var cubehelix$1 = cubehelix(hue);
var cubehelixLong = cubehelix(nogamma);

function piecewise(interpolate, values) {
  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);
  while (i < n) I[i] = interpolate(v, v = values[++i]);
  return function(t) {
    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));
    return I[i](t - i);
  };
}

function quantize(interpolator, n) {
  var samples = new Array(n);
  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));
  return samples;
}

exports.interpolate = value;
exports.interpolateArray = array;
exports.interpolateBasis = basis$1;
exports.interpolateBasisClosed = basisClosed;
exports.interpolateCubehelix = cubehelix$1;
exports.interpolateCubehelixLong = cubehelixLong;
exports.interpolateDate = date;
exports.interpolateDiscrete = discrete;
exports.interpolateHcl = hcl$1;
exports.interpolateHclLong = hclLong;
exports.interpolateHsl = hsl$1;
exports.interpolateHslLong = hslLong;
exports.interpolateHue = hue$1;
exports.interpolateLab = lab;
exports.interpolateNumber = number;
exports.interpolateNumberArray = numberArray;
exports.interpolateObject = object;
exports.interpolateRgb = rgb;
exports.interpolateRgbBasis = rgbBasis;
exports.interpolateRgbBasisClosed = rgbBasisClosed;
exports.interpolateRound = round;
exports.interpolateString = string;
exports.interpolateTransformCss = interpolateTransformCss;
exports.interpolateTransformSvg = interpolateTransformSvg;
exports.interpolateZoom = zoom;
exports.piecewise = piecewise;
exports.quantize = quantize;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{"d3-color":61}],70:[function(require,module,exports){
// https://d3js.org/d3-scale/ v3.3.0 Copyright 2021 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-interpolate'), require('d3-format'), require('d3-time'), require('d3-time-format')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-interpolate', 'd3-format', 'd3-time', 'd3-time-format'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.d3 = global.d3 || {}, global.d3, global.d3, global.d3, global.d3, global.d3));
}(this, (function (exports, d3Array, d3Interpolate, d3Format, d3Time, d3TimeFormat) { 'use strict';

function initRange(domain, range) {
  switch (arguments.length) {
    case 0: break;
    case 1: this.range(domain); break;
    default: this.range(range).domain(domain); break;
  }
  return this;
}

function initInterpolator(domain, interpolator) {
  switch (arguments.length) {
    case 0: break;
    case 1: {
      if (typeof domain === "function") this.interpolator(domain);
      else this.range(domain);
      break;
    }
    default: {
      this.domain(domain);
      if (typeof interpolator === "function") this.interpolator(interpolator);
      else this.range(interpolator);
      break;
    }
  }
  return this;
}

const implicit = Symbol("implicit");

function ordinal() {
  var index = new Map(),
      domain = [],
      range = [],
      unknown = implicit;

  function scale(d) {
    var key = d + "", i = index.get(key);
    if (!i) {
      if (unknown !== implicit) return unknown;
      index.set(key, i = domain.push(d));
    }
    return range[(i - 1) % range.length];
  }

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [], index = new Map();
    for (const value of _) {
      const key = value + "";
      if (index.has(key)) continue;
      index.set(key, domain.push(value));
    }
    return scale;
  };

  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), scale) : range.slice();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return ordinal(domain, range).unknown(unknown);
  };

  initRange.apply(scale, arguments);

  return scale;
}

function band() {
  var scale = ordinal().unknown(undefined),
      domain = scale.domain,
      ordinalRange = scale.range,
      r0 = 0,
      r1 = 1,
      step,
      bandwidth,
      round = false,
      paddingInner = 0,
      paddingOuter = 0,
      align = 0.5;

  delete scale.unknown;

  function rescale() {
    var n = domain().length,
        reverse = r1 < r0,
        start = reverse ? r1 : r0,
        stop = reverse ? r0 : r1;
    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);
    if (round) step = Math.floor(step);
    start += (stop - start - step * (n - paddingInner)) * align;
    bandwidth = step * (1 - paddingInner);
    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);
    var values = d3Array.range(n).map(function(i) { return start + step * i; });
    return ordinalRange(reverse ? values.reverse() : values);
  }

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.range = function(_) {
    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];
  };

  scale.rangeRound = function(_) {
    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();
  };

  scale.bandwidth = function() {
    return bandwidth;
  };

  scale.step = function() {
    return step;
  };

  scale.round = function(_) {
    return arguments.length ? (round = !!_, rescale()) : round;
  };

  scale.padding = function(_) {
    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;
  };

  scale.paddingInner = function(_) {
    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;
  };

  scale.paddingOuter = function(_) {
    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;
  };

  scale.align = function(_) {
    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;
  };

  scale.copy = function() {
    return band(domain(), [r0, r1])
        .round(round)
        .paddingInner(paddingInner)
        .paddingOuter(paddingOuter)
        .align(align);
  };

  return initRange.apply(rescale(), arguments);
}

function pointish(scale) {
  var copy = scale.copy;

  scale.padding = scale.paddingOuter;
  delete scale.paddingInner;
  delete scale.paddingOuter;

  scale.copy = function() {
    return pointish(copy());
  };

  return scale;
}

function point() {
  return pointish(band.apply(null, arguments).paddingInner(1));
}

function constants(x) {
  return function() {
    return x;
  };
}

function number$1(x) {
  return +x;
}

var unit = [0, 1];

function identity$1(x) {
  return x;
}

function normalize(a, b) {
  return (b -= (a = +a))
      ? function(x) { return (x - a) / b; }
      : constants(isNaN(b) ? NaN : 0.5);
}

function clamper(a, b) {
  var t;
  if (a > b) t = a, a = b, b = t;
  return function(x) { return Math.max(a, Math.min(b, x)); };
}

// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].
// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].
function bimap(domain, range, interpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];
  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);
  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);
  return function(x) { return r0(d0(x)); };
}

function polymap(domain, range, interpolate) {
  var j = Math.min(domain.length, range.length) - 1,
      d = new Array(j),
      r = new Array(j),
      i = -1;

  // Reverse descending domains.
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }

  while (++i < j) {
    d[i] = normalize(domain[i], domain[i + 1]);
    r[i] = interpolate(range[i], range[i + 1]);
  }

  return function(x) {
    var i = d3Array.bisect(domain, x, 1, j) - 1;
    return r[i](d[i](x));
  };
}

function copy$1(source, target) {
  return target
      .domain(source.domain())
      .range(source.range())
      .interpolate(source.interpolate())
      .clamp(source.clamp())
      .unknown(source.unknown());
}

function transformer$2() {
  var domain = unit,
      range = unit,
      interpolate = d3Interpolate.interpolate,
      transform,
      untransform,
      unknown,
      clamp = identity$1,
      piecewise,
      output,
      input;

  function rescale() {
    var n = Math.min(domain.length, range.length);
    if (clamp !== identity$1) clamp = clamper(domain[0], domain[n - 1]);
    piecewise = n > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }

  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));
  }

  scale.invert = function(y) {
    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), d3Interpolate.interpolateNumber)))(y)));
  };

  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_, number$1), rescale()) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();
  };

  scale.rangeRound = function(_) {
    return range = Array.from(_), interpolate = d3Interpolate.interpolateRound, rescale();
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = _ ? true : identity$1, rescale()) : clamp !== identity$1;
  };

  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  return function(t, u) {
    transform = t, untransform = u;
    return rescale();
  };
}

function continuous() {
  return transformer$2()(identity$1, identity$1);
}

function tickFormat(start, stop, count, specifier) {
  var step = d3Array.tickStep(start, stop, count),
      precision;
  specifier = d3Format.formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionPrefix(step, value))) specifier.precision = precision;
      return d3Format.formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionFixed(step))) specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return d3Format.format(specifier);
}

function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return d3Array.ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }
    
    while (maxIter-- > 0) {
      step = d3Array.tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start;
        d[i1] = stop;
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy$1(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}

function identity(domain) {
  var unknown;

  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : x;
  }

  scale.invert = scale;

  scale.domain = scale.range = function(_) {
    return arguments.length ? (domain = Array.from(_, number$1), scale) : domain.slice();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return identity(domain).unknown(unknown);
  };

  domain = arguments.length ? Array.from(domain, number$1) : [0, 1];

  return linearish(scale);
}

function nice(domain, interval) {
  domain = domain.slice();

  var i0 = 0,
      i1 = domain.length - 1,
      x0 = domain[i0],
      x1 = domain[i1],
      t;

  if (x1 < x0) {
    t = i0, i0 = i1, i1 = t;
    t = x0, x0 = x1, x1 = t;
  }

  domain[i0] = interval.floor(x0);
  domain[i1] = interval.ceil(x1);
  return domain;
}

function transformLog(x) {
  return Math.log(x);
}

function transformExp(x) {
  return Math.exp(x);
}

function transformLogn(x) {
  return -Math.log(-x);
}

function transformExpn(x) {
  return -Math.exp(-x);
}

function pow10(x) {
  return isFinite(x) ? +("1e" + x) : x < 0 ? 0 : x;
}

function powp(base) {
  return base === 10 ? pow10
      : base === Math.E ? Math.exp
      : function(x) { return Math.pow(base, x); };
}

function logp(base) {
  return base === Math.E ? Math.log
      : base === 10 && Math.log10
      || base === 2 && Math.log2
      || (base = Math.log(base), function(x) { return Math.log(x) / base; });
}

function reflect(f) {
  return function(x) {
    return -f(-x);
  };
}

function loggish(transform) {
  var scale = transform(transformLog, transformExp),
      domain = scale.domain,
      base = 10,
      logs,
      pows;

  function rescale() {
    logs = logp(base), pows = powp(base);
    if (domain()[0] < 0) {
      logs = reflect(logs), pows = reflect(pows);
      transform(transformLogn, transformExpn);
    } else {
      transform(transformLog, transformExp);
    }
    return scale;
  }

  scale.base = function(_) {
    return arguments.length ? (base = +_, rescale()) : base;
  };

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.ticks = function(count) {
    var d = domain(),
        u = d[0],
        v = d[d.length - 1],
        r;

    if (r = v < u) i = u, u = v, v = i;

    var i = logs(u),
        j = logs(v),
        p,
        k,
        t,
        n = count == null ? 10 : +count,
        z = [];

    if (!(base % 1) && j - i < n) {
      i = Math.floor(i), j = Math.ceil(j);
      if (u > 0) for (; i <= j; ++i) {
        for (k = 1, p = pows(i); k < base; ++k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      } else for (; i <= j; ++i) {
        for (k = base - 1, p = pows(i); k >= 1; --k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      }
      if (z.length * 2 < n) z = d3Array.ticks(u, v, n);
    } else {
      z = d3Array.ticks(i, j, Math.min(j - i, n)).map(pows);
    }

    return r ? z.reverse() : z;
  };

  scale.tickFormat = function(count, specifier) {
    if (specifier == null) specifier = base === 10 ? ".0e" : ",";
    if (typeof specifier !== "function") specifier = d3Format.format(specifier);
    if (count === Infinity) return specifier;
    if (count == null) count = 10;
    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?
    return function(d) {
      var i = d / pows(Math.round(logs(d)));
      if (i * base < base - 0.5) i *= base;
      return i <= k ? specifier(d) : "";
    };
  };

  scale.nice = function() {
    return domain(nice(domain(), {
      floor: function(x) { return pows(Math.floor(logs(x))); },
      ceil: function(x) { return pows(Math.ceil(logs(x))); }
    }));
  };

  return scale;
}

function log() {
  var scale = loggish(transformer$2()).domain([1, 10]);

  scale.copy = function() {
    return copy$1(scale, log()).base(scale.base());
  };

  initRange.apply(scale, arguments);

  return scale;
}

function transformSymlog(c) {
  return function(x) {
    return Math.sign(x) * Math.log1p(Math.abs(x / c));
  };
}

function transformSymexp(c) {
  return function(x) {
    return Math.sign(x) * Math.expm1(Math.abs(x)) * c;
  };
}

function symlogish(transform) {
  var c = 1, scale = transform(transformSymlog(c), transformSymexp(c));

  scale.constant = function(_) {
    return arguments.length ? transform(transformSymlog(c = +_), transformSymexp(c)) : c;
  };

  return linearish(scale);
}

function symlog() {
  var scale = symlogish(transformer$2());

  scale.copy = function() {
    return copy$1(scale, symlog()).constant(scale.constant());
  };

  return initRange.apply(scale, arguments);
}

function transformPow(exponent) {
  return function(x) {
    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);
  };
}

function transformSqrt(x) {
  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);
}

function transformSquare(x) {
  return x < 0 ? -x * x : x * x;
}

function powish(transform) {
  var scale = transform(identity$1, identity$1),
      exponent = 1;

  function rescale() {
    return exponent === 1 ? transform(identity$1, identity$1)
        : exponent === 0.5 ? transform(transformSqrt, transformSquare)
        : transform(transformPow(exponent), transformPow(1 / exponent));
  }

  scale.exponent = function(_) {
    return arguments.length ? (exponent = +_, rescale()) : exponent;
  };

  return linearish(scale);
}

function pow() {
  var scale = powish(transformer$2());

  scale.copy = function() {
    return copy$1(scale, pow()).exponent(scale.exponent());
  };

  initRange.apply(scale, arguments);

  return scale;
}

function sqrt() {
  return pow.apply(null, arguments).exponent(0.5);
}

function square(x) {
  return Math.sign(x) * x * x;
}

function unsquare(x) {
  return Math.sign(x) * Math.sqrt(Math.abs(x));
}

function radial() {
  var squared = continuous(),
      range = [0, 1],
      round = false,
      unknown;

  function scale(x) {
    var y = unsquare(squared(x));
    return isNaN(y) ? unknown : round ? Math.round(y) : y;
  }

  scale.invert = function(y) {
    return squared.invert(square(y));
  };

  scale.domain = function(_) {
    return arguments.length ? (squared.domain(_), scale) : squared.domain();
  };

  scale.range = function(_) {
    return arguments.length ? (squared.range((range = Array.from(_, number$1)).map(square)), scale) : range.slice();
  };

  scale.rangeRound = function(_) {
    return scale.range(_).round(true);
  };

  scale.round = function(_) {
    return arguments.length ? (round = !!_, scale) : round;
  };

  scale.clamp = function(_) {
    return arguments.length ? (squared.clamp(_), scale) : squared.clamp();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return radial(squared.domain(), range)
        .round(round)
        .clamp(squared.clamp())
        .unknown(unknown);
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}

function quantile() {
  var domain = [],
      range = [],
      thresholds = [],
      unknown;

  function rescale() {
    var i = 0, n = Math.max(1, range.length);
    thresholds = new Array(n - 1);
    while (++i < n) thresholds[i - 1] = d3Array.quantileSorted(domain, i / n);
    return scale;
  }

  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : range[d3Array.bisect(thresholds, x)];
  }

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN] : [
      i > 0 ? thresholds[i - 1] : domain[0],
      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]
    ];
  };

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [];
    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);
    domain.sort(d3Array.ascending);
    return rescale();
  };

  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.quantiles = function() {
    return thresholds.slice();
  };

  scale.copy = function() {
    return quantile()
        .domain(domain)
        .range(range)
        .unknown(unknown);
  };

  return initRange.apply(scale, arguments);
}

function quantize() {
  var x0 = 0,
      x1 = 1,
      n = 1,
      domain = [0.5],
      range = [0, 1],
      unknown;

  function scale(x) {
    return x != null && x <= x ? range[d3Array.bisect(domain, x, 0, n)] : unknown;
  }

  function rescale() {
    var i = -1;
    domain = new Array(n);
    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);
    return scale;
  }

  scale.domain = function(_) {
    return arguments.length ? ([x0, x1] = _, x0 = +x0, x1 = +x1, rescale()) : [x0, x1];
  };

  scale.range = function(_) {
    return arguments.length ? (n = (range = Array.from(_)).length - 1, rescale()) : range.slice();
  };

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN]
        : i < 1 ? [x0, domain[0]]
        : i >= n ? [domain[n - 1], x1]
        : [domain[i - 1], domain[i]];
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : scale;
  };

  scale.thresholds = function() {
    return domain.slice();
  };

  scale.copy = function() {
    return quantize()
        .domain([x0, x1])
        .range(range)
        .unknown(unknown);
  };

  return initRange.apply(linearish(scale), arguments);
}

function threshold() {
  var domain = [0.5],
      range = [0, 1],
      unknown,
      n = 1;

  function scale(x) {
    return x != null && x <= x ? range[d3Array.bisect(domain, x, 0, n)] : unknown;
  }

  scale.domain = function(_) {
    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();
  };

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return [domain[i - 1], domain[i]];
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return threshold()
        .domain(domain)
        .range(range)
        .unknown(unknown);
  };

  return initRange.apply(scale, arguments);
}

function date(t) {
  return new Date(t);
}

function number(t) {
  return t instanceof Date ? +t : +new Date(+t);
}

function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {
  var scale = continuous(),
      invert = scale.invert,
      domain = scale.domain;

  var formatMillisecond = format(".%L"),
      formatSecond = format(":%S"),
      formatMinute = format("%I:%M"),
      formatHour = format("%I %p"),
      formatDay = format("%a %d"),
      formatWeek = format("%b %d"),
      formatMonth = format("%B"),
      formatYear = format("%Y");

  function tickFormat(date) {
    return (second(date) < date ? formatMillisecond
        : minute(date) < date ? formatSecond
        : hour(date) < date ? formatMinute
        : day(date) < date ? formatHour
        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)
        : year(date) < date ? formatMonth
        : formatYear)(date);
  }

  scale.invert = function(y) {
    return new Date(invert(y));
  };

  scale.domain = function(_) {
    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);
  };

  scale.ticks = function(interval) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);
  };

  scale.tickFormat = function(count, specifier) {
    return specifier == null ? tickFormat : format(specifier);
  };

  scale.nice = function(interval) {
    var d = domain();
    if (!interval || typeof interval.range !== "function") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);
    return interval ? domain(nice(d, interval)) : scale;
  };

  scale.copy = function() {
    return copy$1(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));
  };

  return scale;
}

function time() {
  return initRange.apply(calendar(d3Time.timeTicks, d3Time.timeTickInterval, d3Time.timeYear, d3Time.timeMonth, d3Time.timeWeek, d3Time.timeDay, d3Time.timeHour, d3Time.timeMinute, d3Time.timeSecond, d3TimeFormat.timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);
}

function utcTime() {
  return initRange.apply(calendar(d3Time.utcTicks, d3Time.utcTickInterval, d3Time.utcYear, d3Time.utcMonth, d3Time.utcWeek, d3Time.utcDay, d3Time.utcHour, d3Time.utcMinute, d3Time.utcSecond, d3TimeFormat.utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);
}

function transformer$1() {
  var x0 = 0,
      x1 = 1,
      t0,
      t1,
      k10,
      transform,
      interpolator = identity$1,
      clamp = false,
      unknown;

  function scale(x) {
    return x == null || isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));
  }

  scale.domain = function(_) {
    return arguments.length ? ([x0, x1] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };

  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  function range(interpolate) {
    return function(_) {
      var r0, r1;
      return arguments.length ? ([r0, r1] = _, interpolator = interpolate(r0, r1), scale) : [interpolator(0), interpolator(1)];
    };
  }

  scale.range = range(d3Interpolate.interpolate);

  scale.rangeRound = range(d3Interpolate.interpolateRound);

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  return function(t) {
    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);
    return scale;
  };
}

function copy(source, target) {
  return target
      .domain(source.domain())
      .interpolator(source.interpolator())
      .clamp(source.clamp())
      .unknown(source.unknown());
}

function sequential() {
  var scale = linearish(transformer$1()(identity$1));

  scale.copy = function() {
    return copy(scale, sequential());
  };

  return initInterpolator.apply(scale, arguments);
}

function sequentialLog() {
  var scale = loggish(transformer$1()).domain([1, 10]);

  scale.copy = function() {
    return copy(scale, sequentialLog()).base(scale.base());
  };

  return initInterpolator.apply(scale, arguments);
}

function sequentialSymlog() {
  var scale = symlogish(transformer$1());

  scale.copy = function() {
    return copy(scale, sequentialSymlog()).constant(scale.constant());
  };

  return initInterpolator.apply(scale, arguments);
}

function sequentialPow() {
  var scale = powish(transformer$1());

  scale.copy = function() {
    return copy(scale, sequentialPow()).exponent(scale.exponent());
  };

  return initInterpolator.apply(scale, arguments);
}

function sequentialSqrt() {
  return sequentialPow.apply(null, arguments).exponent(0.5);
}

function sequentialQuantile() {
  var domain = [],
      interpolator = identity$1;

  function scale(x) {
    if (x != null && !isNaN(x = +x)) return interpolator((d3Array.bisect(domain, x, 1) - 1) / (domain.length - 1));
  }

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [];
    for (let d of _) if (d != null && !isNaN(d = +d)) domain.push(d);
    domain.sort(d3Array.ascending);
    return scale;
  };

  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  scale.range = function() {
    return domain.map((d, i) => interpolator(i / (domain.length - 1)));
  };

  scale.quantiles = function(n) {
    return Array.from({length: n + 1}, (_, i) => d3Array.quantile(domain, i / n));
  };

  scale.copy = function() {
    return sequentialQuantile(interpolator).domain(domain);
  };

  return initInterpolator.apply(scale, arguments);
}

function transformer() {
  var x0 = 0,
      x1 = 0.5,
      x2 = 1,
      s = 1,
      t0,
      t1,
      t2,
      k10,
      k21,
      interpolator = identity$1,
      transform,
      clamp = false,
      unknown;

  function scale(x) {
    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (s * x < s * t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));
  }

  scale.domain = function(_) {
    return arguments.length ? ([x0, x1, x2] = _, t0 = transform(x0 = +x0), t1 = transform(x1 = +x1), t2 = transform(x2 = +x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1, scale) : [x0, x1, x2];
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };

  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  function range(interpolate) {
    return function(_) {
      var r0, r1, r2;
      return arguments.length ? ([r0, r1, r2] = _, interpolator = d3Interpolate.piecewise(interpolate, [r0, r1, r2]), scale) : [interpolator(0), interpolator(0.5), interpolator(1)];
    };
  }

  scale.range = range(d3Interpolate.interpolate);

  scale.rangeRound = range(d3Interpolate.interpolateRound);

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  return function(t) {
    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), s = t1 < t0 ? -1 : 1;
    return scale;
  };
}

function diverging() {
  var scale = linearish(transformer()(identity$1));

  scale.copy = function() {
    return copy(scale, diverging());
  };

  return initInterpolator.apply(scale, arguments);
}

function divergingLog() {
  var scale = loggish(transformer()).domain([0.1, 1, 10]);

  scale.copy = function() {
    return copy(scale, divergingLog()).base(scale.base());
  };

  return initInterpolator.apply(scale, arguments);
}

function divergingSymlog() {
  var scale = symlogish(transformer());

  scale.copy = function() {
    return copy(scale, divergingSymlog()).constant(scale.constant());
  };

  return initInterpolator.apply(scale, arguments);
}

function divergingPow() {
  var scale = powish(transformer());

  scale.copy = function() {
    return copy(scale, divergingPow()).exponent(scale.exponent());
  };

  return initInterpolator.apply(scale, arguments);
}

function divergingSqrt() {
  return divergingPow.apply(null, arguments).exponent(0.5);
}

exports.scaleBand = band;
exports.scaleDiverging = diverging;
exports.scaleDivergingLog = divergingLog;
exports.scaleDivergingPow = divergingPow;
exports.scaleDivergingSqrt = divergingSqrt;
exports.scaleDivergingSymlog = divergingSymlog;
exports.scaleIdentity = identity;
exports.scaleImplicit = implicit;
exports.scaleLinear = linear;
exports.scaleLog = log;
exports.scaleOrdinal = ordinal;
exports.scalePoint = point;
exports.scalePow = pow;
exports.scaleQuantile = quantile;
exports.scaleQuantize = quantize;
exports.scaleRadial = radial;
exports.scaleSequential = sequential;
exports.scaleSequentialLog = sequentialLog;
exports.scaleSequentialPow = sequentialPow;
exports.scaleSequentialQuantile = sequentialQuantile;
exports.scaleSequentialSqrt = sequentialSqrt;
exports.scaleSequentialSymlog = sequentialSymlog;
exports.scaleSqrt = sqrt;
exports.scaleSymlog = symlog;
exports.scaleThreshold = threshold;
exports.scaleTime = time;
exports.scaleUtc = utcTime;
exports.tickFormat = tickFormat;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-array":60,"d3-format":67,"d3-interpolate":69,"d3-time":71,"d3-time-format":73}],71:[function(require,module,exports){
// https://d3js.org/d3-time/ v2.1.1 Copyright 2021 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-array'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.d3 = global.d3 || {}, global.d3));
}(this, (function (exports, d3Array) { 'use strict';

var t0 = new Date,
    t1 = new Date;

function newInterval(floori, offseti, count, field) {

  function interval(date) {
    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;
  }

  interval.floor = function(date) {
    return floori(date = new Date(+date)), date;
  };

  interval.ceil = function(date) {
    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;
  };

  interval.round = function(date) {
    var d0 = interval(date),
        d1 = interval.ceil(date);
    return date - d0 < d1 - date ? d0 : d1;
  };

  interval.offset = function(date, step) {
    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;
  };

  interval.range = function(start, stop, step) {
    var range = [], previous;
    start = interval.ceil(start);
    step = step == null ? 1 : Math.floor(step);
    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date
    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);
    while (previous < start && start < stop);
    return range;
  };

  interval.filter = function(test) {
    return newInterval(function(date) {
      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);
    }, function(date, step) {
      if (date >= date) {
        if (step < 0) while (++step <= 0) {
          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty
        } else while (--step >= 0) {
          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty
        }
      }
    });
  };

  if (count) {
    interval.count = function(start, end) {
      t0.setTime(+start), t1.setTime(+end);
      floori(t0), floori(t1);
      return Math.floor(count(t0, t1));
    };

    interval.every = function(step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null
          : !(step > 1) ? interval
          : interval.filter(field
              ? function(d) { return field(d) % step === 0; }
              : function(d) { return interval.count(0, d) % step === 0; });
    };
  }

  return interval;
}

var millisecond = newInterval(function() {
  // noop
}, function(date, step) {
  date.setTime(+date + step);
}, function(start, end) {
  return end - start;
});

// An optimized implementation for this simple case.
millisecond.every = function(k) {
  k = Math.floor(k);
  if (!isFinite(k) || !(k > 0)) return null;
  if (!(k > 1)) return millisecond;
  return newInterval(function(date) {
    date.setTime(Math.floor(date / k) * k);
  }, function(date, step) {
    date.setTime(+date + step * k);
  }, function(start, end) {
    return (end - start) / k;
  });
};
var milliseconds = millisecond.range;

const durationSecond = 1000;
const durationMinute = durationSecond * 60;
const durationHour = durationMinute * 60;
const durationDay = durationHour * 24;
const durationWeek = durationDay * 7;
const durationMonth = durationDay * 30;
const durationYear = durationDay * 365;

var second = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds());
}, function(date, step) {
  date.setTime(+date + step * durationSecond);
}, function(start, end) {
  return (end - start) / durationSecond;
}, function(date) {
  return date.getUTCSeconds();
});
var seconds = second.range;

var minute = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getMinutes();
});
var minutes = minute.range;

var hour = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getHours();
});
var hours = hour.range;

var day = newInterval(
  date => date.setHours(0, 0, 0, 0),
  (date, step) => date.setDate(date.getDate() + step),
  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,
  date => date.getDate() - 1
);
var days = day.range;

function weekday(i) {
  return newInterval(function(date) {
    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setDate(date.getDate() + step * 7);
  }, function(start, end) {
    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;
  });
}

var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);

var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;

var month = newInterval(function(date) {
  date.setDate(1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setMonth(date.getMonth() + step);
}, function(start, end) {
  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;
}, function(date) {
  return date.getMonth();
});
var months = month.range;

var year = newInterval(function(date) {
  date.setMonth(0, 1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setFullYear(date.getFullYear() + step);
}, function(start, end) {
  return end.getFullYear() - start.getFullYear();
}, function(date) {
  return date.getFullYear();
});

// An optimized implementation for this simple case.
year.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setFullYear(Math.floor(date.getFullYear() / k) * k);
    date.setMonth(0, 1);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setFullYear(date.getFullYear() + step * k);
  });
};
var years = year.range;

var utcMinute = newInterval(function(date) {
  date.setUTCSeconds(0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getUTCMinutes();
});
var utcMinutes = utcMinute.range;

var utcHour = newInterval(function(date) {
  date.setUTCMinutes(0, 0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getUTCHours();
});
var utcHours = utcHour.range;

var utcDay = newInterval(function(date) {
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCDate(date.getUTCDate() + step);
}, function(start, end) {
  return (end - start) / durationDay;
}, function(date) {
  return date.getUTCDate() - 1;
});
var utcDays = utcDay.range;

function utcWeekday(i) {
  return newInterval(function(date) {
    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCDate(date.getUTCDate() + step * 7);
  }, function(start, end) {
    return (end - start) / durationWeek;
  });
}

var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);

var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;

var utcMonth = newInterval(function(date) {
  date.setUTCDate(1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCMonth(date.getUTCMonth() + step);
}, function(start, end) {
  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;
}, function(date) {
  return date.getUTCMonth();
});
var utcMonths = utcMonth.range;

var utcYear = newInterval(function(date) {
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCFullYear(date.getUTCFullYear() + step);
}, function(start, end) {
  return end.getUTCFullYear() - start.getUTCFullYear();
}, function(date) {
  return date.getUTCFullYear();
});

// An optimized implementation for this simple case.
utcYear.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
    date.setUTCMonth(0, 1);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCFullYear(date.getUTCFullYear() + step * k);
  });
};
var utcYears = utcYear.range;

function ticker(year, month, week, day, hour, minute) {

  const tickIntervals = [
    [second,  1,      durationSecond],
    [second,  5,  5 * durationSecond],
    [second, 15, 15 * durationSecond],
    [second, 30, 30 * durationSecond],
    [minute,  1,      durationMinute],
    [minute,  5,  5 * durationMinute],
    [minute, 15, 15 * durationMinute],
    [minute, 30, 30 * durationMinute],
    [  hour,  1,      durationHour  ],
    [  hour,  3,  3 * durationHour  ],
    [  hour,  6,  6 * durationHour  ],
    [  hour, 12, 12 * durationHour  ],
    [   day,  1,      durationDay   ],
    [   day,  2,  2 * durationDay   ],
    [  week,  1,      durationWeek  ],
    [ month,  1,      durationMonth ],
    [ month,  3,  3 * durationMonth ],
    [  year,  1,      durationYear  ]
  ];

  function ticks(start, stop, count) {
    const reverse = stop < start;
    if (reverse) [start, stop] = [stop, start];
    const interval = count && typeof count.range === "function" ? count : tickInterval(start, stop, count);
    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop
    return reverse ? ticks.reverse() : ticks;
  }

  function tickInterval(start, stop, count) {
    const target = Math.abs(stop - start) / count;
    const i = d3Array.bisector(([,, step]) => step).right(tickIntervals, target);
    if (i === tickIntervals.length) return year.every(d3Array.tickStep(start / durationYear, stop / durationYear, count));
    if (i === 0) return millisecond.every(Math.max(d3Array.tickStep(start, stop, count), 1));
    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];
    return t.every(step);
  }

  return [ticks, tickInterval];
}

const [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, utcDay, utcHour, utcMinute);
const [timeTicks, timeTickInterval] = ticker(year, month, sunday, day, hour, minute);

exports.timeDay = day;
exports.timeDays = days;
exports.timeFriday = friday;
exports.timeFridays = fridays;
exports.timeHour = hour;
exports.timeHours = hours;
exports.timeInterval = newInterval;
exports.timeMillisecond = millisecond;
exports.timeMilliseconds = milliseconds;
exports.timeMinute = minute;
exports.timeMinutes = minutes;
exports.timeMonday = monday;
exports.timeMondays = mondays;
exports.timeMonth = month;
exports.timeMonths = months;
exports.timeSaturday = saturday;
exports.timeSaturdays = saturdays;
exports.timeSecond = second;
exports.timeSeconds = seconds;
exports.timeSunday = sunday;
exports.timeSundays = sundays;
exports.timeThursday = thursday;
exports.timeThursdays = thursdays;
exports.timeTickInterval = timeTickInterval;
exports.timeTicks = timeTicks;
exports.timeTuesday = tuesday;
exports.timeTuesdays = tuesdays;
exports.timeWednesday = wednesday;
exports.timeWednesdays = wednesdays;
exports.timeWeek = sunday;
exports.timeWeeks = sundays;
exports.timeYear = year;
exports.timeYears = years;
exports.utcDay = utcDay;
exports.utcDays = utcDays;
exports.utcFriday = utcFriday;
exports.utcFridays = utcFridays;
exports.utcHour = utcHour;
exports.utcHours = utcHours;
exports.utcMillisecond = millisecond;
exports.utcMilliseconds = milliseconds;
exports.utcMinute = utcMinute;
exports.utcMinutes = utcMinutes;
exports.utcMonday = utcMonday;
exports.utcMondays = utcMondays;
exports.utcMonth = utcMonth;
exports.utcMonths = utcMonths;
exports.utcSaturday = utcSaturday;
exports.utcSaturdays = utcSaturdays;
exports.utcSecond = second;
exports.utcSeconds = seconds;
exports.utcSunday = utcSunday;
exports.utcSundays = utcSundays;
exports.utcThursday = utcThursday;
exports.utcThursdays = utcThursdays;
exports.utcTickInterval = utcTickInterval;
exports.utcTicks = utcTicks;
exports.utcTuesday = utcTuesday;
exports.utcTuesdays = utcTuesdays;
exports.utcWednesday = utcWednesday;
exports.utcWednesdays = utcWednesdays;
exports.utcWeek = utcSunday;
exports.utcWeeks = utcSundays;
exports.utcYear = utcYear;
exports.utcYears = utcYears;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-array":60}],72:[function(require,module,exports){
// https://d3js.org/d3-selection/ v1.4.2 Copyright 2020 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

var xhtml = "http://www.w3.org/1999/xhtml";

var namespaces = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

function namespace(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);
  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;
}

function creatorInherit(name) {
  return function() {
    var document = this.ownerDocument,
        uri = this.namespaceURI;
    return uri === xhtml && document.documentElement.namespaceURI === xhtml
        ? document.createElement(name)
        : document.createElementNS(uri, name);
  };
}

function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}

function creator(name) {
  var fullname = namespace(name);
  return (fullname.local
      ? creatorFixed
      : creatorInherit)(fullname);
}

function none() {}

function selector(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
}

function selection_select(select) {
  if (typeof select !== "function") select = selector(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }

  return new Selection(subgroups, this._parents);
}

function empty() {
  return [];
}

function selectorAll(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
}

function selection_selectAll(select) {
  if (typeof select !== "function") select = selectorAll(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }

  return new Selection(subgroups, parents);
}

function matcher(selector) {
  return function() {
    return this.matches(selector);
  };
}

function selection_filter(match) {
  if (typeof match !== "function") match = matcher(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new Selection(subgroups, this._parents);
}

function sparse(update) {
  return new Array(update.length);
}

function selection_enter() {
  return new Selection(this._enter || this._groups.map(sparse), this._parents);
}

function EnterNode(parent, datum) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum;
}

EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },
  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },
  querySelector: function(selector) { return this._parent.querySelector(selector); },
  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }
};

function constant(x) {
  return function() {
    return x;
  };
}

var keyPrefix = "$"; // Protect against keys like “__proto__”.

function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0,
      node,
      groupLength = group.length,
      dataLength = data.length;

  // Put any non-null nodes that fit into update.
  // Put any null nodes into enter.
  // Put any remaining data into enter.
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }

  // Put any non-null nodes that don’t fit into exit.
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}

function bindKey(parent, group, enter, update, exit, data, key) {
  var i,
      node,
      nodeByKeyValue = {},
      groupLength = group.length,
      dataLength = data.length,
      keyValues = new Array(groupLength),
      keyValue;

  // Compute the key for each node.
  // If multiple nodes have the same key, the duplicates are added to exit.
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);
      if (keyValue in nodeByKeyValue) {
        exit[i] = node;
      } else {
        nodeByKeyValue[keyValue] = node;
      }
    }
  }

  // Compute the key for each datum.
  // If there a node associated with this key, join and add it to update.
  // If there is not (or the key is a duplicate), add it to enter.
  for (i = 0; i < dataLength; ++i) {
    keyValue = keyPrefix + key.call(parent, data[i], i, data);
    if (node = nodeByKeyValue[keyValue]) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue[keyValue] = null;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }

  // Add any remaining nodes that were not bound to data to exit.
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {
      exit[i] = node;
    }
  }
}

function selection_data(value, key) {
  if (!value) {
    data = new Array(this.size()), j = -1;
    this.each(function(d) { data[++j] = d; });
    return data;
  }

  var bind = key ? bindKey : bindIndex,
      parents = this._parents,
      groups = this._groups;

  if (typeof value !== "function") value = constant(value);

  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j],
        group = groups[j],
        groupLength = group.length,
        data = value.call(parent, parent && parent.__data__, j, parents),
        dataLength = data.length,
        enterGroup = enter[j] = new Array(dataLength),
        updateGroup = update[j] = new Array(dataLength),
        exitGroup = exit[j] = new Array(groupLength);

    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);

    // Now connect the enter nodes to their following update node, such that
    // appendChild can insert the materialized enter node before this node,
    // rather than at the end of the parent node.
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1) i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength);
        previous._next = next || null;
      }
    }
  }

  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
}

function selection_exit() {
  return new Selection(this._exit || this._groups.map(sparse), this._parents);
}

function selection_join(onenter, onupdate, onexit) {
  var enter = this.enter(), update = this, exit = this.exit();
  enter = typeof onenter === "function" ? onenter(enter) : enter.append(onenter + "");
  if (onupdate != null) update = onupdate(update);
  if (onexit == null) exit.remove(); else onexit(exit);
  return enter && update ? enter.merge(update).order() : update;
}

function selection_merge(selection) {

  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new Selection(merges, this._parents);
}

function selection_order() {

  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {
      if (node = group[i]) {
        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }

  return this;
}

function selection_sort(compare) {
  if (!compare) compare = ascending;

  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }

  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }

  return new Selection(sortgroups, this._parents).order();
}

function ascending(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

function selection_call() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
}

function selection_nodes() {
  var nodes = new Array(this.size()), i = -1;
  this.each(function() { nodes[++i] = this; });
  return nodes;
}

function selection_node() {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node) return node;
    }
  }

  return null;
}

function selection_size() {
  var size = 0;
  this.each(function() { ++size; });
  return size;
}

function selection_empty() {
  return !this.node();
}

function selection_each(callback) {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i]) callback.call(node, node.__data__, i, group);
    }
  }

  return this;
}

function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}

function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}

function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttribute(name);
    else this.setAttribute(name, v);
  };
}

function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);
    else this.setAttributeNS(fullname.space, fullname.local, v);
  };
}

function selection_attr(name, value) {
  var fullname = namespace(name);

  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local
        ? node.getAttributeNS(fullname.space, fullname.local)
        : node.getAttribute(fullname);
  }

  return this.each((value == null
      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === "function"
      ? (fullname.local ? attrFunctionNS : attrFunction)
      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));
}

function defaultView(node) {
  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node
      || (node.document && node) // node is a Window
      || node.defaultView; // node is a Document
}

function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}

function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.style.removeProperty(name);
    else this.style.setProperty(name, v, priority);
  };
}

function selection_style(name, value, priority) {
  return arguments.length > 1
      ? this.each((value == null
            ? styleRemove : typeof value === "function"
            ? styleFunction
            : styleConstant)(name, value, priority == null ? "" : priority))
      : styleValue(this.node(), name);
}

function styleValue(node, name) {
  return node.style.getPropertyValue(name)
      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);
}

function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}

function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}

function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) delete this[name];
    else this[name] = v;
  };
}

function selection_property(name, value) {
  return arguments.length > 1
      ? this.each((value == null
          ? propertyRemove : typeof value === "function"
          ? propertyFunction
          : propertyConstant)(name, value))
      : this.node()[name];
}

function classArray(string) {
  return string.trim().split(/^|\s+/);
}

function classList(node) {
  return node.classList || new ClassList(node);
}

function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}

ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};

function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.add(names[i]);
}

function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.remove(names[i]);
}

function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}

function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}

function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}

function selection_classed(name, value) {
  var names = classArray(name + "");

  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n) if (!list.contains(names[i])) return false;
    return true;
  }

  return this.each((typeof value === "function"
      ? classedFunction : value
      ? classedTrue
      : classedFalse)(names, value));
}

function textRemove() {
  this.textContent = "";
}

function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}

function selection_text(value) {
  return arguments.length
      ? this.each(value == null
          ? textRemove : (typeof value === "function"
          ? textFunction
          : textConstant)(value))
      : this.node().textContent;
}

function htmlRemove() {
  this.innerHTML = "";
}

function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}

function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}

function selection_html(value) {
  return arguments.length
      ? this.each(value == null
          ? htmlRemove : (typeof value === "function"
          ? htmlFunction
          : htmlConstant)(value))
      : this.node().innerHTML;
}

function raise() {
  if (this.nextSibling) this.parentNode.appendChild(this);
}

function selection_raise() {
  return this.each(raise);
}

function lower() {
  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);
}

function selection_lower() {
  return this.each(lower);
}

function selection_append(name) {
  var create = typeof name === "function" ? name : creator(name);
  return this.select(function() {
    return this.appendChild(create.apply(this, arguments));
  });
}

function constantNull() {
  return null;
}

function selection_insert(name, before) {
  var create = typeof name === "function" ? name : creator(name),
      select = before == null ? constantNull : typeof before === "function" ? before : selector(before);
  return this.select(function() {
    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);
  });
}

function remove() {
  var parent = this.parentNode;
  if (parent) parent.removeChild(this);
}

function selection_remove() {
  return this.each(remove);
}

function selection_cloneShallow() {
  var clone = this.cloneNode(false), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}

function selection_cloneDeep() {
  var clone = this.cloneNode(true), parent = this.parentNode;
  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;
}

function selection_clone(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
}

function selection_datum(value) {
  return arguments.length
      ? this.property("__data__", value)
      : this.node().__data__;
}

var filterEvents = {};

exports.event = null;

if (typeof document !== "undefined") {
  var element = document.documentElement;
  if (!("onmouseenter" in element)) {
    filterEvents = {mouseenter: "mouseover", mouseleave: "mouseout"};
  }
}

function filterContextListener(listener, index, group) {
  listener = contextListener(listener, index, group);
  return function(event) {
    var related = event.relatedTarget;
    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {
      listener.call(this, event);
    }
  };
}

function contextListener(listener, index, group) {
  return function(event1) {
    var event0 = exports.event; // Events can be reentrant (e.g., focus).
    exports.event = event1;
    try {
      listener.call(this, this.__data__, index, group);
    } finally {
      exports.event = event0;
    }
  };
}

function parseTypenames(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    return {type: t, name: name};
  });
}

function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on) return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
      } else {
        on[++i] = o;
      }
    }
    if (++i) on.length = i;
    else delete this.__on;
  };
}

function onAdd(typename, value, capture) {
  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;
  return function(d, i, group) {
    var on = this.__on, o, listener = wrap(value, i, group);
    if (on) for (var j = 0, m = on.length; j < m; ++j) {
      if ((o = on[j]).type === typename.type && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
        this.addEventListener(o.type, o.listener = listener, o.capture = capture);
        o.value = value;
        return;
      }
    }
    this.addEventListener(typename.type, listener, capture);
    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};
    if (!on) this.__on = [o];
    else on.push(o);
  };
}

function selection_on(typename, value, capture) {
  var typenames = parseTypenames(typename + ""), i, n = typenames.length, t;

  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {
      for (i = 0, o = on[j]; i < n; ++i) {
        if ((t = typenames[i]).type === o.type && t.name === o.name) {
          return o.value;
        }
      }
    }
    return;
  }

  on = value ? onAdd : onRemove;
  if (capture == null) capture = false;
  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));
  return this;
}

function customEvent(event1, listener, that, args) {
  var event0 = exports.event;
  event1.sourceEvent = exports.event;
  exports.event = event1;
  try {
    return listener.apply(that, args);
  } finally {
    exports.event = event0;
  }
}

function dispatchEvent(node, type, params) {
  var window = defaultView(node),
      event = window.CustomEvent;

  if (typeof event === "function") {
    event = new event(type, params);
  } else {
    event = window.document.createEvent("Event");
    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;
    else event.initEvent(type, false, false);
  }

  node.dispatchEvent(event);
}

function dispatchConstant(type, params) {
  return function() {
    return dispatchEvent(this, type, params);
  };
}

function dispatchFunction(type, params) {
  return function() {
    return dispatchEvent(this, type, params.apply(this, arguments));
  };
}

function selection_dispatch(type, params) {
  return this.each((typeof params === "function"
      ? dispatchFunction
      : dispatchConstant)(type, params));
}

var root = [null];

function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}

function selection() {
  return new Selection([[document.documentElement]], root);
}

Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: selection_select,
  selectAll: selection_selectAll,
  filter: selection_filter,
  data: selection_data,
  enter: selection_enter,
  exit: selection_exit,
  join: selection_join,
  merge: selection_merge,
  order: selection_order,
  sort: selection_sort,
  call: selection_call,
  nodes: selection_nodes,
  node: selection_node,
  size: selection_size,
  empty: selection_empty,
  each: selection_each,
  attr: selection_attr,
  style: selection_style,
  property: selection_property,
  classed: selection_classed,
  text: selection_text,
  html: selection_html,
  raise: selection_raise,
  lower: selection_lower,
  append: selection_append,
  insert: selection_insert,
  remove: selection_remove,
  clone: selection_clone,
  datum: selection_datum,
  on: selection_on,
  dispatch: selection_dispatch
};

function select(selector) {
  return typeof selector === "string"
      ? new Selection([[document.querySelector(selector)]], [document.documentElement])
      : new Selection([[selector]], root);
}

function create(name) {
  return select(creator(name).call(document.documentElement));
}

var nextId = 0;

function local() {
  return new Local;
}

function Local() {
  this._ = "@" + (++nextId).toString(36);
}

Local.prototype = local.prototype = {
  constructor: Local,
  get: function(node) {
    var id = this._;
    while (!(id in node)) if (!(node = node.parentNode)) return;
    return node[id];
  },
  set: function(node, value) {
    return node[this._] = value;
  },
  remove: function(node) {
    return this._ in node && delete node[this._];
  },
  toString: function() {
    return this._;
  }
};

function sourceEvent() {
  var current = exports.event, source;
  while (source = current.sourceEvent) current = source;
  return current;
}

function point(node, event) {
  var svg = node.ownerSVGElement || node;

  if (svg.createSVGPoint) {
    var point = svg.createSVGPoint();
    point.x = event.clientX, point.y = event.clientY;
    point = point.matrixTransform(node.getScreenCTM().inverse());
    return [point.x, point.y];
  }

  var rect = node.getBoundingClientRect();
  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];
}

function mouse(node) {
  var event = sourceEvent();
  if (event.changedTouches) event = event.changedTouches[0];
  return point(node, event);
}

function selectAll(selector) {
  return typeof selector === "string"
      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])
      : new Selection([selector == null ? [] : selector], root);
}

function touch(node, touches, identifier) {
  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;

  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {
    if ((touch = touches[i]).identifier === identifier) {
      return point(node, touch);
    }
  }

  return null;
}

function touches(node, touches) {
  if (touches == null) touches = sourceEvent().touches;

  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {
    points[i] = point(node, touches[i]);
  }

  return points;
}

exports.clientPoint = point;
exports.create = create;
exports.creator = creator;
exports.customEvent = customEvent;
exports.local = local;
exports.matcher = matcher;
exports.mouse = mouse;
exports.namespace = namespace;
exports.namespaces = namespaces;
exports.select = select;
exports.selectAll = selectAll;
exports.selection = selection;
exports.selector = selector;
exports.selectorAll = selectorAll;
exports.style = styleValue;
exports.touch = touch;
exports.touches = touches;
exports.window = defaultView;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],73:[function(require,module,exports){
// https://d3js.org/d3-time-format/ v2.3.0 Copyright 2020 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-time')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-time'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}, global.d3));
}(this, function (exports, d3Time) { 'use strict';

function localDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
    date.setFullYear(d.y);
    return date;
  }
  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
}

function utcDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
    date.setUTCFullYear(d.y);
    return date;
  }
  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
}

function newDate(y, m, d) {
  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};
}

function formatLocale(locale) {
  var locale_dateTime = locale.dateTime,
      locale_date = locale.date,
      locale_time = locale.time,
      locale_periods = locale.periods,
      locale_weekdays = locale.days,
      locale_shortWeekdays = locale.shortDays,
      locale_months = locale.months,
      locale_shortMonths = locale.shortMonths;

  var periodRe = formatRe(locale_periods),
      periodLookup = formatLookup(locale_periods),
      weekdayRe = formatRe(locale_weekdays),
      weekdayLookup = formatLookup(locale_weekdays),
      shortWeekdayRe = formatRe(locale_shortWeekdays),
      shortWeekdayLookup = formatLookup(locale_shortWeekdays),
      monthRe = formatRe(locale_months),
      monthLookup = formatLookup(locale_months),
      shortMonthRe = formatRe(locale_shortMonths),
      shortMonthLookup = formatLookup(locale_shortMonths);

  var formats = {
    "a": formatShortWeekday,
    "A": formatWeekday,
    "b": formatShortMonth,
    "B": formatMonth,
    "c": null,
    "d": formatDayOfMonth,
    "e": formatDayOfMonth,
    "f": formatMicroseconds,
    "g": formatYearISO,
    "G": formatFullYearISO,
    "H": formatHour24,
    "I": formatHour12,
    "j": formatDayOfYear,
    "L": formatMilliseconds,
    "m": formatMonthNumber,
    "M": formatMinutes,
    "p": formatPeriod,
    "q": formatQuarter,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatSeconds,
    "u": formatWeekdayNumberMonday,
    "U": formatWeekNumberSunday,
    "V": formatWeekNumberISO,
    "w": formatWeekdayNumberSunday,
    "W": formatWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatYear,
    "Y": formatFullYear,
    "Z": formatZone,
    "%": formatLiteralPercent
  };

  var utcFormats = {
    "a": formatUTCShortWeekday,
    "A": formatUTCWeekday,
    "b": formatUTCShortMonth,
    "B": formatUTCMonth,
    "c": null,
    "d": formatUTCDayOfMonth,
    "e": formatUTCDayOfMonth,
    "f": formatUTCMicroseconds,
    "g": formatUTCYearISO,
    "G": formatUTCFullYearISO,
    "H": formatUTCHour24,
    "I": formatUTCHour12,
    "j": formatUTCDayOfYear,
    "L": formatUTCMilliseconds,
    "m": formatUTCMonthNumber,
    "M": formatUTCMinutes,
    "p": formatUTCPeriod,
    "q": formatUTCQuarter,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatUTCSeconds,
    "u": formatUTCWeekdayNumberMonday,
    "U": formatUTCWeekNumberSunday,
    "V": formatUTCWeekNumberISO,
    "w": formatUTCWeekdayNumberSunday,
    "W": formatUTCWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatUTCYear,
    "Y": formatUTCFullYear,
    "Z": formatUTCZone,
    "%": formatLiteralPercent
  };

  var parses = {
    "a": parseShortWeekday,
    "A": parseWeekday,
    "b": parseShortMonth,
    "B": parseMonth,
    "c": parseLocaleDateTime,
    "d": parseDayOfMonth,
    "e": parseDayOfMonth,
    "f": parseMicroseconds,
    "g": parseYear,
    "G": parseFullYear,
    "H": parseHour24,
    "I": parseHour24,
    "j": parseDayOfYear,
    "L": parseMilliseconds,
    "m": parseMonthNumber,
    "M": parseMinutes,
    "p": parsePeriod,
    "q": parseQuarter,
    "Q": parseUnixTimestamp,
    "s": parseUnixTimestampSeconds,
    "S": parseSeconds,
    "u": parseWeekdayNumberMonday,
    "U": parseWeekNumberSunday,
    "V": parseWeekNumberISO,
    "w": parseWeekdayNumberSunday,
    "W": parseWeekNumberMonday,
    "x": parseLocaleDate,
    "X": parseLocaleTime,
    "y": parseYear,
    "Y": parseFullYear,
    "Z": parseZone,
    "%": parseLiteralPercent
  };

  // These recursive directive definitions must be deferred.
  formats.x = newFormat(locale_date, formats);
  formats.X = newFormat(locale_time, formats);
  formats.c = newFormat(locale_dateTime, formats);
  utcFormats.x = newFormat(locale_date, utcFormats);
  utcFormats.X = newFormat(locale_time, utcFormats);
  utcFormats.c = newFormat(locale_dateTime, utcFormats);

  function newFormat(specifier, formats) {
    return function(date) {
      var string = [],
          i = -1,
          j = 0,
          n = specifier.length,
          c,
          pad,
          format;

      if (!(date instanceof Date)) date = new Date(+date);

      while (++i < n) {
        if (specifier.charCodeAt(i) === 37) {
          string.push(specifier.slice(j, i));
          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);
          else pad = c === "e" ? " " : "0";
          if (format = formats[c]) c = format(date, pad);
          string.push(c);
          j = i + 1;
        }
      }

      string.push(specifier.slice(j, i));
      return string.join("");
    };
  }

  function newParse(specifier, Z) {
    return function(string) {
      var d = newDate(1900, undefined, 1),
          i = parseSpecifier(d, specifier, string += "", 0),
          week, day;
      if (i != string.length) return null;

      // If a UNIX timestamp is specified, return it.
      if ("Q" in d) return new Date(d.Q);
      if ("s" in d) return new Date(d.s * 1000 + ("L" in d ? d.L : 0));

      // If this is utcParse, never use the local timezone.
      if (Z && !("Z" in d)) d.Z = 0;

      // The am-pm flag is 0 for AM, and 1 for PM.
      if ("p" in d) d.H = d.H % 12 + d.p * 12;

      // If the month was not specified, inherit from the quarter.
      if (d.m === undefined) d.m = "q" in d ? d.q : 0;

      // Convert day-of-week and week-of-year to day-of-year.
      if ("V" in d) {
        if (d.V < 1 || d.V > 53) return null;
        if (!("w" in d)) d.w = 1;
        if ("Z" in d) {
          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();
          week = day > 4 || day === 0 ? d3Time.utcMonday.ceil(week) : d3Time.utcMonday(week);
          week = d3Time.utcDay.offset(week, (d.V - 1) * 7);
          d.y = week.getUTCFullYear();
          d.m = week.getUTCMonth();
          d.d = week.getUTCDate() + (d.w + 6) % 7;
        } else {
          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();
          week = day > 4 || day === 0 ? d3Time.timeMonday.ceil(week) : d3Time.timeMonday(week);
          week = d3Time.timeDay.offset(week, (d.V - 1) * 7);
          d.y = week.getFullYear();
          d.m = week.getMonth();
          d.d = week.getDate() + (d.w + 6) % 7;
        }
      } else if ("W" in d || "U" in d) {
        if (!("w" in d)) d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0;
        day = "Z" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();
        d.m = 0;
        d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;
      }

      // If a time zone is specified, all fields are interpreted as UTC and then
      // offset according to the specified time zone.
      if ("Z" in d) {
        d.H += d.Z / 100 | 0;
        d.M += d.Z % 100;
        return utcDate(d);
      }

      // Otherwise, all fields are in local time.
      return localDate(d);
    };
  }

  function parseSpecifier(d, specifier, string, j) {
    var i = 0,
        n = specifier.length,
        m = string.length,
        c,
        parse;

    while (i < n) {
      if (j >= m) return -1;
      c = specifier.charCodeAt(i++);
      if (c === 37) {
        c = specifier.charAt(i++);
        parse = parses[c in pads ? specifier.charAt(i++) : c];
        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;
      } else if (c != string.charCodeAt(j++)) {
        return -1;
      }
    }

    return j;
  }

  function parsePeriod(d, string, i) {
    var n = periodRe.exec(string.slice(i));
    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortWeekday(d, string, i) {
    var n = shortWeekdayRe.exec(string.slice(i));
    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseWeekday(d, string, i) {
    var n = weekdayRe.exec(string.slice(i));
    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortMonth(d, string, i) {
    var n = shortMonthRe.exec(string.slice(i));
    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseMonth(d, string, i) {
    var n = monthRe.exec(string.slice(i));
    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseLocaleDateTime(d, string, i) {
    return parseSpecifier(d, locale_dateTime, string, i);
  }

  function parseLocaleDate(d, string, i) {
    return parseSpecifier(d, locale_date, string, i);
  }

  function parseLocaleTime(d, string, i) {
    return parseSpecifier(d, locale_time, string, i);
  }

  function formatShortWeekday(d) {
    return locale_shortWeekdays[d.getDay()];
  }

  function formatWeekday(d) {
    return locale_weekdays[d.getDay()];
  }

  function formatShortMonth(d) {
    return locale_shortMonths[d.getMonth()];
  }

  function formatMonth(d) {
    return locale_months[d.getMonth()];
  }

  function formatPeriod(d) {
    return locale_periods[+(d.getHours() >= 12)];
  }

  function formatQuarter(d) {
    return 1 + ~~(d.getMonth() / 3);
  }

  function formatUTCShortWeekday(d) {
    return locale_shortWeekdays[d.getUTCDay()];
  }

  function formatUTCWeekday(d) {
    return locale_weekdays[d.getUTCDay()];
  }

  function formatUTCShortMonth(d) {
    return locale_shortMonths[d.getUTCMonth()];
  }

  function formatUTCMonth(d) {
    return locale_months[d.getUTCMonth()];
  }

  function formatUTCPeriod(d) {
    return locale_periods[+(d.getUTCHours() >= 12)];
  }

  function formatUTCQuarter(d) {
    return 1 + ~~(d.getUTCMonth() / 3);
  }

  return {
    format: function(specifier) {
      var f = newFormat(specifier += "", formats);
      f.toString = function() { return specifier; };
      return f;
    },
    parse: function(specifier) {
      var p = newParse(specifier += "", false);
      p.toString = function() { return specifier; };
      return p;
    },
    utcFormat: function(specifier) {
      var f = newFormat(specifier += "", utcFormats);
      f.toString = function() { return specifier; };
      return f;
    },
    utcParse: function(specifier) {
      var p = newParse(specifier += "", true);
      p.toString = function() { return specifier; };
      return p;
    }
  };
}

var pads = {"-": "", "_": " ", "0": "0"},
    numberRe = /^\s*\d+/, // note: ignores next directive
    percentRe = /^%/,
    requoteRe = /[\\^$*+?|[\]().{}]/g;

function pad(value, fill, width) {
  var sign = value < 0 ? "-" : "",
      string = (sign ? -value : value) + "",
      length = string.length;
  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);
}

function requote(s) {
  return s.replace(requoteRe, "\\$&");
}

function formatRe(names) {
  return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
}

function formatLookup(names) {
  var map = {}, i = -1, n = names.length;
  while (++i < n) map[names[i].toLowerCase()] = i;
  return map;
}

function parseWeekdayNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.w = +n[0], i + n[0].length) : -1;
}

function parseWeekdayNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.u = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.U = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberISO(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.V = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.W = +n[0], i + n[0].length) : -1;
}

function parseFullYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 4));
  return n ? (d.y = +n[0], i + n[0].length) : -1;
}

function parseYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;
}

function parseZone(d, string, i) {
  var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6));
  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), i + n[0].length) : -1;
}

function parseQuarter(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;
}

function parseMonthNumber(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;
}

function parseDayOfMonth(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.d = +n[0], i + n[0].length) : -1;
}

function parseDayOfYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;
}

function parseHour24(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.H = +n[0], i + n[0].length) : -1;
}

function parseMinutes(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.M = +n[0], i + n[0].length) : -1;
}

function parseSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.S = +n[0], i + n[0].length) : -1;
}

function parseMilliseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.L = +n[0], i + n[0].length) : -1;
}

function parseMicroseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 6));
  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;
}

function parseLiteralPercent(d, string, i) {
  var n = percentRe.exec(string.slice(i, i + 1));
  return n ? i + n[0].length : -1;
}

function parseUnixTimestamp(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = +n[0], i + n[0].length) : -1;
}

function parseUnixTimestampSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.s = +n[0], i + n[0].length) : -1;
}

function formatDayOfMonth(d, p) {
  return pad(d.getDate(), p, 2);
}

function formatHour24(d, p) {
  return pad(d.getHours(), p, 2);
}

function formatHour12(d, p) {
  return pad(d.getHours() % 12 || 12, p, 2);
}

function formatDayOfYear(d, p) {
  return pad(1 + d3Time.timeDay.count(d3Time.timeYear(d), d), p, 3);
}

function formatMilliseconds(d, p) {
  return pad(d.getMilliseconds(), p, 3);
}

function formatMicroseconds(d, p) {
  return formatMilliseconds(d, p) + "000";
}

function formatMonthNumber(d, p) {
  return pad(d.getMonth() + 1, p, 2);
}

function formatMinutes(d, p) {
  return pad(d.getMinutes(), p, 2);
}

function formatSeconds(d, p) {
  return pad(d.getSeconds(), p, 2);
}

function formatWeekdayNumberMonday(d) {
  var day = d.getDay();
  return day === 0 ? 7 : day;
}

function formatWeekNumberSunday(d, p) {
  return pad(d3Time.timeSunday.count(d3Time.timeYear(d) - 1, d), p, 2);
}

function dISO(d) {
  var day = d.getDay();
  return (day >= 4 || day === 0) ? d3Time.timeThursday(d) : d3Time.timeThursday.ceil(d);
}

function formatWeekNumberISO(d, p) {
  d = dISO(d);
  return pad(d3Time.timeThursday.count(d3Time.timeYear(d), d) + (d3Time.timeYear(d).getDay() === 4), p, 2);
}

function formatWeekdayNumberSunday(d) {
  return d.getDay();
}

function formatWeekNumberMonday(d, p) {
  return pad(d3Time.timeMonday.count(d3Time.timeYear(d) - 1, d), p, 2);
}

function formatYear(d, p) {
  return pad(d.getFullYear() % 100, p, 2);
}

function formatYearISO(d, p) {
  d = dISO(d);
  return pad(d.getFullYear() % 100, p, 2);
}

function formatFullYear(d, p) {
  return pad(d.getFullYear() % 10000, p, 4);
}

function formatFullYearISO(d, p) {
  var day = d.getDay();
  d = (day >= 4 || day === 0) ? d3Time.timeThursday(d) : d3Time.timeThursday.ceil(d);
  return pad(d.getFullYear() % 10000, p, 4);
}

function formatZone(d) {
  var z = d.getTimezoneOffset();
  return (z > 0 ? "-" : (z *= -1, "+"))
      + pad(z / 60 | 0, "0", 2)
      + pad(z % 60, "0", 2);
}

function formatUTCDayOfMonth(d, p) {
  return pad(d.getUTCDate(), p, 2);
}

function formatUTCHour24(d, p) {
  return pad(d.getUTCHours(), p, 2);
}

function formatUTCHour12(d, p) {
  return pad(d.getUTCHours() % 12 || 12, p, 2);
}

function formatUTCDayOfYear(d, p) {
  return pad(1 + d3Time.utcDay.count(d3Time.utcYear(d), d), p, 3);
}

function formatUTCMilliseconds(d, p) {
  return pad(d.getUTCMilliseconds(), p, 3);
}

function formatUTCMicroseconds(d, p) {
  return formatUTCMilliseconds(d, p) + "000";
}

function formatUTCMonthNumber(d, p) {
  return pad(d.getUTCMonth() + 1, p, 2);
}

function formatUTCMinutes(d, p) {
  return pad(d.getUTCMinutes(), p, 2);
}

function formatUTCSeconds(d, p) {
  return pad(d.getUTCSeconds(), p, 2);
}

function formatUTCWeekdayNumberMonday(d) {
  var dow = d.getUTCDay();
  return dow === 0 ? 7 : dow;
}

function formatUTCWeekNumberSunday(d, p) {
  return pad(d3Time.utcSunday.count(d3Time.utcYear(d) - 1, d), p, 2);
}

function UTCdISO(d) {
  var day = d.getUTCDay();
  return (day >= 4 || day === 0) ? d3Time.utcThursday(d) : d3Time.utcThursday.ceil(d);
}

function formatUTCWeekNumberISO(d, p) {
  d = UTCdISO(d);
  return pad(d3Time.utcThursday.count(d3Time.utcYear(d), d) + (d3Time.utcYear(d).getUTCDay() === 4), p, 2);
}

function formatUTCWeekdayNumberSunday(d) {
  return d.getUTCDay();
}

function formatUTCWeekNumberMonday(d, p) {
  return pad(d3Time.utcMonday.count(d3Time.utcYear(d) - 1, d), p, 2);
}

function formatUTCYear(d, p) {
  return pad(d.getUTCFullYear() % 100, p, 2);
}

function formatUTCYearISO(d, p) {
  d = UTCdISO(d);
  return pad(d.getUTCFullYear() % 100, p, 2);
}

function formatUTCFullYear(d, p) {
  return pad(d.getUTCFullYear() % 10000, p, 4);
}

function formatUTCFullYearISO(d, p) {
  var day = d.getUTCDay();
  d = (day >= 4 || day === 0) ? d3Time.utcThursday(d) : d3Time.utcThursday.ceil(d);
  return pad(d.getUTCFullYear() % 10000, p, 4);
}

function formatUTCZone() {
  return "+0000";
}

function formatLiteralPercent() {
  return "%";
}

function formatUnixTimestamp(d) {
  return +d;
}

function formatUnixTimestampSeconds(d) {
  return Math.floor(+d / 1000);
}

var locale;

defaultLocale({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});

function defaultLocale(definition) {
  locale = formatLocale(definition);
  exports.timeFormat = locale.format;
  exports.timeParse = locale.parse;
  exports.utcFormat = locale.utcFormat;
  exports.utcParse = locale.utcParse;
  return locale;
}

var isoSpecifier = "%Y-%m-%dT%H:%M:%S.%LZ";

function formatIsoNative(date) {
  return date.toISOString();
}

var formatIso = Date.prototype.toISOString
    ? formatIsoNative
    : exports.utcFormat(isoSpecifier);

function parseIsoNative(string) {
  var date = new Date(string);
  return isNaN(date) ? null : date;
}

var parseIso = +new Date("2000-01-01T00:00:00.000Z")
    ? parseIsoNative
    : exports.utcParse(isoSpecifier);

exports.isoFormat = formatIso;
exports.isoParse = parseIso;
exports.timeFormatDefaultLocale = defaultLocale;
exports.timeFormatLocale = formatLocale;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{"d3-time":74}],74:[function(require,module,exports){
// https://d3js.org/d3-time/ v1.1.0 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

var t0 = new Date,
    t1 = new Date;

function newInterval(floori, offseti, count, field) {

  function interval(date) {
    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;
  }

  interval.floor = function(date) {
    return floori(date = new Date(+date)), date;
  };

  interval.ceil = function(date) {
    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;
  };

  interval.round = function(date) {
    var d0 = interval(date),
        d1 = interval.ceil(date);
    return date - d0 < d1 - date ? d0 : d1;
  };

  interval.offset = function(date, step) {
    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;
  };

  interval.range = function(start, stop, step) {
    var range = [], previous;
    start = interval.ceil(start);
    step = step == null ? 1 : Math.floor(step);
    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date
    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);
    while (previous < start && start < stop);
    return range;
  };

  interval.filter = function(test) {
    return newInterval(function(date) {
      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);
    }, function(date, step) {
      if (date >= date) {
        if (step < 0) while (++step <= 0) {
          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty
        } else while (--step >= 0) {
          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty
        }
      }
    });
  };

  if (count) {
    interval.count = function(start, end) {
      t0.setTime(+start), t1.setTime(+end);
      floori(t0), floori(t1);
      return Math.floor(count(t0, t1));
    };

    interval.every = function(step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null
          : !(step > 1) ? interval
          : interval.filter(field
              ? function(d) { return field(d) % step === 0; }
              : function(d) { return interval.count(0, d) % step === 0; });
    };
  }

  return interval;
}

var millisecond = newInterval(function() {
  // noop
}, function(date, step) {
  date.setTime(+date + step);
}, function(start, end) {
  return end - start;
});

// An optimized implementation for this simple case.
millisecond.every = function(k) {
  k = Math.floor(k);
  if (!isFinite(k) || !(k > 0)) return null;
  if (!(k > 1)) return millisecond;
  return newInterval(function(date) {
    date.setTime(Math.floor(date / k) * k);
  }, function(date, step) {
    date.setTime(+date + step * k);
  }, function(start, end) {
    return (end - start) / k;
  });
};
var milliseconds = millisecond.range;

var durationSecond = 1e3;
var durationMinute = 6e4;
var durationHour = 36e5;
var durationDay = 864e5;
var durationWeek = 6048e5;

var second = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds());
}, function(date, step) {
  date.setTime(+date + step * durationSecond);
}, function(start, end) {
  return (end - start) / durationSecond;
}, function(date) {
  return date.getUTCSeconds();
});
var seconds = second.range;

var minute = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getMinutes();
});
var minutes = minute.range;

var hour = newInterval(function(date) {
  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getHours();
});
var hours = hour.range;

var day = newInterval(function(date) {
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setDate(date.getDate() + step);
}, function(start, end) {
  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;
}, function(date) {
  return date.getDate() - 1;
});
var days = day.range;

function weekday(i) {
  return newInterval(function(date) {
    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setDate(date.getDate() + step * 7);
  }, function(start, end) {
    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;
  });
}

var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);

var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;

var month = newInterval(function(date) {
  date.setDate(1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setMonth(date.getMonth() + step);
}, function(start, end) {
  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;
}, function(date) {
  return date.getMonth();
});
var months = month.range;

var year = newInterval(function(date) {
  date.setMonth(0, 1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setFullYear(date.getFullYear() + step);
}, function(start, end) {
  return end.getFullYear() - start.getFullYear();
}, function(date) {
  return date.getFullYear();
});

// An optimized implementation for this simple case.
year.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setFullYear(Math.floor(date.getFullYear() / k) * k);
    date.setMonth(0, 1);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setFullYear(date.getFullYear() + step * k);
  });
};
var years = year.range;

var utcMinute = newInterval(function(date) {
  date.setUTCSeconds(0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getUTCMinutes();
});
var utcMinutes = utcMinute.range;

var utcHour = newInterval(function(date) {
  date.setUTCMinutes(0, 0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getUTCHours();
});
var utcHours = utcHour.range;

var utcDay = newInterval(function(date) {
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCDate(date.getUTCDate() + step);
}, function(start, end) {
  return (end - start) / durationDay;
}, function(date) {
  return date.getUTCDate() - 1;
});
var utcDays = utcDay.range;

function utcWeekday(i) {
  return newInterval(function(date) {
    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCDate(date.getUTCDate() + step * 7);
  }, function(start, end) {
    return (end - start) / durationWeek;
  });
}

var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);

var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;

var utcMonth = newInterval(function(date) {
  date.setUTCDate(1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCMonth(date.getUTCMonth() + step);
}, function(start, end) {
  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;
}, function(date) {
  return date.getUTCMonth();
});
var utcMonths = utcMonth.range;

var utcYear = newInterval(function(date) {
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCFullYear(date.getUTCFullYear() + step);
}, function(start, end) {
  return end.getUTCFullYear() - start.getUTCFullYear();
}, function(date) {
  return date.getUTCFullYear();
});

// An optimized implementation for this simple case.
utcYear.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
    date.setUTCMonth(0, 1);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCFullYear(date.getUTCFullYear() + step * k);
  });
};
var utcYears = utcYear.range;

exports.timeDay = day;
exports.timeDays = days;
exports.timeFriday = friday;
exports.timeFridays = fridays;
exports.timeHour = hour;
exports.timeHours = hours;
exports.timeInterval = newInterval;
exports.timeMillisecond = millisecond;
exports.timeMilliseconds = milliseconds;
exports.timeMinute = minute;
exports.timeMinutes = minutes;
exports.timeMonday = monday;
exports.timeMondays = mondays;
exports.timeMonth = month;
exports.timeMonths = months;
exports.timeSaturday = saturday;
exports.timeSaturdays = saturdays;
exports.timeSecond = second;
exports.timeSeconds = seconds;
exports.timeSunday = sunday;
exports.timeSundays = sundays;
exports.timeThursday = thursday;
exports.timeThursdays = thursdays;
exports.timeTuesday = tuesday;
exports.timeTuesdays = tuesdays;
exports.timeWednesday = wednesday;
exports.timeWednesdays = wednesdays;
exports.timeWeek = sunday;
exports.timeWeeks = sundays;
exports.timeYear = year;
exports.timeYears = years;
exports.utcDay = utcDay;
exports.utcDays = utcDays;
exports.utcFriday = utcFriday;
exports.utcFridays = utcFridays;
exports.utcHour = utcHour;
exports.utcHours = utcHours;
exports.utcMillisecond = millisecond;
exports.utcMilliseconds = milliseconds;
exports.utcMinute = utcMinute;
exports.utcMinutes = utcMinutes;
exports.utcMonday = utcMonday;
exports.utcMondays = utcMondays;
exports.utcMonth = utcMonth;
exports.utcMonths = utcMonths;
exports.utcSaturday = utcSaturday;
exports.utcSaturdays = utcSaturdays;
exports.utcSecond = second;
exports.utcSeconds = seconds;
exports.utcSunday = utcSunday;
exports.utcSundays = utcSundays;
exports.utcThursday = utcThursday;
exports.utcThursdays = utcThursdays;
exports.utcTuesday = utcTuesday;
exports.utcTuesdays = utcTuesdays;
exports.utcWednesday = utcWednesday;
exports.utcWednesdays = utcWednesdays;
exports.utcWeek = utcSunday;
exports.utcWeeks = utcSundays;
exports.utcYear = utcYear;
exports.utcYears = utcYears;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],75:[function(require,module,exports){
// https://d3js.org/d3-timer/ v1.0.10 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
typeof define === 'function' && define.amd ? define(['exports'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}));
}(this, function (exports) { 'use strict';

var frame = 0, // is an animation frame pending?
    timeout = 0, // is a timeout pending?
    interval = 0, // are any timers active?
    pokeDelay = 1000, // how frequently we check for clock skew
    taskHead,
    taskTail,
    clockLast = 0,
    clockNow = 0,
    clockSkew = 0,
    clock = typeof performance === "object" && performance.now ? performance : Date,
    setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };

function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}

function clearNow() {
  clockNow = 0;
}

function Timer() {
  this._call =
  this._time =
  this._next = null;
}

Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function") throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail) taskTail._next = this;
      else taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};

function timer(callback, delay, time) {
  var t = new Timer;
  t.restart(callback, delay, time);
  return t;
}

function timerFlush() {
  now(); // Get the current time, if not already set.
  ++frame; // Pretend we’ve set an alarm, if we haven’t already.
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);
    t = t._next;
  }
  --frame;
}

function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}

function poke() {
  var now = clock.now(), delay = now - clockLast;
  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;
}

function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time) time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}

function sleep(time) {
  if (frame) return; // Soonest alarm already set, or will be.
  if (timeout) timeout = clearTimeout(timeout);
  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.
  if (delay > 24) {
    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval) interval = clearInterval(interval);
  } else {
    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}

function timeout$1(callback, delay, time) {
  var t = new Timer;
  delay = delay == null ? 0 : +delay;
  t.restart(function(elapsed) {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
}

function interval$1(callback, delay, time) {
  var t = new Timer, total = delay;
  if (delay == null) return t.restart(callback, delay, time), t;
  delay = +delay, time = time == null ? now() : +time;
  t.restart(function tick(elapsed) {
    elapsed += total;
    t.restart(tick, total += delay, time);
    callback(elapsed);
  }, delay, time);
  return t;
}

exports.interval = interval$1;
exports.now = now;
exports.timeout = timeout$1;
exports.timer = timer;
exports.timerFlush = timerFlush;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{}],76:[function(require,module,exports){
// https://d3js.org/d3-transition/ v1.3.2 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-selection'), require('d3-dispatch'), require('d3-timer'), require('d3-interpolate'), require('d3-color'), require('d3-ease')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-selection', 'd3-dispatch', 'd3-timer', 'd3-interpolate', 'd3-color', 'd3-ease'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}, global.d3, global.d3, global.d3, global.d3, global.d3, global.d3));
}(this, function (exports, d3Selection, d3Dispatch, d3Timer, d3Interpolate, d3Color, d3Ease) { 'use strict';

var emptyOn = d3Dispatch.dispatch("start", "end", "cancel", "interrupt");
var emptyTween = [];

var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;

function schedule(node, name, id, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules) node.__transition = {};
  else if (id in schedules) return;
  create(node, id, {
    name: name,
    index: index, // For context during callback.
    group: group, // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
}

function init(node, id) {
  var schedule = get(node, id);
  if (schedule.state > CREATED) throw new Error("too late; already scheduled");
  return schedule;
}

function set(node, id) {
  var schedule = get(node, id);
  if (schedule.state > STARTED) throw new Error("too late; already running");
  return schedule;
}

function get(node, id) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id])) throw new Error("transition not found");
  return schedule;
}

function create(node, id, self) {
  var schedules = node.__transition,
      tween;

  // Initialize the self timer when the transition is created.
  // Note the actual delay is not known until the first callback!
  schedules[id] = self;
  self.timer = d3Timer.timer(schedule, 0, self.time);

  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start, self.delay, self.time);

    // If the elapsed delay is less than our first sleep, start immediately.
    if (self.delay <= elapsed) start(elapsed - self.delay);
  }

  function start(elapsed) {
    var i, j, n, o;

    // If the state is not SCHEDULED, then we previously errored on start.
    if (self.state !== SCHEDULED) return stop();

    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name) continue;

      // While this element already has a starting transition during this frame,
      // defer starting an interrupting transition until that transition has a
      // chance to tick (and possibly end); see d3/d3-transition#54!
      if (o.state === STARTED) return d3Timer.timeout(start);

      // Interrupt the active transition, if any.
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }

      // Cancel any pre-empted transitions.
      else if (+i < id) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("cancel", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }
    }

    // Defer the first tick to end of the current frame; see d3/d3#1576.
    // Note the transition may be canceled after start and before the first tick!
    // Note this must be scheduled before the start event; see d3/d3-transition#16!
    // Assuming this is successful, subsequent callbacks go straight to tick.
    d3Timer.timeout(function() {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    });

    // Dispatch the start event.
    // Note this must be done before the tween are initialized.
    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING) return; // interrupted
    self.state = STARTED;

    // Initialize the tween, deleting null tween.
    tween = new Array(n = self.tween.length);
    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }

  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),
        i = -1,
        n = tween.length;

    while (++i < n) {
      tween[i].call(node, t);
    }

    // Dispatch the end event.
    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }

  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id];
    for (var i in schedules) return; // eslint-disable-line no-unused-vars
    delete node.__transition;
  }
}

function interrupt(node, name) {
  var schedules = node.__transition,
      schedule,
      active,
      empty = true,
      i;

  if (!schedules) return;

  name = name == null ? null : name + "";

  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }
    active = schedule.state > STARTING && schedule.state < ENDING;
    schedule.state = ENDED;
    schedule.timer.stop();
    schedule.on.call(active ? "interrupt" : "cancel", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }

  if (empty) delete node.__transition;
}

function selection_interrupt(name) {
  return this.each(function() {
    interrupt(this, name);
  });
}

function tweenRemove(id, name) {
  var tween0, tween1;
  return function() {
    var schedule = set(this, id),
        tween = schedule.tween;

    // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }

    schedule.tween = tween1;
  };
}

function tweenFunction(id, name, value) {
  var tween0, tween1;
  if (typeof value !== "function") throw new Error;
  return function() {
    var schedule = set(this, id),
        tween = schedule.tween;

    // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n) tween1.push(t);
    }

    schedule.tween = tween1;
  };
}

function transition_tween(name, value) {
  var id = this._id;

  name += "";

  if (arguments.length < 2) {
    var tween = get(this.node(), id).tween;
    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }

  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));
}

function tweenValue(transition, name, value) {
  var id = transition._id;

  transition.each(function() {
    var schedule = set(this, id);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });

  return function(node) {
    return get(node, id).value[name];
  };
}

function interpolate(a, b) {
  var c;
  return (typeof b === "number" ? d3Interpolate.interpolateNumber
      : b instanceof d3Color.color ? d3Interpolate.interpolateRgb
      : (c = d3Color.color(b)) ? (b = c, d3Interpolate.interpolateRgb)
      : d3Interpolate.interpolateString)(a, b);
}

function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, interpolate, value1) {
  var string00,
      string1 = value1 + "",
      interpolate0;
  return function() {
    var string0 = this.getAttribute(name);
    return string0 === string1 ? null
        : string0 === string00 ? interpolate0
        : interpolate0 = interpolate(string00 = string0, value1);
  };
}

function attrConstantNS(fullname, interpolate, value1) {
  var string00,
      string1 = value1 + "",
      interpolate0;
  return function() {
    var string0 = this.getAttributeNS(fullname.space, fullname.local);
    return string0 === string1 ? null
        : string0 === string00 ? interpolate0
        : interpolate0 = interpolate(string00 = string0, value1);
  };
}

function attrFunction(name, interpolate, value) {
  var string00,
      string10,
      interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null) return void this.removeAttribute(name);
    string0 = this.getAttribute(name);
    string1 = value1 + "";
    return string0 === string1 ? null
        : string0 === string00 && string1 === string10 ? interpolate0
        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}

function attrFunctionNS(fullname, interpolate, value) {
  var string00,
      string10,
      interpolate0;
  return function() {
    var string0, value1 = value(this), string1;
    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);
    string0 = this.getAttributeNS(fullname.space, fullname.local);
    string1 = value1 + "";
    return string0 === string1 ? null
        : string0 === string00 && string1 === string10 ? interpolate0
        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}

function transition_attr(name, value) {
  var fullname = d3Selection.namespace(name), i = fullname === "transform" ? d3Interpolate.interpolateTransformSvg : interpolate;
  return this.attrTween(name, typeof value === "function"
      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, "attr." + name, value))
      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)
      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));
}

function attrInterpolate(name, i) {
  return function(t) {
    this.setAttribute(name, i.call(this, t));
  };
}

function attrInterpolateNS(fullname, i) {
  return function(t) {
    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));
  };
}

function attrTweenNS(fullname, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);
    return t0;
  }
  tween._value = value;
  return tween;
}

function attrTween(name, value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);
    return t0;
  }
  tween._value = value;
  return tween;
}

function transition_attrTween(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error;
  var fullname = d3Selection.namespace(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
}

function delayFunction(id, value) {
  return function() {
    init(this, id).delay = +value.apply(this, arguments);
  };
}

function delayConstant(id, value) {
  return value = +value, function() {
    init(this, id).delay = value;
  };
}

function transition_delay(value) {
  var id = this._id;

  return arguments.length
      ? this.each((typeof value === "function"
          ? delayFunction
          : delayConstant)(id, value))
      : get(this.node(), id).delay;
}

function durationFunction(id, value) {
  return function() {
    set(this, id).duration = +value.apply(this, arguments);
  };
}

function durationConstant(id, value) {
  return value = +value, function() {
    set(this, id).duration = value;
  };
}

function transition_duration(value) {
  var id = this._id;

  return arguments.length
      ? this.each((typeof value === "function"
          ? durationFunction
          : durationConstant)(id, value))
      : get(this.node(), id).duration;
}

function easeConstant(id, value) {
  if (typeof value !== "function") throw new Error;
  return function() {
    set(this, id).ease = value;
  };
}

function transition_ease(value) {
  var id = this._id;

  return arguments.length
      ? this.each(easeConstant(id, value))
      : get(this.node(), id).ease;
}

function transition_filter(match) {
  if (typeof match !== "function") match = d3Selection.matcher(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new Transition(subgroups, this._parents, this._name, this._id);
}

function transition_merge(transition) {
  if (transition._id !== this._id) throw new Error;

  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new Transition(merges, this._parents, this._name, this._id);
}

function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0) t = t.slice(0, i);
    return !t || t === "start";
  });
}

function onFunction(id, name, listener) {
  var on0, on1, sit = start(name) ? init : set;
  return function() {
    var schedule = sit(this, id),
        on = schedule.on;

    // If this node shared a dispatch with the previous node,
    // just assign the updated shared dispatch and we’re done!
    // Otherwise, copy-on-write.
    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);

    schedule.on = on1;
  };
}

function transition_on(name, listener) {
  var id = this._id;

  return arguments.length < 2
      ? get(this.node(), id).on.on(name)
      : this.each(onFunction(id, name, listener));
}

function removeFunction(id) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition) if (+i !== id) return;
    if (parent) parent.removeChild(this);
  };
}

function transition_remove() {
  return this.on("end.remove", removeFunction(this._id));
}

function transition_select(select) {
  var name = this._name,
      id = this._id;

  if (typeof select !== "function") select = d3Selection.selector(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        schedule(subgroup[i], name, id, i, subgroup, get(node, id));
      }
    }
  }

  return new Transition(subgroups, this._parents, name, id);
}

function transition_selectAll(select) {
  var name = this._name,
      id = this._id;

  if (typeof select !== "function") select = d3Selection.selectorAll(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {
          if (child = children[k]) {
            schedule(child, name, id, k, children, inherit);
          }
        }
        subgroups.push(children);
        parents.push(node);
      }
    }
  }

  return new Transition(subgroups, parents, name, id);
}

var Selection = d3Selection.selection.prototype.constructor;

function transition_selection() {
  return new Selection(this._groups, this._parents);
}

function styleNull(name, interpolate) {
  var string00,
      string10,
      interpolate0;
  return function() {
    var string0 = d3Selection.style(this, name),
        string1 = (this.style.removeProperty(name), d3Selection.style(this, name));
    return string0 === string1 ? null
        : string0 === string00 && string1 === string10 ? interpolate0
        : interpolate0 = interpolate(string00 = string0, string10 = string1);
  };
}

function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, interpolate, value1) {
  var string00,
      string1 = value1 + "",
      interpolate0;
  return function() {
    var string0 = d3Selection.style(this, name);
    return string0 === string1 ? null
        : string0 === string00 ? interpolate0
        : interpolate0 = interpolate(string00 = string0, value1);
  };
}

function styleFunction(name, interpolate, value) {
  var string00,
      string10,
      interpolate0;
  return function() {
    var string0 = d3Selection.style(this, name),
        value1 = value(this),
        string1 = value1 + "";
    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), d3Selection.style(this, name));
    return string0 === string1 ? null
        : string0 === string00 && string1 === string10 ? interpolate0
        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));
  };
}

function styleMaybeRemove(id, name) {
  var on0, on1, listener0, key = "style." + name, event = "end." + key, remove;
  return function() {
    var schedule = set(this, id),
        on = schedule.on,
        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;

    // If this node shared a dispatch with the previous node,
    // just assign the updated shared dispatch and we’re done!
    // Otherwise, copy-on-write.
    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);

    schedule.on = on1;
  };
}

function transition_style(name, value, priority) {
  var i = (name += "") === "transform" ? d3Interpolate.interpolateTransformCss : interpolate;
  return value == null ? this
      .styleTween(name, styleNull(name, i))
      .on("end.style." + name, styleRemove(name))
    : typeof value === "function" ? this
      .styleTween(name, styleFunction(name, i, tweenValue(this, "style." + name, value)))
      .each(styleMaybeRemove(this._id, name))
    : this
      .styleTween(name, styleConstant(name, i, value), priority)
      .on("end.style." + name, null);
}

function styleInterpolate(name, i, priority) {
  return function(t) {
    this.style.setProperty(name, i.call(this, t), priority);
  };
}

function styleTween(name, value, priority) {
  var t, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);
    return t;
  }
  tween._value = value;
  return tween;
}

function transition_styleTween(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error;
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
}

function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}

function transition_text(value) {
  return this.tween("text", typeof value === "function"
      ? textFunction(tweenValue(this, "text", value))
      : textConstant(value == null ? "" : value + ""));
}

function textInterpolate(i) {
  return function(t) {
    this.textContent = i.call(this, t);
  };
}

function textTween(value) {
  var t0, i0;
  function tween() {
    var i = value.apply(this, arguments);
    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);
    return t0;
  }
  tween._value = value;
  return tween;
}

function transition_textTween(value) {
  var key = "text";
  if (arguments.length < 1) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error;
  return this.tween(key, textTween(value));
}

function transition_transition() {
  var name = this._name,
      id0 = this._id,
      id1 = newId();

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit = get(node, id0);
        schedule(node, name, id1, i, group, {
          time: inherit.time + inherit.delay + inherit.duration,
          delay: 0,
          duration: inherit.duration,
          ease: inherit.ease
        });
      }
    }
  }

  return new Transition(groups, this._parents, name, id1);
}

function transition_end() {
  var on0, on1, that = this, id = that._id, size = that.size();
  return new Promise(function(resolve, reject) {
    var cancel = {value: reject},
        end = {value: function() { if (--size === 0) resolve(); }};

    that.each(function() {
      var schedule = set(this, id),
          on = schedule.on;

      // If this node shared a dispatch with the previous node,
      // just assign the updated shared dispatch and we’re done!
      // Otherwise, copy-on-write.
      if (on !== on0) {
        on1 = (on0 = on).copy();
        on1._.cancel.push(cancel);
        on1._.interrupt.push(cancel);
        on1._.end.push(end);
      }

      schedule.on = on1;
    });
  });
}

var id = 0;

function Transition(groups, parents, name, id) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id;
}

function transition(name) {
  return d3Selection.selection().transition(name);
}

function newId() {
  return ++id;
}

var selection_prototype = d3Selection.selection.prototype;

Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: transition_select,
  selectAll: transition_selectAll,
  filter: transition_filter,
  merge: transition_merge,
  selection: transition_selection,
  transition: transition_transition,
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: transition_on,
  attr: transition_attr,
  attrTween: transition_attrTween,
  style: transition_style,
  styleTween: transition_styleTween,
  text: transition_text,
  textTween: transition_textTween,
  remove: transition_remove,
  tween: transition_tween,
  delay: transition_delay,
  duration: transition_duration,
  ease: transition_ease,
  end: transition_end
};

var defaultTiming = {
  time: null, // Set on use.
  delay: 0,
  duration: 250,
  ease: d3Ease.easeCubicInOut
};

function inherit(node, id) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id])) {
    if (!(node = node.parentNode)) {
      return defaultTiming.time = d3Timer.now(), defaultTiming;
    }
  }
  return timing;
}

function selection_transition(name) {
  var id,
      timing;

  if (name instanceof Transition) {
    id = name._id, name = name._name;
  } else {
    id = newId(), (timing = defaultTiming).time = d3Timer.now(), name = name == null ? null : name + "";
  }

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        schedule(node, name, id, i, group, timing || inherit(node, id));
      }
    }
  }

  return new Transition(groups, this._parents, name, id);
}

d3Selection.selection.prototype.interrupt = selection_interrupt;
d3Selection.selection.prototype.transition = selection_transition;

var root = [null];

function active(node, name) {
  var schedules = node.__transition,
      schedule,
      i;

  if (schedules) {
    name = name == null ? null : name + "";
    for (i in schedules) {
      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {
        return new Transition([[node]], root, name, +i);
      }
    }
  }

  return null;
}

exports.active = active;
exports.interrupt = interrupt;
exports.transition = transition;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{"d3-color":61,"d3-dispatch":62,"d3-ease":64,"d3-interpolate":69,"d3-selection":72,"d3-timer":75}],77:[function(require,module,exports){
// https://d3js.org/d3-zoom/ v1.8.3 Copyright 2019 Mike Bostock
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-dispatch'), require('d3-drag'), require('d3-interpolate'), require('d3-selection'), require('d3-transition')) :
typeof define === 'function' && define.amd ? define(['exports', 'd3-dispatch', 'd3-drag', 'd3-interpolate', 'd3-selection', 'd3-transition'], factory) :
(global = global || self, factory(global.d3 = global.d3 || {}, global.d3, global.d3, global.d3, global.d3, global.d3));
}(this, function (exports, d3Dispatch, d3Drag, d3Interpolate, d3Selection, d3Transition) { 'use strict';

function constant(x) {
  return function() {
    return x;
  };
}

function ZoomEvent(target, type, transform) {
  this.target = target;
  this.type = type;
  this.transform = transform;
}

function Transform(k, x, y) {
  this.k = k;
  this.x = x;
  this.y = y;
}

Transform.prototype = {
  constructor: Transform,
  scale: function(k) {
    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
  },
  translate: function(x, y) {
    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);
  },
  apply: function(point) {
    return [point[0] * this.k + this.x, point[1] * this.k + this.y];
  },
  applyX: function(x) {
    return x * this.k + this.x;
  },
  applyY: function(y) {
    return y * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x) {
    return (x - this.x) / this.k;
  },
  invertY: function(y) {
    return (y - this.y) / this.k;
  },
  rescaleX: function(x) {
    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));
  },
  rescaleY: function(y) {
    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};

var identity = new Transform(1, 0, 0);

transform.prototype = Transform.prototype;

function transform(node) {
  while (!node.__zoom) if (!(node = node.parentNode)) return identity;
  return node.__zoom;
}

function nopropagation() {
  d3Selection.event.stopImmediatePropagation();
}

function noevent() {
  d3Selection.event.preventDefault();
  d3Selection.event.stopImmediatePropagation();
}

// Ignore right-click, since that should open the context menu.
function defaultFilter() {
  return !d3Selection.event.ctrlKey && !d3Selection.event.button;
}

function defaultExtent() {
  var e = this;
  if (e instanceof SVGElement) {
    e = e.ownerSVGElement || e;
    if (e.hasAttribute("viewBox")) {
      e = e.viewBox.baseVal;
      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];
    }
    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];
  }
  return [[0, 0], [e.clientWidth, e.clientHeight]];
}

function defaultTransform() {
  return this.__zoom || identity;
}

function defaultWheelDelta() {
  return -d3Selection.event.deltaY * (d3Selection.event.deltaMode === 1 ? 0.05 : d3Selection.event.deltaMode ? 1 : 0.002);
}

function defaultTouchable() {
  return navigator.maxTouchPoints || ("ontouchstart" in this);
}

function defaultConstrain(transform, extent, translateExtent) {
  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],
      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],
      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],
      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];
  return transform.translate(
    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),
    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)
  );
}

function zoom() {
  var filter = defaultFilter,
      extent = defaultExtent,
      constrain = defaultConstrain,
      wheelDelta = defaultWheelDelta,
      touchable = defaultTouchable,
      scaleExtent = [0, Infinity],
      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],
      duration = 250,
      interpolate = d3Interpolate.interpolateZoom,
      listeners = d3Dispatch.dispatch("start", "zoom", "end"),
      touchstarting,
      touchending,
      touchDelay = 500,
      wheelDelay = 150,
      clickDistance2 = 0;

  function zoom(selection) {
    selection
        .property("__zoom", defaultTransform)
        .on("wheel.zoom", wheeled)
        .on("mousedown.zoom", mousedowned)
        .on("dblclick.zoom", dblclicked)
      .filter(touchable)
        .on("touchstart.zoom", touchstarted)
        .on("touchmove.zoom", touchmoved)
        .on("touchend.zoom touchcancel.zoom", touchended)
        .style("touch-action", "none")
        .style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }

  zoom.transform = function(collection, transform, point) {
    var selection = collection.selection ? collection.selection() : collection;
    selection.property("__zoom", defaultTransform);
    if (collection !== selection) {
      schedule(collection, transform, point);
    } else {
      selection.interrupt().each(function() {
        gesture(this, arguments)
            .start()
            .zoom(null, typeof transform === "function" ? transform.apply(this, arguments) : transform)
            .end();
      });
    }
  };

  zoom.scaleBy = function(selection, k, p) {
    zoom.scaleTo(selection, function() {
      var k0 = this.__zoom.k,
          k1 = typeof k === "function" ? k.apply(this, arguments) : k;
      return k0 * k1;
    }, p);
  };

  zoom.scaleTo = function(selection, k, p) {
    zoom.transform(selection, function() {
      var e = extent.apply(this, arguments),
          t0 = this.__zoom,
          p0 = p == null ? centroid(e) : typeof p === "function" ? p.apply(this, arguments) : p,
          p1 = t0.invert(p0),
          k1 = typeof k === "function" ? k.apply(this, arguments) : k;
      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);
    }, p);
  };

  zoom.translateBy = function(selection, x, y) {
    zoom.transform(selection, function() {
      return constrain(this.__zoom.translate(
        typeof x === "function" ? x.apply(this, arguments) : x,
        typeof y === "function" ? y.apply(this, arguments) : y
      ), extent.apply(this, arguments), translateExtent);
    });
  };

  zoom.translateTo = function(selection, x, y, p) {
    zoom.transform(selection, function() {
      var e = extent.apply(this, arguments),
          t = this.__zoom,
          p0 = p == null ? centroid(e) : typeof p === "function" ? p.apply(this, arguments) : p;
      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(
        typeof x === "function" ? -x.apply(this, arguments) : -x,
        typeof y === "function" ? -y.apply(this, arguments) : -y
      ), e, translateExtent);
    }, p);
  };

  function scale(transform, k) {
    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));
    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);
  }

  function translate(transform, p0, p1) {
    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;
    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);
  }

  function centroid(extent) {
    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];
  }

  function schedule(transition, transform, point) {
    transition
        .on("start.zoom", function() { gesture(this, arguments).start(); })
        .on("interrupt.zoom end.zoom", function() { gesture(this, arguments).end(); })
        .tween("zoom", function() {
          var that = this,
              args = arguments,
              g = gesture(that, args),
              e = extent.apply(that, args),
              p = point == null ? centroid(e) : typeof point === "function" ? point.apply(that, args) : point,
              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),
              a = that.__zoom,
              b = typeof transform === "function" ? transform.apply(that, args) : transform,
              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));
          return function(t) {
            if (t === 1) t = b; // Avoid rounding error on end.
            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }
            g.zoom(null, t);
          };
        });
  }

  function gesture(that, args, clean) {
    return (!clean && that.__zooming) || new Gesture(that, args);
  }

  function Gesture(that, args) {
    this.that = that;
    this.args = args;
    this.active = 0;
    this.extent = extent.apply(that, args);
    this.taps = 0;
  }

  Gesture.prototype = {
    start: function() {
      if (++this.active === 1) {
        this.that.__zooming = this;
        this.emit("start");
      }
      return this;
    },
    zoom: function(key, transform) {
      if (this.mouse && key !== "mouse") this.mouse[1] = transform.invert(this.mouse[0]);
      if (this.touch0 && key !== "touch") this.touch0[1] = transform.invert(this.touch0[0]);
      if (this.touch1 && key !== "touch") this.touch1[1] = transform.invert(this.touch1[0]);
      this.that.__zoom = transform;
      this.emit("zoom");
      return this;
    },
    end: function() {
      if (--this.active === 0) {
        delete this.that.__zooming;
        this.emit("end");
      }
      return this;
    },
    emit: function(type) {
      d3Selection.customEvent(new ZoomEvent(zoom, type, this.that.__zoom), listeners.apply, listeners, [type, this.that, this.args]);
    }
  };

  function wheeled() {
    if (!filter.apply(this, arguments)) return;
    var g = gesture(this, arguments),
        t = this.__zoom,
        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),
        p = d3Selection.mouse(this);

    // If the mouse is in the same location as before, reuse it.
    // If there were recent wheel events, reset the wheel idle timeout.
    if (g.wheel) {
      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {
        g.mouse[1] = t.invert(g.mouse[0] = p);
      }
      clearTimeout(g.wheel);
    }

    // If this wheel event won’t trigger a transform change, ignore it.
    else if (t.k === k) return;

    // Otherwise, capture the mouse point and location at the start.
    else {
      g.mouse = [p, t.invert(p)];
      d3Transition.interrupt(this);
      g.start();
    }

    noevent();
    g.wheel = setTimeout(wheelidled, wheelDelay);
    g.zoom("mouse", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));

    function wheelidled() {
      g.wheel = null;
      g.end();
    }
  }

  function mousedowned() {
    if (touchending || !filter.apply(this, arguments)) return;
    var g = gesture(this, arguments, true),
        v = d3Selection.select(d3Selection.event.view).on("mousemove.zoom", mousemoved, true).on("mouseup.zoom", mouseupped, true),
        p = d3Selection.mouse(this),
        x0 = d3Selection.event.clientX,
        y0 = d3Selection.event.clientY;

    d3Drag.dragDisable(d3Selection.event.view);
    nopropagation();
    g.mouse = [p, this.__zoom.invert(p)];
    d3Transition.interrupt(this);
    g.start();

    function mousemoved() {
      noevent();
      if (!g.moved) {
        var dx = d3Selection.event.clientX - x0, dy = d3Selection.event.clientY - y0;
        g.moved = dx * dx + dy * dy > clickDistance2;
      }
      g.zoom("mouse", constrain(translate(g.that.__zoom, g.mouse[0] = d3Selection.mouse(g.that), g.mouse[1]), g.extent, translateExtent));
    }

    function mouseupped() {
      v.on("mousemove.zoom mouseup.zoom", null);
      d3Drag.dragEnable(d3Selection.event.view, g.moved);
      noevent();
      g.end();
    }
  }

  function dblclicked() {
    if (!filter.apply(this, arguments)) return;
    var t0 = this.__zoom,
        p0 = d3Selection.mouse(this),
        p1 = t0.invert(p0),
        k1 = t0.k * (d3Selection.event.shiftKey ? 0.5 : 2),
        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, arguments), translateExtent);

    noevent();
    if (duration > 0) d3Selection.select(this).transition().duration(duration).call(schedule, t1, p0);
    else d3Selection.select(this).call(zoom.transform, t1);
  }

  function touchstarted() {
    if (!filter.apply(this, arguments)) return;
    var touches = d3Selection.event.touches,
        n = touches.length,
        g = gesture(this, arguments, d3Selection.event.changedTouches.length === n),
        started, i, t, p;

    nopropagation();
    for (i = 0; i < n; ++i) {
      t = touches[i], p = d3Selection.touch(this, touches, t.identifier);
      p = [p, this.__zoom.invert(p), t.identifier];
      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;
      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;
    }

    if (touchstarting) touchstarting = clearTimeout(touchstarting);

    if (started) {
      if (g.taps < 2) touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);
      d3Transition.interrupt(this);
      g.start();
    }
  }

  function touchmoved() {
    if (!this.__zooming) return;
    var g = gesture(this, arguments),
        touches = d3Selection.event.changedTouches,
        n = touches.length, i, t, p, l;

    noevent();
    if (touchstarting) touchstarting = clearTimeout(touchstarting);
    g.taps = 0;
    for (i = 0; i < n; ++i) {
      t = touches[i], p = d3Selection.touch(this, touches, t.identifier);
      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;
      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;
    }
    t = g.that.__zoom;
    if (g.touch1) {
      var p0 = g.touch0[0], l0 = g.touch0[1],
          p1 = g.touch1[0], l1 = g.touch1[1],
          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,
          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;
      t = scale(t, Math.sqrt(dp / dl));
      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];
      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];
    }
    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];
    else return;
    g.zoom("touch", constrain(translate(t, p, l), g.extent, translateExtent));
  }

  function touchended() {
    if (!this.__zooming) return;
    var g = gesture(this, arguments),
        touches = d3Selection.event.changedTouches,
        n = touches.length, i, t;

    nopropagation();
    if (touchending) clearTimeout(touchending);
    touchending = setTimeout(function() { touchending = null; }, touchDelay);
    for (i = 0; i < n; ++i) {
      t = touches[i];
      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;
      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;
    }
    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;
    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);
    else {
      g.end();
      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.
      if (g.taps === 2) {
        var p = d3Selection.select(this).on("dblclick.zoom");
        if (p) p.apply(this, arguments);
      }
    }
  }

  zoom.wheelDelta = function(_) {
    return arguments.length ? (wheelDelta = typeof _ === "function" ? _ : constant(+_), zoom) : wheelDelta;
  };

  zoom.filter = function(_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : constant(!!_), zoom) : filter;
  };

  zoom.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : constant(!!_), zoom) : touchable;
  };

  zoom.extent = function(_) {
    return arguments.length ? (extent = typeof _ === "function" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;
  };

  zoom.scaleExtent = function(_) {
    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];
  };

  zoom.translateExtent = function(_) {
    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];
  };

  zoom.constrain = function(_) {
    return arguments.length ? (constrain = _, zoom) : constrain;
  };

  zoom.duration = function(_) {
    return arguments.length ? (duration = +_, zoom) : duration;
  };

  zoom.interpolate = function(_) {
    return arguments.length ? (interpolate = _, zoom) : interpolate;
  };

  zoom.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? zoom : value;
  };

  zoom.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);
  };

  return zoom;
}

exports.zoom = zoom;
exports.zoomIdentity = identity;
exports.zoomTransform = transform;

Object.defineProperty(exports, '__esModule', { value: true });

}));

},{"d3-dispatch":62,"d3-drag":63,"d3-interpolate":69,"d3-selection":72,"d3-transition":76}],78:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;
module.exports.once = once;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

function checkListener(listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function _getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  checkListener(listener);

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}

function once(emitter, name) {
  return new Promise(function (resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }

    function resolver() {
      if (typeof emitter.removeListener === 'function') {
        emitter.removeListener('error', errorListener);
      }
      resolve([].slice.call(arguments));
    };

    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== 'error') {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}

function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === 'function') {
    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);
  }
}

function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === 'function') {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === 'function') {
    // EventTarget does not have `error` event semantics like Node
    // EventEmitters, we do not listen for `error` events here.
    emitter.addEventListener(name, function wrapListener(arg) {
      // IE does not have builtin `{ once: true }` support so we
      // have to do it manually.
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}

},{}],79:[function(require,module,exports){
'use strict'

const sinusoidalDecimal = require('sinusoidal-decimal')

function heatColor (decimal, opacity) {
  if (typeof decimal !== 'number') throw new Error(`Invalid type ${typeof decimal}, should be decimal number`)
  if (Number.isNaN(decimal)) throw new Error('NaN passed to Flame Gradient, should be decimal number')

  // Colour progresses through almost-black to red to orange to yellow to almost white.
  // Maximises vividness of colours, and also smoothness of increase in apparent
  // brightness, stable across colour vision deficiency (CVD) simulators.

  // Increases red, then green, then blue channel, but using overlapping sinusoidal curves
  // so the next channel is starting to accelerate as previous tapers off. For regular vision,
  // small additions near 0 or 255 make little visible difference (so colours remain vivid),
  // but in CVD, these small overlaps make a big difference to apparent smoothness.

  // Different rates partically reflect different relative luminosity
  // - green highest so widest range, then red, then blue narrowest.

  // Min <0 and max >1 so pure pure black and white are reserved for outside 0-1 range
  const red = Math.round(255 * sinusoidalDecimal(decimal, -0.1, 0.56, true))
  const green = Math.round(255 * sinusoidalDecimal(decimal, 0, 1.08, true))
  const blue = Math.round(255 * sinusoidalDecimal(decimal, 0.58, 1.1, true))

  const rgb = `${red}, ${green}, ${blue}`
  if (typeof opacity === 'undefined') return `rgb(${rgb})`
  return `rgba(${rgb}, ${opacity})`
}

module.exports = heatColor

},{"sinusoidal-decimal":84}],80:[function(require,module,exports){
// expected hue range: [0, 360)
// expected saturation range: [0, 1]
// expected lightness range: [0, 1]
var hslToRgb = function(hue, saturation, lightness){
  // based on algorithm from http://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB
  if( hue == undefined ){
    return [0, 0, 0];
  }

  var chroma = (1 - Math.abs((2 * lightness) - 1)) * saturation;
  var huePrime = hue / 60;
  var secondComponent = chroma * (1 - Math.abs((huePrime % 2) - 1));

  huePrime = Math.floor(huePrime);
  var red;
  var green;
  var blue;

  if( huePrime === 0 ){
    red = chroma;
    green = secondComponent;
    blue = 0;
  }else if( huePrime === 1 ){
    red = secondComponent;
    green = chroma;
    blue = 0;
  }else if( huePrime === 2 ){
    red = 0;
    green = chroma;
    blue = secondComponent;
  }else if( huePrime === 3 ){
    red = 0;
    green = secondComponent;
    blue = chroma;
  }else if( huePrime === 4 ){
    red = secondComponent;
    green = 0;
    blue = chroma;
  }else if( huePrime === 5 ){
    red = chroma;
    green = 0;
    blue = secondComponent;
  }

  var lightnessAdjustment = lightness - (chroma / 2);
  red += lightnessAdjustment;
  green += lightnessAdjustment;
  blue += lightnessAdjustment;

  return [
      Math.abs(Math.round(red * 255)),
      Math.abs(Math.round(green * 255)),
      Math.abs(Math.round(blue * 255))
  ];

};

module.exports = hslToRgb;

},{}],81:[function(require,module,exports){
(function (global){(function (){
/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = debounce;

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],82:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],83:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty
  , undef;

/**
 * Decode a URI encoded string.
 *
 * @param {String} input The URI encoded string.
 * @returns {String|Null} The decoded string.
 * @api private
 */
function decode(input) {
  try {
    return decodeURIComponent(input.replace(/\+/g, ' '));
  } catch (e) {
    return null;
  }
}

/**
 * Attempts to encode a given input.
 *
 * @param {String} input The string that needs to be encoded.
 * @returns {String|Null} The encoded string.
 * @api private
 */
function encode(input) {
  try {
    return encodeURIComponent(input);
  } catch (e) {
    return null;
  }
}

/**
 * Simple query string parser.
 *
 * @param {String} query The query string that needs to be parsed.
 * @returns {Object}
 * @api public
 */
function querystring(query) {
  var parser = /([^=?#&]+)=?([^&]*)/g
    , result = {}
    , part;

  while (part = parser.exec(query)) {
    var key = decode(part[1])
      , value = decode(part[2]);

    //
    // Prevent overriding of existing properties. This ensures that build-in
    // methods like `toString` or __proto__ are not overriden by malicious
    // querystrings.
    //
    // In the case if failed decoding, we want to omit the key/value pairs
    // from the result.
    //
    if (key === null || value === null || key in result) continue;
    result[key] = value;
  }

  return result;
}

/**
 * Transform a query string to an object.
 *
 * @param {Object} obj Object that should be transformed.
 * @param {String} prefix Optional prefix.
 * @returns {String}
 * @api public
 */
function querystringify(obj, prefix) {
  prefix = prefix || '';

  var pairs = []
    , value
    , key;

  //
  // Optionally prefix with a '?' if needed
  //
  if ('string' !== typeof prefix) prefix = '?';

  for (key in obj) {
    if (has.call(obj, key)) {
      value = obj[key];

      //
      // Edge cases where we actually want to encode the value to an empty
      // string instead of the stringified value.
      //
      if (!value && (value === null || value === undef || isNaN(value))) {
        value = '';
      }

      key = encode(key);
      value = encode(value);

      //
      // If we failed to encode the strings, we should bail out as we don't
      // want to add invalid strings to the query.
      //
      if (key === null || value === null) continue;
      pairs.push(key +'='+ value);
    }
  }

  return pairs.length ? prefix + pairs.join('&') : '';
}

//
// Expose the module.
//
exports.stringify = querystringify;
exports.parse = querystring;

},{}],84:[function(require,module,exports){
'use strict'

function sinusoidal (initial, min, max, returnDecimal = false) {
  validate([initial, min, max])
  if (min > max) {
    const switchInput = { min, max }
    min = switchInput.max
    max = switchInput.min
  }

  if (initial > max) return returnDecimal ? 1 : max
  if (initial < min) return returnDecimal ? 0 : min
  if (min === max) return returnDecimal ? 1 : max

  const pi = Math.PI
  const range = max - min

  // Linear decimal % of distance between min and max (0 if === min, 1 if === max)
  const decimalPosition = ((initial - min) / range)

  // Gives position on a sine curve between -1 and 1
  const sinusoidalPosition = Math.sin((decimalPosition - 0.5) * pi)

  // Returns position on sine curve between 0 and 1
  const sinusoidalDecimal = ((sinusoidalPosition + 1) / 2)

  return returnDecimal ? sinusoidalDecimal : min + range * sinusoidalDecimal
}

function validate (numbers) {
  for (var i = numbers.length - 1; i >= 0; i--) {
    const num = numbers[i]
    if (typeof num !== 'number') throw new Error(`Invalid type ${typeof num} passed as sinusoidalDecimal argument [${i}]`)
    if (Number.isNaN(num)) throw new Error(`NaN passed as sinusoidalDecimal argument [${i}]`)
  }
}

module.exports = sinusoidal

},{}],85:[function(require,module,exports){

module.exports = function () {
  var selection = document.getSelection();
  if (!selection.rangeCount) {
    return function () {};
  }
  var active = document.activeElement;

  var ranges = [];
  for (var i = 0; i < selection.rangeCount; i++) {
    ranges.push(selection.getRangeAt(i));
  }

  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML
    case 'INPUT':
    case 'TEXTAREA':
      active.blur();
      break;

    default:
      active = null;
      break;
  }

  selection.removeAllRanges();
  return function () {
    selection.type === 'Caret' &&
    selection.removeAllRanges();

    if (!selection.rangeCount) {
      ranges.forEach(function(range) {
        selection.addRange(range);
      });
    }

    active &&
    active.focus();
  };
};

},{}],86:[function(require,module,exports){
/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}
function w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);u(a,"head",b)}
function A(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||"-"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+" "+(a.f+"00")+" 300px "+I(a.c)}function I(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function J(a){return a.a+a.f}function H(a){var b="normal";"o"===a.a?b="oblique":"i"===a.a&&(b="italic");return b}
function ga(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F("-");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]);K(a,"loading")}function L(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));w(a.f,c,d)}K(a,"inactive")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function N(a){u(a.c,"body",a.a)}function O(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+I(a.c)+";"+("font-style:"+H(a)+";font-weight:"+(a.f+"00")+";")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+",serif",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+",sans-serif",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G("serif",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G("sans-serif",J(this.a));a=
O(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:"serif",C:"sans-serif"},S=null;function T(){if(null===S){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.m.a.offsetWidth;this.A=q();U(this)};
function la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,J(a).toString(),"active")],[b.a.c("wf",a.c,J(a).toString(),"loading"),b.a.c("wf",a.c,J(a).toString(),"inactive")]);K(b,"fontactive",a);this.m=!0;na(this)};
W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,J(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,J(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,J(a).toString(),"inactive"));w(b.f,d,e)}K(b,"fontinactive",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),K(a,"active")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};
function qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c("wf",x.c,J(x).toString(),"loading")]);K(r,"fontloading",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);
X=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}
ra.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||"https://fast.fonts.net/jsapi")+"/"+d+".js"+(e?"?v="+e:""),function(e){e?a([]):(f["__MonotypeConfiguration__"+
d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||""}var ua="https://fonts.googleapis.com/css";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}
function wa(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family="+c.join("%7C");0<a.f.length&&(b+="&subset="+a.f.join(","));0<a.g.length&&(b+="&text="+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}
var za={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Aa={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Ba={i:"i",italic:"i",n:"n",normal:"n"},
Ca=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
function Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(","),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k="";else{k=n[2];k=null==k||""==k?"n":Ba[k];n=n[1];if(null==n||""==n)n="4";else var r=Aa[n],n=r?r:isNaN(n)?"4":n.substr(0,1);k=[k,n].join("")}}else k="";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(","):
g,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},A(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};"function"===typeof define&&define.amd?define(function(){return Z}):"undefined"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());

},{}]},{},[49]);
</script>
    </body>
  </html>
<!-- {"tool":"flame","toolVersion":"13.0.0 (0x v5.7.0)","hash":"e9ace613281f254da8cda5c44c4ddc002783f67a5aec27c2192a3c9826b967383b892c92d5e67b8aac861ff70b38b6099897a0dfc49ebc61376478ef4ec3d6e4"} -->
