# Hole Punch Interop - Implementation Definitions
# This file defines all implementations to test for hole punching interoperability

# Test Aliases - Define reusable patterns for test selection
# Usage: --test-select "~linux" or --test-ignore "!~linux"
test-aliases:
  - alias: "failing"
    value: "rust-v0.56 x rust-v0.56"

# Router configurations - Multiple router types for testing different NAT implementations
routers:
  - id: linux
    source:
      type: local
      path: images/linux
      dockerfile: Dockerfile

# Relay configurations - Multiple relay types for testing different implementations
relays:
  - id: rust-v0.56
    source:
      type: local
      path: images/rust/v0.56
      dockerfile: Dockerfile.relay
    transports: [quic-v1, tcp, webrtc-direct, ws]
    secureChannels: [noise, tls]
    muxers: [yamux, mplex]

  - id: py-v0.5
    source:
      type: local
      path: images/python/v0.5
      dockerfile: Dockerfile.relay
    transports: [tcp]
    secureChannels: [noise]
    muxers: [yamux]

# Implementation definitions
implementations:
  - id: rust-v0.56
    source:
      type: local
      path: images/rust/v0.56
      dockerfile: Dockerfile.peer
    transports: [quic-v1, tcp, webrtc-direct, ws]
    secureChannels: [noise, tls]
    muxers: [yamux, mplex]

  - id: py-v0.5
    source:
      type: local
      path: images/python/v0.5
      dockerfile: Dockerfile.peer
    transports: [tcp]
    secureChannels: [noise]
    muxers: [yamux]
