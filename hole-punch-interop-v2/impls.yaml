# Hole Punch Interop - Implementation Definitions
# This file defines all libp2p implementations to test for hole punching interoperability

# Test Aliases - Define reusable patterns for test selection
# Usage: --test-select "~rust" or --test-ignore "!~rust"
test-aliases:
  - alias: "rust"
    value: "rust-v0.53"

# Relay configuration - libp2p relay server for hole punching coordination
# The relay facilitates connection coordination between peers behind NATs
relay:
  id: rust-relay-v0.53
  source:
    type: local
    path: rust-relay
    dockerfile: Dockerfile
  image: hole-punch-relay
  delayMs: 25

# Router/NAT configuration - simulates NAT between local networks and internet
# Two routers are used per test: one for dialer network, one for listener network
routers:
  - id: nat-router-v1
    source:
      type: local
      path: router
      dockerfile: Dockerfile
    image: hole-punch-router
    delayMs: 100

implementations:
  - id: rust-v0.53
    source:
      type: github
      repo: libp2p/rust-libp2p
      commit: b7914e407da34c99fb76dcc300b3d44b9af97fac
      dockerfile: hole-punching-tests/Dockerfile
    transports: [tcp, quic]
